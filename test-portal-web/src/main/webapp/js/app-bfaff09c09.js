!function(t){function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}var a="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};e(function(t,e){!function(a,n){"function"==typeof define&&define.amd?define(n):"object"==typeof e?t.exports=n():a.returnExports=n()}(a,function(){"use strict";var t,e=Function.call.bind(Function.apply),n=Function.call.bind(Function.call),r=Array.isArray,o=Object.keys,i=function(t){return function(){return!e(t,this,arguments)}},s=function(t){try{return t(),!1}catch(e){return!0}},d=function(t){try{return t()}catch(e){return!1}},c=i(s),l=function(){return!s(function(){Object.defineProperty({},"x",{get:function(){}})})},p=!!Object.defineProperty&&l(),u="foo"===function(){}.name,f=Function.call.bind(Array.prototype.forEach),h=Function.call.bind(Array.prototype.reduce),v=Function.call.bind(Array.prototype.filter),m=Function.call.bind(Array.prototype.some),g=function(t,e,a,n){!n&&e in t||(p?Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:!0,value:a}):t[e]=a)},b=function(t,e,a){f(o(e),function(n){var r=e[n];g(t,n,r,!!a)})},w=Function.call.bind(Object.prototype.toString),y=function(t){return"function"==typeof t},$={getter:function(t,e,a){if(!p)throw new TypeError("getters require true ES5 support");Object.defineProperty(t,e,{configurable:!0,enumerable:!1,get:a})},proxy:function(t,e,a){if(!p)throw new TypeError("getters require true ES5 support");var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(a,e,{configurable:n.configurable,enumerable:n.enumerable,get:function(){return t[e]},set:function(a){t[e]=a}})},redefine:function(t,e,a){if(p){var n=Object.getOwnPropertyDescriptor(t,e);n.value=a,Object.defineProperty(t,e,n)}else t[e]=a},defineByDescriptor:function(t,e,a){p?Object.defineProperty(t,e,a):"value"in a&&(t[e]=a.value)},preserveToString:function(t,e){e&&y(e.toString)&&g(t,"toString",e.toString.bind(e),!0)}},x=Object.create||function(t,e){var a=function(){};a.prototype=t;var n=new a;return"undefined"!=typeof e&&o(e).forEach(function(t){$.defineByDescriptor(n,t,e[t])}),n},j=function(t,e){return!!Object.setPrototypeOf&&d(function(){var a=function n(e){var a=new t(e);return Object.setPrototypeOf(a,n.prototype),a};return Object.setPrototypeOf(a,t),a.prototype=x(t.prototype,{constructor:{value:a}}),e(a)})},C=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof a)return a;throw new Error("unable to locate global object")},k=C(),T=k.isFinite,O=Function.call.bind(String.prototype.indexOf),_=Function.apply.bind(Array.prototype.indexOf),S=Function.call.bind(Array.prototype.concat),I=Function.call.bind(String.prototype.slice),M=Function.call.bind(Array.prototype.push),E=Function.apply.bind(Array.prototype.push),P=Function.call.bind(Array.prototype.shift),A=Math.max,R=Math.min,N=Math.floor,L=Math.abs,q=Math.exp,D=Math.log,B=Math.sqrt,U=Function.call.bind(Object.prototype.hasOwnProperty),z=function(){},F=k.Map,W=F&&F.prototype["delete"],V=F&&F.prototype.get,H=F&&F.prototype.has,G=F&&F.prototype.set,J=k.Symbol||{},Q=J.species||"@@species",X=Number.isNaN||function(t){return t!==t},Y=Number.isFinite||function(t){return"number"==typeof t&&T(t)},K=y(Math.sign)?Math.sign:function(t){var e=Number(t);return 0===e?e:X(e)?e:e<0?-1:1},Z=function(t){return"[object Arguments]"===w(t)},tt=function(t){return null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==w(t)&&"[object Function]"===w(t.callee)},et=Z(arguments)?Z:tt,at={primitive:function(t){return null===t||"function"!=typeof t&&"object"!=typeof t},string:function(t){return"[object String]"===w(t)},regex:function(t){return"[object RegExp]"===w(t)},symbol:function(t){return"function"==typeof k.Symbol&&"symbol"==typeof t}},nt=function(t,e,a){var n=t[e];g(t,e,a,!0),$.preserveToString(t[e],n)},rt="function"==typeof J&&"function"==typeof J["for"]&&at.symbol(J()),ot=at.symbol(J.iterator)?J.iterator:"_es6-shim iterator_";k.Set&&"function"==typeof(new k.Set)["@@iterator"]&&(ot="@@iterator"),k.Reflect||g(k,"Reflect",{},!0);var it=k.Reflect,st=String,dt="undefined"!=typeof document&&document?document.all:null,ct=null==dt?function(t){return null==t}:function(t){return null==t&&t!==dt},lt={Call:function(t,a){var n=arguments.length>2?arguments[2]:[];if(!lt.IsCallable(t))throw new TypeError(t+" is not a function");return e(t,a,n)},RequireObjectCoercible:function(t,e){if(ct(t))throw new TypeError(e||"Cannot call method on "+t);return t},TypeIsObject:function(t){return void 0!==t&&null!==t&&t!==!0&&t!==!1&&("function"==typeof t||"object"==typeof t||t===dt)},ToObject:function(t,e){return Object(lt.RequireObjectCoercible(t,e))},IsCallable:y,IsConstructor:function(t){return lt.IsCallable(t)},ToInt32:function(t){return lt.ToNumber(t)>>0},ToUint32:function(t){return lt.ToNumber(t)>>>0},ToNumber:function(t){if("[object Symbol]"===w(t))throw new TypeError("Cannot convert a Symbol value to a number");return+t},ToInteger:function(t){var e=lt.ToNumber(t);return X(e)?0:0!==e&&Y(e)?(e>0?1:-1)*N(L(e)):e},ToLength:function(t){var e=lt.ToInteger(t);return e<=0?0:e>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e},SameValue:function(t,e){return t===e?0!==t||1/t===1/e:X(t)&&X(e)},SameValueZero:function(t,e){return t===e||X(t)&&X(e)},IsIterable:function(t){return lt.TypeIsObject(t)&&("undefined"!=typeof t[ot]||et(t))},GetIterator:function(e){if(et(e))return new t(e,"value");var a=lt.GetMethod(e,ot);if(!lt.IsCallable(a))throw new TypeError("value is not an iterable");var n=lt.Call(a,e);if(!lt.TypeIsObject(n))throw new TypeError("bad iterator");return n},GetMethod:function(t,e){var a=lt.ToObject(t)[e];if(!ct(a)){if(!lt.IsCallable(a))throw new TypeError("Method not callable: "+e);return a}},IteratorComplete:function(t){return!!t.done},IteratorClose:function(t,e){var a=lt.GetMethod(t,"return");if(void 0!==a){var n,r;try{n=lt.Call(a,t)}catch(o){r=o}if(!e){if(r)throw r;if(!lt.TypeIsObject(n))throw new TypeError("Iterator's return method returned a non-object.")}}},IteratorNext:function(t){var e=arguments.length>1?t.next(arguments[1]):t.next();if(!lt.TypeIsObject(e))throw new TypeError("bad iterator");return e},IteratorStep:function(t){var e=lt.IteratorNext(t),a=lt.IteratorComplete(e);return!a&&e},Construct:function(t,e,a,n){var r="undefined"==typeof a?t:a;if(!n&&it.construct)return it.construct(t,e,r);var o=r.prototype;lt.TypeIsObject(o)||(o=Object.prototype);var i=x(o),s=lt.Call(t,i,e);return lt.TypeIsObject(s)?s:i},SpeciesConstructor:function(t,e){var a=t.constructor;if(void 0===a)return e;if(!lt.TypeIsObject(a))throw new TypeError("Bad constructor");var n=a[Q];if(ct(n))return e;if(!lt.IsConstructor(n))throw new TypeError("Bad @@species");return n},CreateHTML:function(t,e,a,n){var r=lt.ToString(t),o="<"+e;if(""!==a){var i=lt.ToString(n),s=i.replace(/"/g,"&quot;");o+=" "+a+'="'+s+'"'}var d=o+">",c=d+r;return c+"</"+e+">"},IsRegExp:function(t){if(!lt.TypeIsObject(t))return!1;var e=t[J.match];return"undefined"!=typeof e?!!e:at.regex(t)},ToString:function(t){return st(t)}};if(p&&rt){var pt=function(t){if(at.symbol(J[t]))return J[t];var e=J["for"]("Symbol."+t);return Object.defineProperty(J,t,{configurable:!1,enumerable:!1,writable:!1,value:e}),e};if(!at.symbol(J.search)){var ut=pt("search"),ft=String.prototype.search;g(RegExp.prototype,ut,function(t){return lt.Call(ft,t,[this])});var ht=function(t){var e=lt.RequireObjectCoercible(this);if(!ct(t)){var a=lt.GetMethod(t,ut);if("undefined"!=typeof a)return lt.Call(a,t,[e])}return lt.Call(ft,e,[lt.ToString(t)])};nt(String.prototype,"search",ht)}if(!at.symbol(J.replace)){var vt=pt("replace"),mt=String.prototype.replace;g(RegExp.prototype,vt,function(t,e){return lt.Call(mt,t,[this,e])});var gt=function(t,e){var a=lt.RequireObjectCoercible(this);if(!ct(t)){var n=lt.GetMethod(t,vt);if("undefined"!=typeof n)return lt.Call(n,t,[a,e])}return lt.Call(mt,a,[lt.ToString(t),e])};nt(String.prototype,"replace",gt)}if(!at.symbol(J.split)){var bt=pt("split"),wt=String.prototype.split;g(RegExp.prototype,bt,function(t,e){return lt.Call(wt,t,[this,e])});var yt=function(t,e){var a=lt.RequireObjectCoercible(this);if(!ct(t)){var n=lt.GetMethod(t,bt);if("undefined"!=typeof n)return lt.Call(n,t,[a,e])}return lt.Call(wt,a,[lt.ToString(t),e])};nt(String.prototype,"split",yt)}var $t=at.symbol(J.match),xt=$t&&function(){var t={};return t[J.match]=function(){return 42},42!=="a".match(t)}();if(!$t||xt){var jt=pt("match"),Ct=String.prototype.match;g(RegExp.prototype,jt,function(t){return lt.Call(Ct,t,[this])});var kt=function(t){var e=lt.RequireObjectCoercible(this);if(!ct(t)){var a=lt.GetMethod(t,jt);if("undefined"!=typeof a)return lt.Call(a,t,[e])}return lt.Call(Ct,e,[lt.ToString(t)])};nt(String.prototype,"match",kt)}}var Tt=function(t,e,a){$.preserveToString(e,t),Object.setPrototypeOf&&Object.setPrototypeOf(t,e),p?f(Object.getOwnPropertyNames(t),function(n){n in z||a[n]||$.proxy(t,n,e)}):f(Object.keys(t),function(n){n in z||a[n]||(e[n]=t[n])}),e.prototype=t.prototype,$.redefine(t.prototype,"constructor",e)},Ot=function(){return this},_t=function(t){p&&!U(t,Q)&&$.getter(t,Q,Ot)},St=function(t,e){var a=e||function(){return this};g(t,ot,a),!t[ot]&&at.symbol(ot)&&(t[ot]=a)},It=function(t,e,a){p?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,writable:!0,value:a}):t[e]=a},Mt=function(t,e,a){if(It(t,e,a),!lt.SameValue(t[e],a))throw new TypeError("property is nonconfigurable")},Et=function(t,e,a,n){if(!lt.TypeIsObject(t))throw new TypeError("Constructor requires `new`: "+e.name);var r=e.prototype;lt.TypeIsObject(r)||(r=a);var o=x(r);for(var i in n)if(U(n,i)){var s=n[i];g(o,i,s,!0)}return o};if(String.fromCodePoint&&1!==String.fromCodePoint.length){var Pt=String.fromCodePoint;nt(String,"fromCodePoint",function(t){return lt.Call(Pt,this,arguments)})}var At={fromCodePoint:function(t){for(var e,a=arguments,n=[],r=0,o=arguments.length;r<o;r++){if(e=Number(a[r]),!lt.SameValue(e,lt.ToInteger(e))||e<0||e>1114111)throw new RangeError("Invalid code point "+e);e<65536?M(n,String.fromCharCode(e)):(e-=65536,M(n,String.fromCharCode((e>>10)+55296)),M(n,String.fromCharCode(e%1024+56320)))}return n.join("")},raw:function(t){var e=arguments,a=lt.ToObject(t,"bad callSite"),n=lt.ToObject(a.raw,"bad raw value"),r=n.length,o=lt.ToLength(r);if(o<=0)return"";for(var i,s,d,c,l=[],p=0;p<o&&(i=lt.ToString(p),d=lt.ToString(n[i]),M(l,d),!(p+1>=o));)s=p+1<e.length?e[p+1]:"",c=lt.ToString(s),M(l,c),p+=1;return l.join("")}};String.raw&&"xy"!==String.raw({raw:{0:"x",1:"y",length:2}})&&nt(String,"raw",At.raw),b(String,At);var Rt=function qn(t,e){if(e<1)return"";if(e%2)return qn(t,e-1)+t;var a=qn(t,e/2);return a+a},Nt=1/0,Lt={repeat:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this)),a=lt.ToInteger(t);if(a<0||a>=Nt)throw new RangeError("repeat count must be less than infinity and not overflow maximum string size");return Rt(e,a)},startsWith:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this));if(lt.IsRegExp(t))throw new TypeError('Cannot call method "startsWith" with a regex');var a,n=lt.ToString(t);arguments.length>1&&(a=arguments[1]);var r=A(lt.ToInteger(a),0);return I(e,r,r+n.length)===n},endsWith:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this));if(lt.IsRegExp(t))throw new TypeError('Cannot call method "endsWith" with a regex');var a,n=lt.ToString(t),r=e.length;arguments.length>1&&(a=arguments[1]);var o="undefined"==typeof a?r:lt.ToInteger(a),i=R(A(o,0),r);return I(e,i-n.length,i)===n},includes:function(t){if(lt.IsRegExp(t))throw new TypeError('"includes" does not accept a RegExp');var e,a=lt.ToString(t);return arguments.length>1&&(e=arguments[1]),O(this,a,e)!==-1},codePointAt:function(t){var e=lt.ToString(lt.RequireObjectCoercible(this)),a=lt.ToInteger(t),n=e.length;if(a>=0&&a<n){var r=e.charCodeAt(a),o=a+1===n;if(r<55296||r>56319||o)return r;var i=e.charCodeAt(a+1);return i<56320||i>57343?r:1024*(r-55296)+(i-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",1/0)!==!1&&nt(String.prototype,"includes",Lt.includes),String.prototype.startsWith&&String.prototype.endsWith){var qt=s(function(){"/a/".startsWith(/a/)}),Dt=d(function(){return"abc".startsWith("a",1/0)===!1});qt&&Dt||(nt(String.prototype,"startsWith",Lt.startsWith),nt(String.prototype,"endsWith",Lt.endsWith))}if(rt){var Bt=d(function(){var t=/a/;return t[J.match]=!1,"/a/".startsWith(t)});Bt||nt(String.prototype,"startsWith",Lt.startsWith);var Ut=d(function(){var t=/a/;return t[J.match]=!1,"/a/".endsWith(t)});Ut||nt(String.prototype,"endsWith",Lt.endsWith);var zt=d(function(){var t=/a/;return t[J.match]=!1,"/a/".includes(t)});zt||nt(String.prototype,"includes",Lt.includes)}b(String.prototype,Lt);var Ft=["\t\n\x0B\f\r   ᠎    ","         　\u2028","\u2029\ufeff"].join(""),Wt=new RegExp("(^["+Ft+"]+)|(["+Ft+"]+$)","g"),Vt=function(){return lt.ToString(lt.RequireObjectCoercible(this)).replace(Wt,"")},Ht=["","​","￾"].join(""),Gt=new RegExp("["+Ht+"]","g"),Jt=/^[-+]0x[0-9a-f]+$/i,Qt=Ht.trim().length!==Ht.length;g(String.prototype,"trim",Vt,Qt);var Xt=function(t){return{value:t,done:0===arguments.length}},Yt=function(t){lt.RequireObjectCoercible(t),this._s=lt.ToString(t),this._i=0};Yt.prototype.next=function(){var t=this._s,e=this._i;if("undefined"==typeof t||e>=t.length)return this._s=void 0,Xt();var a,n,r=t.charCodeAt(e);return r<55296||r>56319||e+1===t.length?n=1:(a=t.charCodeAt(e+1),n=a<56320||a>57343?1:2),this._i=e+n,Xt(t.substr(e,n))},St(Yt.prototype),St(String.prototype,function(){return new Yt(this)});var Kt={from:function(t){var e,a=this;arguments.length>1&&(e=arguments[1]);var r,o;if("undefined"==typeof e)r=!1;else{if(!lt.IsCallable(e))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(o=arguments[2]),r=!0}var i,s,d,c="undefined"!=typeof(et(t)||lt.GetMethod(t,ot));if(c){s=lt.IsConstructor(a)?Object(new a):[];var l,p,u=lt.GetIterator(t);for(d=0;l=lt.IteratorStep(u),l!==!1;){p=l.value;try{r&&(p="undefined"==typeof o?e(p,d):n(e,o,p,d)),s[d]=p}catch(f){throw lt.IteratorClose(u,!0),f}d+=1}i=d}else{var h=lt.ToObject(t);i=lt.ToLength(h.length),s=lt.IsConstructor(a)?Object(new a(i)):new Array(i);var v;for(d=0;d<i;++d)v=h[d],r&&(v="undefined"==typeof o?e(v,d):n(e,o,v,d)),Mt(s,d,v)}return s.length=i,s},of:function(){for(var t=arguments,e=arguments.length,a=this,n=r(a)||!lt.IsCallable(a)?new Array(e):lt.Construct(a,[e]),o=0;o<e;++o)Mt(n,o,t[o]);return n.length=e,n}};b(Array,Kt),_t(Array),t=function(t,e){this.i=0,this.array=t,this.kind=e},b(t.prototype,{next:function(){var e=this,a=this.i,n=this.array;if(!(this instanceof t))throw new TypeError("Not an ArrayIterator");if("undefined"!=typeof n)for(var r=lt.ToLength(n.length);a<r;a++){var o,i=e.kind;return"key"===i?o=a:"value"===i?o=n[a]:"entry"===i&&(o=[a,n[a]]),e.i=a+1,Xt(o)}return this.array=void 0,Xt()}}),St(t.prototype);var Zt=Array.of===Kt.of||function(){var t=function(t){this.length=t};t.prototype=[];var e=Array.of.apply(t,[1,2]);return e instanceof t&&2===e.length}();Zt||nt(Array,"of",Kt.of);var te={copyWithin:function(t,e){var a,n=lt.ToObject(this),r=lt.ToLength(n.length),o=lt.ToInteger(t),i=lt.ToInteger(e),s=o<0?A(r+o,0):R(o,r),d=i<0?A(r+i,0):R(i,r);arguments.length>2&&(a=arguments[2]);var c="undefined"==typeof a?r:lt.ToInteger(a),l=c<0?A(r+c,0):R(c,r),p=R(l-d,r-s),u=1;for(d<s&&s<d+p&&(u=-1,d+=p-1,s+=p-1);p>0;)d in n?n[s]=n[d]:delete n[s],d+=u,s+=u,p-=1;return n},fill:function(t){var e;arguments.length>1&&(e=arguments[1]);var a;arguments.length>2&&(a=arguments[2]);var n=lt.ToObject(this),r=lt.ToLength(n.length);e=lt.ToInteger("undefined"==typeof e?0:e),a=lt.ToInteger("undefined"==typeof a?r:a);for(var o=e<0?A(r+e,0):R(e,r),i=a<0?r+a:a,s=o;s<r&&s<i;++s)n[s]=t;return n},find:function(t){var e=lt.ToObject(this),a=lt.ToLength(e.length);if(!lt.IsCallable(t))throw new TypeError("Array#find: predicate must be a function");for(var r,o=arguments.length>1?arguments[1]:null,i=0;i<a;i++)if(r=e[i],o){if(n(t,o,r,i,e))return r}else if(t(r,i,e))return r},findIndex:function(t){var e=lt.ToObject(this),a=lt.ToLength(e.length);if(!lt.IsCallable(t))throw new TypeError("Array#findIndex: predicate must be a function");for(var r=arguments.length>1?arguments[1]:null,o=0;o<a;o++)if(r){if(n(t,r,e[o],o,e))return o}else if(t(e[o],o,e))return o;return-1},keys:function(){return new t(this,"key")},values:function(){return new t(this,"value")},entries:function(){return new t(this,"entry")}};if(Array.prototype.keys&&!lt.IsCallable([1].keys().next)&&delete Array.prototype.keys,Array.prototype.entries&&!lt.IsCallable([1].entries().next)&&delete Array.prototype.entries,Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ot]&&(b(Array.prototype,{values:Array.prototype[ot]}),at.symbol(J.unscopables)&&(Array.prototype[J.unscopables].values=!0)),u&&Array.prototype.values&&"values"!==Array.prototype.values.name){var ee=Array.prototype.values;nt(Array.prototype,"values",function(){return lt.Call(ee,this,arguments)}),g(Array.prototype,ot,Array.prototype.values,!0)}b(Array.prototype,te),1/[!0].indexOf(!0,-0)<0&&g(Array.prototype,"indexOf",function(t){var e=_(this,arguments);return 0===e&&1/e<0?0:e},!0),St(Array.prototype,function(){return this.values()}),Object.getPrototypeOf&&St(Object.getPrototypeOf([].values()));var ae=function(){return d(function(){return 0===Array.from({length:-1}).length})}(),ne=function(){var t=Array.from([0].entries());return 1===t.length&&r(t[0])&&0===t[0][0]&&0===t[0][1]}();ae&&ne||nt(Array,"from",Kt.from);var re=function(){return d(function(){return Array.from([0],void 0)})}();if(!re){var oe=Array.from;nt(Array,"from",function(t){return arguments.length>1&&"undefined"!=typeof arguments[1]?lt.Call(oe,this,arguments):n(oe,this,t)})}var ie=-(Math.pow(2,32)-1),se=function(t,e){var a={length:ie};return a[e?(a.length>>>0)-1:0]=!0,d(function(){return n(t,a,function(){throw new RangeError("should not reach here")},[]),!0})};if(!se(Array.prototype.forEach)){var de=Array.prototype.forEach;nt(Array.prototype,"forEach",function(t){return lt.Call(de,this.length>=0?this:[],arguments)},!0)}if(!se(Array.prototype.map)){var ce=Array.prototype.map;nt(Array.prototype,"map",function(t){return lt.Call(ce,this.length>=0?this:[],arguments)},!0)}if(!se(Array.prototype.filter)){var le=Array.prototype.filter;nt(Array.prototype,"filter",function(t){return lt.Call(le,this.length>=0?this:[],arguments)},!0)}if(!se(Array.prototype.some)){var pe=Array.prototype.some;nt(Array.prototype,"some",function(t){return lt.Call(pe,this.length>=0?this:[],arguments)},!0)}if(!se(Array.prototype.every)){var ue=Array.prototype.every;nt(Array.prototype,"every",function(t){return lt.Call(ue,this.length>=0?this:[],arguments)},!0)}if(!se(Array.prototype.reduce)){var fe=Array.prototype.reduce;nt(Array.prototype,"reduce",function(t){return lt.Call(fe,this.length>=0?this:[],arguments)},!0)}if(!se(Array.prototype.reduceRight,!0)){var he=Array.prototype.reduceRight;nt(Array.prototype,"reduceRight",function(t){return lt.Call(he,this.length>=0?this:[],arguments)},!0)}var ve=8!==Number("0o10"),me=2!==Number("0b10"),ge=m(Ht,function(t){return 0===Number(t+0+t)});if(ve||me||ge){var be=Number,we=/^0b[01]+$/i,ye=/^0o[0-7]+$/i,$e=we.test.bind(we),xe=ye.test.bind(ye),je=function(t){var e;if("function"==typeof t.valueOf&&(e=t.valueOf(),at.primitive(e)))return e;if("function"==typeof t.toString&&(e=t.toString(),at.primitive(e)))return e;throw new TypeError("No default value")},Ce=Gt.test.bind(Gt),ke=Jt.test.bind(Jt),Te=function(){var t=function(e){var a;a=arguments.length>0?at.primitive(e)?e:je(e,"number"):0,"string"==typeof a&&(a=lt.Call(Vt,a),$e(a)?a=parseInt(I(a,2),2):xe(a)?a=parseInt(I(a,2),8):(Ce(a)||ke(a))&&(a=NaN));var n=this,r=d(function(){return be.prototype.valueOf.call(n),!0});return n instanceof t&&!r?new be(a):be(a)};return t}();Tt(be,Te,{}),b(Te,{NaN:be.NaN,MAX_VALUE:be.MAX_VALUE,MIN_VALUE:be.MIN_VALUE,NEGATIVE_INFINITY:be.NEGATIVE_INFINITY,POSITIVE_INFINITY:be.POSITIVE_INFINITY}),Number=Te,$.redefine(k,"Number",Te)}var Oe=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Oe,MIN_SAFE_INTEGER:-Oe,EPSILON:2.220446049250313e-16,parseInt:k.parseInt,parseFloat:k.parseFloat,isFinite:Y,isInteger:function(t){return Y(t)&&lt.ToInteger(t)===t},isSafeInteger:function(t){return Number.isInteger(t)&&L(t)<=Number.MAX_SAFE_INTEGER},isNaN:X}),g(Number,"parseInt",k.parseInt,Number.parseInt!==k.parseInt),1===[,1].find(function(){return!0})&&nt(Array.prototype,"find",te.find),0!==[,1].findIndex(function(){return!0})&&nt(Array.prototype,"findIndex",te.findIndex);var _e=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable),Se=function(t,e){p&&_e(t,e)&&Object.defineProperty(t,e,{enumerable:!1})},Ie=function(){for(var t=arguments,e=Number(this),a=arguments.length,n=a-e,r=new Array(n<0?0:n),o=e;o<a;++o)r[o-e]=t[o];return r},Me=function(t){return function(e,a){return e[a]=t[a],e}},Ee=function(t,e){var a,n=o(Object(e));return lt.IsCallable(Object.getOwnPropertySymbols)&&(a=v(Object.getOwnPropertySymbols(Object(e)),_e(e))),h(S(n,a||[]),Me(e),t)},Pe={assign:function(t,e){var a=lt.ToObject(t,"Cannot convert undefined or null to object");return h(lt.Call(Ie,1,arguments),Ee,a)},is:function(t,e){return lt.SameValue(t,e)}},Ae=Object.assign&&Object.preventExtensions&&function(){var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}}();if(Ae&&nt(Object,"assign",Pe.assign),b(Object,Pe),p){var Re={setPrototypeOf:function(t,e){var a,r=function(t,e){if(!lt.TypeIsObject(t))throw new TypeError("cannot set prototype on a non-object");if(null!==e&&!lt.TypeIsObject(e))throw new TypeError("can only set prototype to an object or null"+e)},o=function(t,e){return r(t,e),n(a,t,e),t};try{a=t.getOwnPropertyDescriptor(t.prototype,e).set,n(a,{},null)}catch(i){if(t.prototype!=={}[e])return;a=function(t){this[e]=t},o.polyfill=o(o({},null),t.prototype)instanceof t}return o}(Object,"__proto__")};b(Object,Re)}Object.setPrototypeOf&&Object.getPrototypeOf&&null!==Object.getPrototypeOf(Object.setPrototypeOf({},null))&&null===Object.getPrototypeOf(Object.create(null))&&!function(){var t=Object.create(null),e=Object.getPrototypeOf,a=Object.setPrototypeOf;Object.getPrototypeOf=function(a){var n=e(a);return n===t?null:n},Object.setPrototypeOf=function(e,n){var r=null===n?t:n;return a(e,r)},Object.setPrototypeOf.polyfill=!1}();var Ne=!s(function(){Object.keys("foo")});if(!Ne){var Le=Object.keys;nt(Object,"keys",function(t){return Le(lt.ToObject(t))}),o=Object.keys}var qe=s(function(){Object.keys(/a/g)});if(qe){var De=Object.keys;nt(Object,"keys",function(t){if(at.regex(t)){var e=[];for(var a in t)U(t,a)&&M(e,a);return e}return De(t)}),o=Object.keys}if(Object.getOwnPropertyNames){var Be=!s(function(){Object.getOwnPropertyNames("foo")});if(!Be){var Ue="object"==typeof window?Object.getOwnPropertyNames(window):[],ze=Object.getOwnPropertyNames;nt(Object,"getOwnPropertyNames",function(t){var e=lt.ToObject(t);if("[object Window]"===w(e))try{return ze(e)}catch(a){return S([],Ue)}return ze(e)})}}if(Object.getOwnPropertyDescriptor){var Fe=!s(function(){Object.getOwnPropertyDescriptor("foo","bar")});if(!Fe){var We=Object.getOwnPropertyDescriptor;nt(Object,"getOwnPropertyDescriptor",function(t,e){return We(lt.ToObject(t),e)})}}if(Object.seal){var Ve=!s(function(){Object.seal("foo")});if(!Ve){var He=Object.seal;nt(Object,"seal",function(t){return lt.TypeIsObject(t)?He(t):t})}}if(Object.isSealed){var Ge=!s(function(){Object.isSealed("foo")});if(!Ge){var Je=Object.isSealed;nt(Object,"isSealed",function(t){return!lt.TypeIsObject(t)||Je(t)})}}if(Object.freeze){var Qe=!s(function(){Object.freeze("foo")});if(!Qe){var Xe=Object.freeze;nt(Object,"freeze",function(t){return lt.TypeIsObject(t)?Xe(t):t})}}if(Object.isFrozen){var Ye=!s(function(){Object.isFrozen("foo")});if(!Ye){var Ke=Object.isFrozen;nt(Object,"isFrozen",function(t){return!lt.TypeIsObject(t)||Ke(t)})}}if(Object.preventExtensions){var Ze=!s(function(){Object.preventExtensions("foo")});if(!Ze){var ta=Object.preventExtensions;nt(Object,"preventExtensions",function(t){return lt.TypeIsObject(t)?ta(t):t})}}if(Object.isExtensible){var ea=!s(function(){Object.isExtensible("foo")});if(!ea){var aa=Object.isExtensible;nt(Object,"isExtensible",function(t){return!!lt.TypeIsObject(t)&&aa(t)})}}if(Object.getPrototypeOf){var na=!s(function(){Object.getPrototypeOf("foo")});if(!na){var ra=Object.getPrototypeOf;nt(Object,"getPrototypeOf",function(t){return ra(lt.ToObject(t))})}}var oa=p&&function(){var t=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return t&&lt.IsCallable(t.get)}();if(p&&!oa){var ia=function(){if(!lt.TypeIsObject(this))throw new TypeError("Method called on incompatible type: must be an object.");var t="";return this.global&&(t+="g"),this.ignoreCase&&(t+="i"),this.multiline&&(t+="m"),this.unicode&&(t+="u"),this.sticky&&(t+="y"),t};$.getter(RegExp.prototype,"flags",ia)}var sa=p&&d(function(){return"/a/i"===String(new RegExp(/a/g,"i"))}),da=rt&&p&&function(){var t=/./;return t[J.match]=!1,RegExp(t)===t}(),ca=d(function(){return"/abc/"===RegExp.prototype.toString.call({source:"abc"})}),la=ca&&d(function(){return"/a/b"===RegExp.prototype.toString.call({source:"a",flags:"b"})});if(!ca||!la){var pa=RegExp.prototype.toString;g(RegExp.prototype,"toString",function(){var t=lt.RequireObjectCoercible(this);if(at.regex(t))return n(pa,t);var e=st(t.source),a=st(t.flags);return"/"+e+"/"+a},!0),$.preserveToString(RegExp.prototype.toString,pa)}if(p&&(!sa||da)){var ua=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get,fa=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{},ha=function(){return this.source},va=lt.IsCallable(fa.get)?fa.get:ha,ma=RegExp,ga=function(){return function t(e,a){var n=lt.IsRegExp(e),r=this instanceof t;if(!r&&n&&"undefined"==typeof a&&e.constructor===t)return e;var o=e,i=a;return at.regex(e)?(o=lt.Call(va,e),i="undefined"==typeof a?lt.Call(ua,e):a,new t(o,i)):(n&&(o=e.source,i="undefined"==typeof a?e.flags:a),new ma(e,a))}}();Tt(ma,ga,{$input:!0}),RegExp=ga,$.redefine(k,"RegExp",ga)}if(p){var ba={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};f(o(ba),function(t){t in RegExp&&!(ba[t]in RegExp)&&$.getter(RegExp,ba[t],function(){return RegExp[t]})})}_t(RegExp);var wa=1/Number.EPSILON,ya=function(t){return t+wa-wa},$a=Math.pow(2,-23),xa=Math.pow(2,127)*(2-$a),ja=Math.pow(2,-126),Ca=Math.E,ka=Math.LOG2E,Ta=Math.LOG10E,Oa=Number.prototype.clz;delete Number.prototype.clz;var _a={acosh:function(t){var e=Number(t);return X(e)||t<1?NaN:1===e?0:e===1/0?e:D(e/Ca+B(e+1)*B(e-1)/Ca)+1},asinh:function Dn(t){var e=Number(t);return 0!==e&&T(e)?e<0?-Dn(-e):D(e+B(e*e+1)):e},atanh:function(t){var e=Number(t);return X(e)||e<-1||e>1?NaN:e===-1?-(1/0):1===e?1/0:0===e?e:.5*D((1+e)/(1-e))},cbrt:function(t){var e=Number(t);if(0===e)return e;var a,n=e<0;return n&&(e=-e),e===1/0?a=1/0:(a=q(D(e)/3),a=(e/(a*a)+2*a)/3),n?-a:a},clz32:function(t){var e=Number(t),a=lt.ToUint32(e);return 0===a?32:Oa?lt.Call(Oa,a):31-N(D(a+.5)*ka)},cosh:function(t){var e=Number(t);return 0===e?1:X(e)?NaN:T(e)?(e<0&&(e=-e),e>21?q(e)/2:(q(e)+q(-e))/2):1/0},expm1:function(t){var e=Number(t);if(e===-(1/0))return-1;if(!T(e)||0===e)return e;if(L(e)>.5)return q(e)-1;for(var a=e,n=0,r=1;n+a!==n;)n+=a,r+=1,a*=e/r;return n},hypot:function(t,e){for(var a=arguments,n=0,r=0,o=0;o<arguments.length;++o){var i=L(Number(a[o]));r<i?(n*=r/i*(r/i),n+=1,r=i):n+=i>0?i/r*(i/r):i}return r===1/0?1/0:r*B(n)},log2:function(t){return D(t)*ka},log10:function(t){return D(t)*Ta},log1p:function(t){var e=Number(t);return e<-1||X(e)?NaN:0===e||e===1/0?e:e===-1?-(1/0):1+e-1===0?e:e*(D(1+e)/(1+e-1))},sign:K,sinh:function(t){var e=Number(t);return T(e)&&0!==e?L(e)<1?(Math.expm1(e)-Math.expm1(-e))/2:(q(e-1)-q(-e-1))*Ca/2:e},tanh:function(t){var e=Number(t);return X(e)||0===e?e:e>=20?1:e<=-20?-1:(Math.expm1(e)-Math.expm1(-e))/(q(e)+q(-e))},trunc:function(t){var e=Number(t);return e<0?-N(-e):N(e)},imul:function(t,e){var a=lt.ToUint32(t),n=lt.ToUint32(e),r=a>>>16&65535,o=65535&a,i=n>>>16&65535,s=65535&n;return o*s+(r*s+o*i<<16>>>0)|0},fround:function(t){var e=Number(t);if(0===e||e===1/0||e===-(1/0)||X(e))return e;var a=K(e),n=L(e);if(n<ja)return a*ya(n/ja/$a)*ja*$a;var r=(1+$a/Number.EPSILON)*n,o=r-(r-n);return o>xa||X(o)?a*(1/0):a*o}};b(Math,_a),g(Math,"log1p",_a.log1p,Math.log1p(-1e-17)!==-1e-17),g(Math,"asinh",_a.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7)),g(Math,"tanh",_a.tanh,Math.tanh(-2e-17)!==-2e-17),g(Math,"acosh",_a.acosh,Math.acosh(Number.MAX_VALUE)===1/0),g(Math,"cbrt",_a.cbrt,Math.abs(1-Math.cbrt(1e-300)/1e-100)/Number.EPSILON>8),g(Math,"sinh",_a.sinh,Math.sinh(-2e-17)!==-2e-17);var Sa=Math.expm1(10);g(Math,"expm1",_a.expm1,Sa>22025.465794806718||Sa<22025.465794806718);var Ia=Math.round,Ma=0===Math.round(.5-Number.EPSILON/4)&&1===Math.round(-.5+Number.EPSILON/3.99),Ea=wa+1,Pa=2*wa-1,Aa=[Ea,Pa].every(function(t){return Math.round(t)===t});g(Math,"round",function(t){var e=N(t),a=e===-1?-0:e+1;return t-e<.5?e:a},!Ma||!Aa),$.preserveToString(Math.round,Ia);var Ra=Math.imul;Math.imul(4294967295,5)!==-5&&(Math.imul=_a.imul,$.preserveToString(Math.imul,Ra)),2!==Math.imul.length&&nt(Math,"imul",function(t,e){return lt.Call(Ra,Math,arguments)});var Na=function(){var t=k.setTimeout;if("function"==typeof t||"object"==typeof t){lt.IsPromise=function(t){return!!lt.TypeIsObject(t)&&"undefined"!=typeof t._promise};var e,a=function(t){if(!lt.IsConstructor(t))throw new TypeError("Bad promise constructor");var e=this,a=function(t,a){if(void 0!==e.resolve||void 0!==e.reject)throw new TypeError("Bad Promise implementation!");e.resolve=t,e.reject=a};if(e.resolve=void 0,e.reject=void 0,e.promise=new t(a),!lt.IsCallable(e.resolve)||!lt.IsCallable(e.reject))throw new TypeError("Bad promise constructor")};"undefined"!=typeof window&&lt.IsCallable(window.postMessage)&&(e=function(){var t=[],e="zero-timeout-message",a=function(a){M(t,a),window.postMessage(e,"*")},n=function(a){if(a.source===window&&a.data===e){if(a.stopPropagation(),0===t.length)return;var n=P(t);n()}};return window.addEventListener("message",n,!0),a});var r,o,i=function(){var t=k.Promise,e=t&&t.resolve&&t.resolve();return e&&function(t){return e.then(t)}},s=lt.IsCallable(k.setImmediate)?k.setImmediate:"object"==typeof process&&process.nextTick?process.nextTick:i()||(lt.IsCallable(e)?e():function(e){t(e,0)}),d=function(t){return t},c=function(t){throw t},l=0,p=1,u=2,f=0,h=1,v=2,m={},g=function(t,e,a){s(function(){w(t,e,a)})},w=function(t,e,a){var n,r;if(e===m)return t(a);try{n=t(a),r=e.resolve}catch(o){n=o,r=e.reject}r(n)},y=function(t,e){var a=t._promise,n=a.reactionLength;if(n>0&&(g(a.fulfillReactionHandler0,a.reactionCapability0,e),a.fulfillReactionHandler0=void 0,a.rejectReactions0=void 0,a.reactionCapability0=void 0,n>1))for(var r=1,o=0;r<n;r++,o+=3)g(a[o+f],a[o+v],e),t[o+f]=void 0,t[o+h]=void 0,t[o+v]=void 0;a.result=e,a.state=p,a.reactionLength=0},$=function(t,e){var a=t._promise,n=a.reactionLength;if(n>0&&(g(a.rejectReactionHandler0,a.reactionCapability0,e),a.fulfillReactionHandler0=void 0,a.rejectReactions0=void 0,a.reactionCapability0=void 0,n>1))for(var r=1,o=0;r<n;r++,o+=3)g(a[o+h],a[o+v],e),t[o+f]=void 0,t[o+h]=void 0,t[o+v]=void 0;a.result=e,a.state=u,a.reactionLength=0},x=function(t){var e=!1,a=function(a){var n;if(!e){if(e=!0,a===t)return $(t,new TypeError("Self resolution"));if(!lt.TypeIsObject(a))return y(t,a);try{n=a.then}catch(r){return $(t,r)}return lt.IsCallable(n)?void s(function(){C(t,a,n)}):y(t,a)}},n=function(a){if(!e)return e=!0,$(t,a)};return{resolve:a,reject:n}},j=function(t,e,a,r){t===o?n(t,e,a,r,m):n(t,e,a,r)},C=function(t,e,a){var n=x(t),r=n.resolve,o=n.reject;try{j(a,e,r,o)}catch(i){o(i)}},T=function(){var t=function(e){if(!(this instanceof t))throw new TypeError('Constructor Promise requires "new"');if(this&&this._promise)throw new TypeError("Bad construction");if(!lt.IsCallable(e))throw new TypeError("not a valid resolver");var a=Et(this,t,r,{
_promise:{result:void 0,state:l,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}}),n=x(a),o=n.reject;try{e(n.resolve,o)}catch(i){o(i)}return a};return t}();r=T.prototype;var O=function(t,e,a,n){var r=!1;return function(o){if(!r&&(r=!0,e[t]=o,0===--n.count)){var i=a.resolve;i(e)}}},_=function(t,e,a){for(var n,r,o=t.iterator,i=[],s={count:1},d=0;;){try{if(n=lt.IteratorStep(o),n===!1){t.done=!0;break}r=n.value}catch(c){throw t.done=!0,c}i[d]=void 0;var l=e.resolve(r),p=O(d,i,a,s);s.count+=1,j(l.then,l,p,a.reject),d+=1}if(0===--s.count){var u=a.resolve;u(i)}return a.promise},S=function(t,e,a){for(var n,r,o,i=t.iterator;;){try{if(n=lt.IteratorStep(i),n===!1){t.done=!0;break}r=n.value}catch(s){throw t.done=!0,s}o=e.resolve(r),j(o.then,o,a.resolve,a.reject)}return a.promise};return b(T,{all:function(t){var e=this;if(!lt.TypeIsObject(e))throw new TypeError("Promise is not object");var n,r,o=new a(e);try{return n=lt.GetIterator(t),r={iterator:n,done:!1},_(r,e,o)}catch(i){var s=i;if(r&&!r.done)try{lt.IteratorClose(n,!0)}catch(d){s=d}var c=o.reject;return c(s),o.promise}},race:function(t){var e=this;if(!lt.TypeIsObject(e))throw new TypeError("Promise is not object");var n,r,o=new a(e);try{return n=lt.GetIterator(t),r={iterator:n,done:!1},S(r,e,o)}catch(i){var s=i;if(r&&!r.done)try{lt.IteratorClose(n,!0)}catch(d){s=d}var c=o.reject;return c(s),o.promise}},reject:function(t){var e=this;if(!lt.TypeIsObject(e))throw new TypeError("Bad promise constructor");var n=new a(e),r=n.reject;return r(t),n.promise},resolve:function(t){var e=this;if(!lt.TypeIsObject(e))throw new TypeError("Bad promise constructor");if(lt.IsPromise(t)){var n=t.constructor;if(n===e)return t}var r=new a(e),o=r.resolve;return o(t),r.promise}}),b(r,{"catch":function(t){return this.then(null,t)},then:function(t,e){var n=this;if(!lt.IsPromise(n))throw new TypeError("not a promise");var r,o=lt.SpeciesConstructor(n,T),i=arguments.length>2&&arguments[2]===m;r=i&&o===T?m:new a(o);var s,b=lt.IsCallable(t)?t:d,w=lt.IsCallable(e)?e:c,y=n._promise;if(y.state===l){if(0===y.reactionLength)y.fulfillReactionHandler0=b,y.rejectReactionHandler0=w,y.reactionCapability0=r;else{var $=3*(y.reactionLength-1);y[$+f]=b,y[$+h]=w,y[$+v]=r}y.reactionLength+=1}else if(y.state===p)s=y.result,g(b,r,s);else{if(y.state!==u)throw new TypeError("unexpected Promise state");s=y.result,g(w,r,s)}return r.promise}}),m=new a(T),o=r.then,T}}();if(k.Promise&&(delete k.Promise.accept,delete k.Promise.defer,delete k.Promise.prototype.chain),"function"==typeof Na){b(k,{Promise:Na});var La=j(k.Promise,function(t){return t.resolve(42).then(function(){})instanceof t}),qa=!s(function(){k.Promise.reject(42).then(null,5).then(null,z)}),Da=s(function(){k.Promise.call(3,z)}),Ba=function(t){var e=t.resolve(5);e.constructor={};var a=t.resolve(e);try{a.then(null,z).then(null,z)}catch(n){return!0}return e===a}(k.Promise),Ua=p&&function(){var t=0,e=Object.defineProperty({},"then",{get:function(){t+=1}});return Promise.resolve(e),1===t}(),za=function Bn(t){var e=new Promise(t);t(3,function(){}),this.then=e.then,this.constructor=Bn};za.prototype=Promise.prototype,za.all=Promise.all;var Fa=d(function(){return!!za.all([1,2])});if(La&&qa&&Da&&!Ba&&Ua&&!Fa||(Promise=Na,nt(k,"Promise",Na)),1!==Promise.all.length){var Wa=Promise.all;nt(Promise,"all",function(t){return lt.Call(Wa,this,arguments)})}if(1!==Promise.race.length){var Va=Promise.race;nt(Promise,"race",function(t){return lt.Call(Va,this,arguments)})}if(1!==Promise.resolve.length){var Ha=Promise.resolve;nt(Promise,"resolve",function(t){return lt.Call(Ha,this,arguments)})}if(1!==Promise.reject.length){var Ga=Promise.reject;nt(Promise,"reject",function(t){return lt.Call(Ga,this,arguments)})}Se(Promise,"all"),Se(Promise,"race"),Se(Promise,"resolve"),Se(Promise,"reject"),_t(Promise)}var Ja=function(t){var e=o(h(t,function(t,e){return t[e]=!0,t},{}));return t.join(":")===e.join(":")},Qa=Ja(["z","a","bb"]),Xa=Ja(["z",1,"a","3",2]);if(p){var Ya=function(t,e){return e||Qa?ct(t)?"^"+lt.ToString(t):"string"==typeof t?"$"+t:"number"==typeof t?Xa?t:"n"+t:"boolean"==typeof t?"b"+t:null:null},Ka=function(){return Object.create?Object.create(null):{}},Za=function(t,e,a){if(r(a)||at.string(a))f(a,function(t){if(!lt.TypeIsObject(t))throw new TypeError("Iterator value "+t+" is not an entry object");e.set(t[0],t[1])});else if(a instanceof t)n(t.prototype.forEach,a,function(t,a){e.set(a,t)});else{var o,i;if(!ct(a)){if(i=e.set,!lt.IsCallable(i))throw new TypeError("bad map");o=lt.GetIterator(a)}if("undefined"!=typeof o)for(;;){var s=lt.IteratorStep(o);if(s===!1)break;var d=s.value;try{if(!lt.TypeIsObject(d))throw new TypeError("Iterator value "+d+" is not an entry object");n(i,e,d[0],d[1])}catch(c){throw lt.IteratorClose(o,!0),c}}}},tn=function(t,e,a){if(r(a)||at.string(a))f(a,function(t){e.add(t)});else if(a instanceof t)n(t.prototype.forEach,a,function(t){e.add(t)});else{var o,i;if(!ct(a)){if(i=e.add,!lt.IsCallable(i))throw new TypeError("bad set");o=lt.GetIterator(a)}if("undefined"!=typeof o)for(;;){var s=lt.IteratorStep(o);if(s===!1)break;var d=s.value;try{n(i,e,d)}catch(c){throw lt.IteratorClose(o,!0),c}}}},en={Map:function(){var t={},e=function(t,e){this.key=t,this.value=e,this.next=null,this.prev=null};e.prototype.isRemoved=function(){return this.key===t};var a=function(t){return!!t._es6map},r=function(t,e){if(!lt.TypeIsObject(t)||!a(t))throw new TypeError("Method Map.prototype."+e+" called on incompatible receiver "+lt.ToString(t))},o=function(t,e){r(t,"[[MapIterator]]"),this.head=t._head,this.i=this.head,this.kind=e};o.prototype={next:function(){var t=this,e=this.i,a=this.kind,n=this.head;if("undefined"==typeof this.i)return Xt();for(;e.isRemoved()&&e!==n;)e=e.prev;for(var r;e.next!==n;)if(e=e.next,!e.isRemoved())return r="key"===a?e.key:"value"===a?e.value:[e.key,e.value],t.i=e,Xt(r);return this.i=void 0,Xt()}},St(o.prototype);var i,s=function d(){if(!(this instanceof d))throw new TypeError('Constructor Map requires "new"');if(this&&this._es6map)throw new TypeError("Bad construction");var t=Et(this,d,i,{_es6map:!0,_head:null,_map:F?new F:null,_size:0,_storage:Ka()}),a=new e(null,null);return a.next=a.prev=a,t._head=a,arguments.length>0&&Za(d,t,arguments[0]),t};return i=s.prototype,$.getter(i,"size",function(){if("undefined"==typeof this._size)throw new TypeError("size method called on incompatible Map");return this._size}),b(i,{get:function(t){r(this,"get");var e,a=Ya(t,!0);if(null!==a)return e=this._storage[a],e?e.value:void 0;if(this._map)return e=V.call(this._map,t),e?e.value:void 0;for(var n=this._head,o=n;(o=o.next)!==n;)if(lt.SameValueZero(o.key,t))return o.value},has:function(t){r(this,"has");var e=Ya(t,!0);if(null!==e)return"undefined"!=typeof this._storage[e];if(this._map)return H.call(this._map,t);for(var a=this._head,n=a;(n=n.next)!==a;)if(lt.SameValueZero(n.key,t))return!0;return!1},set:function(t,a){var n=this;r(this,"set");var o,i=this._head,s=i,d=Ya(t,!0);if(null!==d){if("undefined"!=typeof this._storage[d])return this._storage[d].value=a,this;o=this._storage[d]=new e(t,a),s=i.prev}else this._map&&(H.call(this._map,t)?V.call(this._map,t).value=a:(o=new e(t,a),G.call(this._map,t,o),s=i.prev));for(;(s=s.next)!==i;)if(lt.SameValueZero(s.key,t))return s.value=a,n;return o=o||new e(t,a),lt.SameValue(-0,t)&&(o.key=0),o.next=this._head,o.prev=this._head.prev,o.prev.next=o,o.next.prev=o,this._size+=1,this},"delete":function(e){var a=this;r(this,"delete");var n=this._head,o=n,i=Ya(e,!0);if(null!==i){if("undefined"==typeof this._storage[i])return!1;o=this._storage[i].prev,delete this._storage[i]}else if(this._map){if(!H.call(this._map,e))return!1;o=V.call(this._map,e).prev,W.call(this._map,e)}for(;(o=o.next)!==n;)if(lt.SameValueZero(o.key,e))return o.key=t,o.value=t,o.prev.next=o.next,o.next.prev=o.prev,a._size-=1,!0;return!1},clear:function(){r(this,"clear"),this._map=F?new F:null,this._size=0,this._storage=Ka();for(var e=this._head,a=e,n=a.next;(a=n)!==e;)a.key=t,a.value=t,n=a.next,a.next=a.prev=e;e.next=e.prev=e},keys:function(){return r(this,"keys"),new o(this,"key")},values:function(){return r(this,"values"),new o(this,"value")},entries:function(){return r(this,"entries"),new o(this,"key+value")},forEach:function(t){var e=this;r(this,"forEach");for(var a=arguments.length>1?arguments[1]:null,o=this.entries(),i=o.next();!i.done;i=o.next())a?n(t,a,i.value[1],i.value[0],e):t(i.value[1],i.value[0],e)}}),St(i,i.entries),s}(),Set:function(){var t,e=function(t){return t._es6set&&"undefined"!=typeof t._storage},a=function(t,a){if(!lt.TypeIsObject(t)||!e(t))throw new TypeError("Set.prototype."+a+" called on incompatible receiver "+lt.ToString(t))},r=function d(){if(!(this instanceof d))throw new TypeError('Constructor Set requires "new"');if(this&&this._es6set)throw new TypeError("Bad construction");var e=Et(this,d,t,{_es6set:!0,"[[SetData]]":null,_storage:Ka()});if(!e._es6set)throw new TypeError("bad set");return arguments.length>0&&tn(d,e,arguments[0]),e};t=r.prototype;var i=function(t){var e=t;if("^null"===e)return null;if("^undefined"!==e){var a=e.charAt(0);return"$"===a?I(e,1):"n"===a?+I(e,1):"b"===a?"btrue"===e:+e}},s=function(t){if(!t["[[SetData]]"]){var e=new en.Map;t["[[SetData]]"]=e,f(o(t._storage),function(t){var a=i(t);e.set(a,a)}),t["[[SetData]]"]=e}t._storage=null};return $.getter(r.prototype,"size",function(){return a(this,"size"),this._storage?o(this._storage).length:(s(this),this["[[SetData]]"].size)}),b(r.prototype,{has:function(t){a(this,"has");var e;return this._storage&&null!==(e=Ya(t))?!!this._storage[e]:(s(this),this["[[SetData]]"].has(t))},add:function(t){a(this,"add");var e;return this._storage&&null!==(e=Ya(t))?(this._storage[e]=!0,this):(s(this),this["[[SetData]]"].set(t,t),this)},"delete":function(t){a(this,"delete");var e;if(this._storage&&null!==(e=Ya(t))){var n=U(this._storage,e);return delete this._storage[e]&&n}return s(this),this["[[SetData]]"]["delete"](t)},clear:function(){a(this,"clear"),this._storage&&(this._storage=Ka()),this["[[SetData]]"]&&this["[[SetData]]"].clear()},values:function(){return a(this,"values"),s(this),this["[[SetData]]"].values()},entries:function(){return a(this,"entries"),s(this),this["[[SetData]]"].entries()},forEach:function(t){a(this,"forEach");var e=arguments.length>1?arguments[1]:null,r=this;s(r),this["[[SetData]]"].forEach(function(a,o){e?n(t,e,o,o,r):t(o,o,r)})}}),g(r.prototype,"keys",r.prototype.values,!0),St(r.prototype,r.prototype.values),r}()};if(k.Map||k.Set){var an=d(function(){return 2===new Map([[1,2]]).get(1)});an||(k.Map=function Un(){if(!(this instanceof Un))throw new TypeError('Constructor Map requires "new"');var t=new F;return arguments.length>0&&Za(Un,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,k.Map.prototype),t},k.Map.prototype=x(F.prototype),g(k.Map.prototype,"constructor",k.Map,!0),$.preserveToString(k.Map,F));var nn=new Map,rn=function(){var t=new Map([[1,0],[2,0],[3,0],[4,0]]);return t.set(-0,t),t.get(0)===t&&t.get(-0)===t&&t.has(0)&&t.has(-0)}(),on=nn.set(1,2)===nn;rn&&on||nt(Map.prototype,"set",function(t,e){return n(G,this,0===t?0:t,e),this}),rn||(b(Map.prototype,{get:function(t){return n(V,this,0===t?0:t)},has:function(t){return n(H,this,0===t?0:t)}},!0),$.preserveToString(Map.prototype.get,V),$.preserveToString(Map.prototype.has,H));var sn=new Set,dn=function(t){return t["delete"](0),t.add(-0),!t.has(0)}(sn),cn=sn.add(1)===sn;if(!dn||!cn){var ln=Set.prototype.add;Set.prototype.add=function(t){return n(ln,this,0===t?0:t),this},$.preserveToString(Set.prototype.add,ln)}if(!dn){var pn=Set.prototype.has;Set.prototype.has=function(t){return n(pn,this,0===t?0:t)},$.preserveToString(Set.prototype.has,pn);var un=Set.prototype["delete"];Set.prototype["delete"]=function(t){return n(un,this,0===t?0:t)},$.preserveToString(Set.prototype["delete"],un)}var fn=j(k.Map,function(t){var e=new t([]);return e.set(42,42),e instanceof t}),hn=Object.setPrototypeOf&&!fn,vn=function(){try{return!(k.Map()instanceof k.Map)}catch(t){return t instanceof TypeError}}();0===k.Map.length&&!hn&&vn||(k.Map=function zn(){if(!(this instanceof zn))throw new TypeError('Constructor Map requires "new"');var t=new F;return arguments.length>0&&Za(zn,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,zn.prototype),t},k.Map.prototype=F.prototype,g(k.Map.prototype,"constructor",k.Map,!0),$.preserveToString(k.Map,F));var mn=j(k.Set,function(t){var e=new t([]);return e.add(42,42),e instanceof t}),gn=Object.setPrototypeOf&&!mn,bn=function(){try{return!(k.Set()instanceof k.Set)}catch(t){return t instanceof TypeError}}();if(0!==k.Set.length||gn||!bn){var wn=k.Set;k.Set=function Fn(){if(!(this instanceof Fn))throw new TypeError('Constructor Set requires "new"');var t=new wn;return arguments.length>0&&tn(Fn,t,arguments[0]),delete t.constructor,Object.setPrototypeOf(t,Fn.prototype),t},k.Set.prototype=wn.prototype,g(k.Set.prototype,"constructor",k.Set,!0),$.preserveToString(k.Set,wn)}var yn=new k.Map,$n=!d(function(){return yn.keys().next().done});if(("function"!=typeof k.Map.prototype.clear||0!==(new k.Set).size||0!==yn.size||"function"!=typeof k.Map.prototype.keys||"function"!=typeof k.Set.prototype.keys||"function"!=typeof k.Map.prototype.forEach||"function"!=typeof k.Set.prototype.forEach||c(k.Map)||c(k.Set)||"function"!=typeof yn.keys().next||$n||!fn)&&b(k,{Map:en.Map,Set:en.Set},!0),k.Set.prototype.keys!==k.Set.prototype.values&&g(k.Set.prototype,"keys",k.Set.prototype.values,!0),St(Object.getPrototypeOf((new k.Map).keys())),St(Object.getPrototypeOf((new k.Set).keys())),u&&"has"!==k.Set.prototype.has.name){var xn=k.Set.prototype.has;nt(k.Set.prototype,"has",function(t){return n(xn,this,t)})}}b(k,en),_t(k.Map),_t(k.Set)}var jn=function(t){if(!lt.TypeIsObject(t))throw new TypeError("target must be an object")},Cn={apply:function(){return lt.Call(lt.Call,null,arguments)},construct:function(t,e){if(!lt.IsConstructor(t))throw new TypeError("First argument must be a constructor.");var a=arguments.length>2?arguments[2]:t;if(!lt.IsConstructor(a))throw new TypeError("new.target must be a constructor.");return lt.Construct(t,e,a,"internal")},deleteProperty:function(t,e){if(jn(t),p){var a=Object.getOwnPropertyDescriptor(t,e);if(a&&!a.configurable)return!1}return delete t[e]},has:function(t,e){return jn(t),e in t}};Object.getOwnPropertyNames&&Object.assign(Cn,{ownKeys:function(t){jn(t);var e=Object.getOwnPropertyNames(t);return lt.IsCallable(Object.getOwnPropertySymbols)&&E(e,Object.getOwnPropertySymbols(t)),e}});var kn=function(t){return!s(t)};if(Object.preventExtensions&&Object.assign(Cn,{isExtensible:function(t){return jn(t),Object.isExtensible(t)},preventExtensions:function(t){return jn(t),kn(function(){Object.preventExtensions(t)})}}),p){var Tn=function(t,e,a){var n=Object.getOwnPropertyDescriptor(t,e);if(!n){var r=Object.getPrototypeOf(t);if(null===r)return;return Tn(r,e,a)}return"value"in n?n.value:n.get?lt.Call(n.get,a):void 0},On=function(t,e,a,r){var o=Object.getOwnPropertyDescriptor(t,e);if(!o){var i=Object.getPrototypeOf(t);if(null!==i)return On(i,e,a,r);o={value:void 0,writable:!0,enumerable:!0,configurable:!0}}if("value"in o){if(!o.writable)return!1;if(!lt.TypeIsObject(r))return!1;var s=Object.getOwnPropertyDescriptor(r,e);return s?it.defineProperty(r,e,{value:a}):it.defineProperty(r,e,{value:a,writable:!0,enumerable:!0,configurable:!0})}return!!o.set&&(n(o.set,r,a),!0)};Object.assign(Cn,{defineProperty:function(t,e,a){return jn(t),kn(function(){Object.defineProperty(t,e,a)})},getOwnPropertyDescriptor:function(t,e){return jn(t),Object.getOwnPropertyDescriptor(t,e)},get:function(t,e){jn(t);var a=arguments.length>2?arguments[2]:t;return Tn(t,e,a)},set:function(t,e,a){jn(t);var n=arguments.length>3?arguments[3]:t;return On(t,e,a,n)}})}if(Object.getPrototypeOf){var _n=Object.getPrototypeOf;Cn.getPrototypeOf=function(t){return jn(t),_n(t)}}if(Object.setPrototypeOf&&Cn.getPrototypeOf){var Sn=function(t,e){for(var a=e;a;){if(t===a)return!0;a=Cn.getPrototypeOf(a)}return!1};Object.assign(Cn,{setPrototypeOf:function(t,e){if(jn(t),null!==e&&!lt.TypeIsObject(e))throw new TypeError("proto must be an object or null");return e===it.getPrototypeOf(t)||!(it.isExtensible&&!it.isExtensible(t))&&!Sn(t,e)&&(Object.setPrototypeOf(t,e),!0)}})}var In=function(t,e){if(lt.IsCallable(k.Reflect[t])){var a=d(function(){return k.Reflect[t](1),k.Reflect[t](NaN),k.Reflect[t](!0),!0});a&&nt(k.Reflect,t,e)}else g(k.Reflect,t,e)};Object.keys(Cn).forEach(function(t){In(t,Cn[t])});var Mn=k.Reflect.getPrototypeOf;if(u&&Mn&&"getPrototypeOf"!==Mn.name&&nt(k.Reflect,"getPrototypeOf",function(t){return n(Mn,k.Reflect,t)}),k.Reflect.setPrototypeOf&&d(function(){return k.Reflect.setPrototypeOf(1,{}),!0})&&nt(k.Reflect,"setPrototypeOf",Cn.setPrototypeOf),k.Reflect.defineProperty&&(d(function(){var t=!k.Reflect.defineProperty(1,"test",{value:1}),e="function"!=typeof Object.preventExtensions||!k.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return t&&e})||nt(k.Reflect,"defineProperty",Cn.defineProperty)),k.Reflect.construct&&(d(function(){var t=function(){};return k.Reflect.construct(function(){},[],t)instanceof t})||nt(k.Reflect,"construct",Cn.construct)),"Invalid Date"!==String(new Date(NaN))){var En=Date.prototype.toString,Pn=function(){var t=+this;return t!==t?"Invalid Date":lt.Call(En,this)};nt(Date.prototype,"toString",Pn)}var An={anchor:function(t){return lt.CreateHTML(this,"a","name",t)},big:function(){return lt.CreateHTML(this,"big","","")},blink:function(){return lt.CreateHTML(this,"blink","","")},bold:function(){return lt.CreateHTML(this,"b","","")},fixed:function(){return lt.CreateHTML(this,"tt","","")},fontcolor:function(t){return lt.CreateHTML(this,"font","color",t)},fontsize:function(t){return lt.CreateHTML(this,"font","size",t)},italics:function(){return lt.CreateHTML(this,"i","","")},link:function(t){return lt.CreateHTML(this,"a","href",t)},small:function(){return lt.CreateHTML(this,"small","","")},strike:function(){return lt.CreateHTML(this,"strike","","")},sub:function(){return lt.CreateHTML(this,"sub","","")},sup:function(){return lt.CreateHTML(this,"sup","","")}};f(Object.keys(An),function(t){var e=String.prototype[t],a=!1;if(lt.IsCallable(e)){var r=n(e,"",' " '),o=S([],r.match(/"/g)).length;a=r!==r.toLowerCase()||o>2}else a=!0;a&&nt(String.prototype,t,An[t])});var Rn=function(){if(!rt)return!1;var t="object"==typeof JSON&&"function"==typeof JSON.stringify?JSON.stringify:null;if(!t)return!1;if("undefined"!=typeof t(J()))return!0;if("[null]"!==t([J()]))return!0;var e={a:J()};return e[J()]=!0,"{}"!==t(e)}(),Nn=d(function(){return!rt||"{}"===JSON.stringify(Object(J()))&&"[{}]"===JSON.stringify([Object(J())])});if(Rn||!Nn){var Ln=JSON.stringify;nt(JSON,"stringify",function(t){if("symbol"!=typeof t){var e;arguments.length>1&&(e=arguments[1]);var a=[t];if(r(e))a.push(e);else{var o=lt.IsCallable(e)?e:null,i=function(t,e){var a=o?n(o,this,t,e):e;if("symbol"!=typeof a)return at.symbol(a)?Me({})(a):a};a.push(i)}return arguments.length>2&&a.push(arguments[2]),Ln.apply(this,a)}})}return k})})}(this.TapBundle=this.TapBundle||{}),!function(t){!function(t,e){var a=t.Tap=function(t){var e={};t(e,a);for(var n in e)e.hasOwnProperty(n)&&(a[n]=e[n])};a.extend=e.extend,a.extend(a,{debug:!1,$:e,isEmptyObject:e.isEmptyObject,userId:parseInt($("meta[name='user_id']").attr("content"))||null})}(window||{},jQuery)}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t){function e(t,e){if(void 0===e&&(e=null),"string"!=typeof t)return e;if(void 0!==n[t])return n[t];for(var a=t.split("."),r=n,o=0;o<a.length;o++){if(void 0===r[a[o]])return e;r=r[a[o]]}return r}function a(t){if(void 0!==n[t])return!0;for(var e=t.split("."),a=n,r=0;r<e.length;r++){if(void 0===a[e[r]])return!1;a=a[e[r]]}return!0}var n={};Object.assign(n,window.tapEnv),t.env=e,t.envHas=a})}(),!function(t){Tap(function(t){"use strict";function e(){}function a(t,e){for(var a=t.length;a--;)if(t[a].listener===e)return a;return-1}function n(t){return function(){return this[t].apply(this,arguments)}}function r(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&r(t.listener)}var o=e.prototype,i=t.EventEmitter;o.getListeners=function(t){var e,a=this._getEvents(),n={};for(e in a)a.hasOwnProperty(e)&&(t instanceof RegExp&&t.test(e)?n[e]=a[e]:t==e?n[e]=a[e]:t.substr(0,e.length+1)==e+"."&&(n[e]=a[e]));return n},o.flattenListeners=function(t){var e,a=[];for(e=0;e<t.length;e+=1)a.push(t[e].listener);return a},o.getListenersAsObject=function(t){var e,a=this.getListeners(t);return a instanceof Array&&(e={},e[t]=a),e||a},o.addListener=function(t,e){var a=this;if(!r(e))throw new TypeError("listener must be a function");if(t instanceof Array)return t.forEach(function(t){a.addListener(t,e)}),this;var n="object"==typeof e,o=this._getEvents(),i=o[t]||(o[t]=[]);return i.push(n?e:{listener:e,once:!1}),this},o.on=n("addListener"),o.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},o.once=n("addOnceListener"),o.defineEvent=function(t){return this.getListeners(t),this},o.defineEvents=function(t){for(var e=this,a=0;a<t.length;a+=1)e.defineEvent(t[a]);return this},o.removeListener=function(t,e){var n,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&(n=a(o[r],e),n!==-1&&o[r].splice(n,1));return this},o.off=n("removeListener"),o.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},o.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},o.manipulateListeners=function(t,e,a){var n,r,o=this,i=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=a.length;n--;)i.call(o,e,a[n]);else for(n in e)e.hasOwnProperty(n)&&(r=e[n])&&("function"==typeof r?i.call(o,n,r):s.call(o,n,r));return this},o.removeEvent=function(t){var e,a=typeof t,n=this._getEvents();if("string"===a)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},o.removeAllListeners=n("removeEvent"),o.emitEvent=function(t,e){var a=this;Tap.debug;var n,r,o,i,s,d=this.getListenersAsObject(t);for(i in d)if(d.hasOwnProperty(i))for(n=d[i].slice(0),o=0;o<n.length;o++)r=n[o],r.once===!0&&a.removeListener(t,r.listener),s=r.listener.apply(a,e||[]),s===a._getOnceReturnValue()&&a.removeListener(t,r.listener);return this},o.trigger=n("emitEvent"),o.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},o.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},o._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},o._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return t.EventEmitter=i,e},t.EventEmitter=e})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){var a=e.$,n=new e.EventEmitter;a(function(){n.emit("document.ready",document)}),t.dynamicTime&&n.on(["document.ready","ajax.end"],function(){t.dynamicTime.updatePage()}),t.IPC=n})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){var a=e.$,n=e.IPC;a.fn.tap=function(t,e){return t="tap-"+t,"undefined"!=typeof e?a(this).attr(t,arguments[1]):null===e&&a(this).removeAttr(t),a(this).attr(t)};var r={insert:["append","appendTo","replaceWith","prepend","prependTo","before","after","html"]};for(var o in r)!function(t){r[t].forEach(function(e){a.fn["old_"+e]=a.fn[e],a.fn[e]=function(){var r,o=Array.prototype.slice.call(arguments),i=o[0],s=!1;if("string"==typeof i&&/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/.test(i)&&/<[\w\W]+>\s*$/.test(i))try{r=a(i),s=!!(r&&r[0]&&r[0].nodeType)}catch(d){}s&&(o[0]=r);var c=a.fn["old_"+e].apply(this,o);return s&&n.emit("document."+t,o[0]),c}})}(o)})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t){var e=function(t){var a=this;if(a===window||a===Tap||"undefined"==typeof a){var n=Function.prototype.bind.apply(e,[null].concat([].slice.call(arguments)));return new n}t=t?t:location.href,this.rawURI=t;var r=this.parse(t);this.uri=(r.scheme?r.scheme+"://":"")+(r.host?r.host:"")+(r.path?r.path:""),this.queryParams=this.getQueryParams(),this.hashParams=this.getHashParams()};e.prototype.set=function(t,e){var a=this,n={};"object"==typeof t?n=t:n[t]=e;for(var r in n)n.hasOwnProperty(r)&&(null!==n[r]&&"undefined"!=typeof n[r]||"undefined"==typeof a.queryParams[r]?a.queryParams[r]=n[r]:delete a.queryParams[r]);return this},e.prototype.setHash=function(t,e){var a=this,n={};"object"==typeof t?n=t:n[t]=e;for(var r in n)n.hasOwnProperty(r)&&(a.hashParams[r]=n[r]);return this},e.prototype.get=function(t){return t?this.queryParams[t]:this.queryParams},e.prototype.getHash=function(t){return this.hashParams[t]},e.prototype.toString=function(){return this.setUriParams(this.queryParams,this.hashParams,this.uri)},e.prototype.getQueryParams=function(t){return t=t?t:this.rawURI,this.paramStringToObject(this.parse(t).query)},e.prototype.getHashParams=function(t){return t=t?t:this.rawURI,this.paramStringToObject(this.parse(t).hash)},e.prototype.setQueryParams=function(t,e){this.setUriParams(t,null,e)},e.prototype.setHashParams=function(t,e){this.setUriParams(null,t,e)},e.prototype.setUriParams=function(t,e,a){a=a?a:this.uri;var n=this.paramsToString(t),r=this.paramsToString(e),o=this.parse(a);return this.uri=(o.scheme?o.scheme+"://":"")+(o.host?o.host:"")+(o.path?o.path:"")+(n?"?"+n:"")+(r?"#"+r:"")},e.prototype.paramsToString=function(t){if("object"!=typeof t)return"";var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a]));return e.join("&")},e.prototype.paramStringToObject=function(t){if(!t)return{};for(var e={},a=t.toString().split("&"),n=0;n<a.length;n++){var r=a[n].split("="),o=r[0],i=null;r.length>=2&&(i=r.slice(1).join("=")),o=decodeURIComponent(o),i=decodeURIComponent((i+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}).replace(/\+/g,"%20")),e[o]=i}return e},e.prototype.parseCache={},e.prototype.parse=function(t){if(t=t?t:this.rawURI,this.parseCache[t])return this.parseCache[t];var e={},a=["uri","scheme","host","path","query","hash"],n=new RegExp(["(?:(\\w+):\\/\\/)?","([^\\/]+)?","(\\/[^#?]+)?","(?:\\?([^#]+))?","(?:#(.*))?"].join("")),r=n.exec(t);if(r)for(var o=0;o<r.length;o++)a[o]&&(e[a[o]]=r[o]);return this.parseCache[t]=e},e.prototype.pure=function(){return this.queryParams={},this.hashParams={},this},e.parse=function(t){return e.prototype.parse(t)},e.set=function(){return e.prototype.set.apply(e(),arguments)},e.get=function(){return e.prototype.get.apply(e(location.href),Array.prototype.slice.call(arguments))},e.setHash=function(){var t=new e(location.href);return t.setHash.apply(t,Array.prototype.slice.call(arguments)).redirect(),t},e.getHash=function(){return e.prototype.getHash.apply(e(location.href),Array.prototype.slice.call(arguments))},e.prototype.apply=function(t,e){history.pushState(t,e,this.toString())},e.prototype.redirect=function(){location.assign(this.toString())},t.URI=e})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t){if("object"==typeof t){var e="";for(var a in t)e+=a+":"+t[a]+"\n";t=e}var r='<div class="taptap-tip"><span class="message">'+t+"</span></div>",o=n(r);n("body").prepend(o),o.show(),setTimeout(function(){o.fadeOut(500)},2500)}var n=e.$,r=e.IPC;a.error=a,r.on("tip",function(t){var e=n(t).tap("msg");a.error(e)}),t.tip=a})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){var a=e.URI,n={"ajax.app.qmzs-download":"/ajax/app/{id}/qmzs-download","ajax.vote.index":"/ajax/vote","ajax.tag.hot_list":"/ajax/tag/hot-list","ajax.search.hot-keywords":"/ajax/search/hot-keywords","ajax.search.suggest-by-keyword":"/ajax/search/suggest-by-keyword","ajax.search.history":"/ajax/search/history","ajax.search.history.clear":"/ajax/search/history/clear","ajax.search.apps":"/ajax/search/apps","ajax.video.token":"/ajax/video/token","ajax.video.md5":"/ajax/video/by-md5","ajax.captcha.new":"/ajax/captcha","ajax.captcha.verify":"/ajax/captcha/verify","ajax.profile.mine":"/ajax/profile/mine","ajax.dispatch.remember":"/ajax/dispatch/remember","ajax.friend.request":"/ajax/friend/request","ajax.friend.accept":"/ajax/friend/accept","ajax.friend.reject":"/ajax/friend/reject","ajax.friend.delete":"/ajax/friend/delete","phone.send":"/phone/send","search.apps":"/search/apps","search.keywords":"/search/{kw}","app.detail":"/app/{id}","app.review":"/app/{id}/review","app.topic":"/app/{id}/topic","app.sem":"/appsem/{id}","topic.detail":"/topic/{id}","user.detail":"/user/{id}","user.collected":"/user/{id}/collected","user.follow":"/user/{id}/following","payment.orders":"/payment/orders",admin:"/admin",developer:"/developer","auth.logout":"/auth/logout","phone.login":"/auth/login","phone.register":"/auth/register","overseas.phone.login":"/auth/phone/login","overseas.phone.register":"/auth/phone/register","story.story":"/story/{id}"},r=function(t,e){if(r.has(t)){var a=n[t];if(e)for(var o in e)a=a.replace("{"+o+"}",e[o]);return a}throw new Error("not found route: "+t)};r.has=function(t){return!!n[t]},r.find=function(t){var e=a.parse(t).path;if(e)for(var r in n){if(n[r]===e)return r;var o=n[r].replace(/{id}/,"(\\d+)").replace(/{[\w-]+}/,"([^/]+)");if(o="^"+o+"$",new RegExp(o).test(e))return r}return null},r.getParams=function(t,e){void 0===t&&(t=location.href);var r=a.parse(t).path;if(r)for(var o in n){if(n[o]===r)return null;var i=void 0;if(i=e?n[o].replace(/{key}/,"(\\d+)").replace(/{[\w-]+}/,"([^/]+)"):n[o].replace(/{id}/,"(\\d+)").replace(/{[\w-]+}/,"([^/]+)"),i="^"+i+"$",new RegExp(i).test(r))return new RegExp(i).exec(r)[1]}return null},r.is=function(){for(var t=arguments,e=0;e<arguments.length;e++)if(r.find(location.href)===t[e])return!0;return!1},t.route=r})}(),!function(t){!function(t){Tap(function(e){e.cookie=t()})}(function(){function t(){for(var t=arguments,e=0,a={};e<arguments.length;e++){var n=t[e];for(var r in n)a[r]=n[r]}return a}function e(a){function n(e,r,o){var i,s=this;if("undefined"!=typeof document){if(arguments.length>1){if(o=t({path:"/"},n.defaults,o),"number"==typeof o.expires){var d=new Date;d.setMilliseconds(d.getMilliseconds()+864e5*o.expires),o.expires=d}o.expires=o.expires?o.expires.toUTCString():"";try{i=JSON.stringify(r),/^[\{\[]/.test(i)&&(r=i)}catch(c){}r=a.write?a.write(r,e):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)),e=e.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),e=e.replace(/[\(\)]/g,escape);var l="";for(var p in o)o[p]&&(l+="; "+p,o[p]!==!0&&(l+="="+o[p]));return document.cookie=e+"="+r+l}e||(i={});for(var u=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,h=0;h<u.length;h++){var v=u[h].split("="),m=v.slice(1).join("=");'"'===m.charAt(0)&&(m=m.slice(1,-1));try{var g=v[0].replace(f,decodeURIComponent);if(m=a.read?a.read(m,g):a(m,g)||m.replace(f,decodeURIComponent),s.json)try{m=JSON.parse(m)}catch(c){}if(e===g){i=m;break}e||(i[g]=m)}catch(c){}}return i}}return n.set=n,n.get=function(t){return n.call(n,t)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(e,a){n(e,"",t(a,{expires:-1}))},n.withConverter=e,n}return e(function(){})})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t){function e(){return parseInt(Date.now()/1e3)}t.debounce=function(t,a,n){var r,o,i,s,d;a||(a=300);var c=function(){var l=e()-s;l<a&&l>0?r=setTimeout(c,a-l):(r=null,n||(d=t.apply(i,o),r||(i=o=null)))};return function(){i=this,o=arguments,s=e();var l=n&&!r;return r||(r=setTimeout(c,a)),l&&(d=t.apply(i,o),i=o=null),d}}})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t,e,a,n){"function"==typeof e&&(n=a,a=e,e=null);var o="json",s={success:a,error:n,data:e,dataType:o,method:"GET"};return i.has(t)?s.route=t:s.url=t,r(s)}function n(t,e,a,n){"function"==typeof e&&(n=a,a=e,
e=null);var o="json",s={success:a,error:n,data:e,dataType:o,method:"POST"};return i.has(t)?s.route=t:s.url=t,r(s)}function r(t){!t.route&&i.find(t.url)&&(t.route=i.find(t.url));var e="";t.route&&(e="."+t.route.replace(/^ajax\./,""),t.url||(t.url=i(t.route)));var a=t.success,n=function(t){a&&a.apply(this,arguments);var n=["ajax.end"+e].concat(Array.prototype.slice.call(arguments));s.emit.apply(s,n),t.success===!1&&t.showTip&&t.errMsg&&(t.tip?d.error(t.tip):d.error(t.errMsg))};if(t.success=function(t){n(t)},"function"==typeof t.error){var r=t.error;return t.error=function(t){var a=t.responseJSON,n={showTip:!0};r.apply(this,[t,n]);var o=["ajax.end"+e].concat(Array.prototype.slice.call([a]));s.emit.apply(s,o),n.showTip&&a.errMsg&&d.error(a.errMsg)},o.ajax(t)}return t.error=function(t){n(t.responseJSON)},o.ajax(t)}var o=e.$,i=e.route,s=e.IPC,d=e.tip;r.get=a,r.post=n,t.ajax=r})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){function a(t){return t.test(navigator.userAgent)}function n(t){return d&&a(t)}function r(t){var e;for(e in c)if(e.toLowerCase()==t.toLowerCase())return c[e];for(e in l)if(e.toLowerCase()==t.toLowerCase())return l[e].test(navigator.userAgent);return null}function o(){for(var t in l)if(l[t].test(navigator.userAgent))return t;return null}function i(){for(var t in c)if(c[t]&&"mobile"!==t)return t;return null}var s=e.env,d=/(mobi|mzbrowser)/i.test(navigator.userAgent),c={mobile:d,web:!d,Android:n(/android/i),iOS:n(/iPhone|iPad|iPod/i),iPhone:n(/iPhone/i),iPad:n(/iPad/i),inApp:s("browser.inApp",!1)},l={wechat:/micromessenger/i,emulator:/qmzs$/,Sogou:/SE\s2\.X|SogouMobileBrowser/,explorer2345:/2345Explorer|2345chrome|Mb2345Browser/,LieBao:/LBBROWSER/,QQBrowser:/QQBrowser/,Baidu:/BIDUBrowser|baidubrowser|BaiduHD/,UC:/UBrowser|UCBrowser|UCWEB/,MIUIBrowser:/MiuiBrowser/,MobileQQ:/Mobile\/\w{5,}\sQQ\/(\d+[.\d]+)/,MobileBaidu:/baiduboxapp/,SamsungBrowser:/samsungbrowser/,Firefox:/Firefox/,Maxthon:/Maxthon/,se360:/360SE/,ee360:/360EE/,TheWorld:/TheWorld/,Weibo:/__weibo__/,NokiaBrowser:/NokiaBrowser/,Opera:/Opera|OPR\/(\d+[.\d]+)/,Edge:/Edge/,QQLive:/QQLive(HD)?Browser/,Letv:/LetvClient/,Youku:/Youku/,AndroidBrowser:/Android.*Mobile\sSafari|Android\/(\d[.\d]+)\sRelease\/(\d[.\d]+)\sBrowser\/AppleWebKit(\d[.\d]+)/i,IE:/Trident|MSIE/,touTiao:/NewsArticle/,Chrome:/Chrome|CriOS/,Safari:/Version[|\/]([\w.]+)(\s\w.+)?\s?Safari|like\sGecko\)\sMobile\/\w{3,}$/};t.browser={is:r,getBrowser:o,getPlatform:i}})}(),!function(t){Tap(function(t,e){function a(t,e,a){if(!s())return!1;if(window.localStorage.setItem(t,e),"undefined"!=typeof a){var n=Date.now()+60*a*1e3;window.localStorage.setItem("expire."+t,n)}}function n(t){return!!s()&&void 0!=r(t)}function r(t){if(s()){var e=window.localStorage.getItem("expire."+t);if(!(e&&e<Date.now()))return window.localStorage.getItem(t)}}function o(t){return!!s()&&window.localStorage.removeItem(t)}function i(){if(!window.localStorage)return!1;for(var t,e=0;t=window.localStorage.key(e++);)if("expire."==t.substr(0,7)){var a=window.localStorage.getItem(t);a<Date.now()&&(window.localStorage.removeItem(t),window.localStorage.removeItem(t.substr(7)))}return!0}function s(){return!!window.localStorage}var d=e.IPC;d.on("document.ready",function(){i()}),t.cache={has:n,get:r,set:a,forget:o,available:s,clearExpires:i}})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(){var t=$(".js-timeline-pattern"),e=["https://img.tapimg.com/market/images/2519fc6fd9140d2d324537267816bd3f.png","https://img.tapimg.com/market/images/8b80051cb083f3b11c3d784e459468ac.png","https://img.tapimg.com/market/images/2a3985f66c7ebc10f1a5699324e31d97.png"];t.each(function(t,a){var n=e.shift();$(a).find('img[data-taptap-image="lazyLoading"]:first').attr("data-src",n),e.push(n)})}t.indexTimeLine=a})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t){t||(t=document.body),n(t).find("[data-taptap-image='lazyLoading']").add(".lazy-load").not(".show").each(function(){var t=n(this);t.lazyload({data_attribute:"src",load:function(){t.addClass("show")}})})}var n=e.$,r=e.IPC,o=e.indexTimeLine;r.on(["document.ready","document.insert"],function(t){(n("#recList").length||n(".js-time-line").length)&&o(),a(t)}),t.lazyLoad=a})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t){return s("meta[property='"+t+"']").attr("content")||p[t]}function n(){d("https://www.facebook.com/dialog/share").set({app_id:a("fb:app_id"),display:"popup",href:a("og:url"),picture:a("og:image"),title:a("og:title"),description:a("og:description")}).redirect()}function r(){d("http://service.weibo.com/share/share.php").set({url:a("og:url"),image:a("og:image"),title:a("og:title")+"\n"+a("og:description")}).redirect()}function o(t){var e={title:a("og:title"),link:a("og:url"),imgUrl:a("og:image"),desc:a("og:description")},n=s("[data-taptap-weixin-sharing='image']").attr("src");n&&(e.imgUrl=n),e.imgUrl||(e.imgUrl=s("link[rel='apple-touch-icon'][sizes='152x152']").attr("href")),t.onMenuShareTimeline(e),t.onMenuShareAppMessage(e),t.onMenuShareQQ(e),t.onMenuShareWeibo(e),t.onMenuShareQZone(e)}function i(){d("https://connect.qq.com/widget/shareqq/index.html").set({url:a("og:url"),pics:a("og:image"),title:a("og:title"),summary:a("og:description")}).redirect()}var s=e.$,d=e.URI;for(var c in a){var l=s("meta[property='"+c+"']").attr("content");l&&(a=l)}var p={"fb:app_id":null,"og:url":location.href,"og:title":s("title").text(),"og:image":null,"og:description":s('meta[name="description"]').attr("content")},u={facebook:n,weibo:r,qq:i,wechat:o};s(document).on("click",".js-share",function(){var t=s(this).tap("type");u[t]&&u[t]()}),t.share=u})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(){o.wechat(i)}var n=e.IPC,r=e.ajax,o=e.share,i=window.wx||null;if(!i)return!1;var s=$("meta[name='wexinUrl']").attr("content");return!!s&&(n.on("document.ready",function(){r.post(s,function(t){i.config(t.data.config),i.ready(a)})}),void(t.wechat=i))})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){var a=e.route,n=e.ajax,r=e.IPC;n.get("ajax.profile.mine",function(t){t.success?r.emit("user.login",t.data):$("#navbar").find(".navbar-user > a").removeClass("dropdown-toggle").removeAttr("data-toggle")});var o=function(t){var e=$("#navbar").find(".navbar-user");e.find("a").attr("href","#"),e.find("img").attr("src",t.user.avatar);var n=e.find("#dashboard").val(),r=e.find("#my_following").val(),o=e.find("#my_collections").val(),i=e.find("#my_orders").val(),s=e.find("#developer_center").val(),d=e.find("#logout").val(),c=[{url:a("user.detail",{id:t.user.id}),text:n},{url:a("user.follow",{id:t.user.id}),text:r},{url:a("user.collected",{id:t.user.id}),text:o},{url:a("payment.orders"),text:i}];t.menu.admin_page&&c.push({url:a("admin"),text:"后台"}),t.menu.developer_center&&c.push({url:a("developer"),text:s}),c.push({url:a("auth.logout"),text:d});var l=c.map(function(t){return'<li><a href="'+t.url+'">'+t.text+"</a></li>"}).join(""),p=$("<ul>").addClass("dropdown-menu").append(l);e.append(p)};r.on("user.login",function(t){o(t),$("#navbar").find(".navbar-notice").removeClass("hide")})})}(),!function(t){!function(t,e){function a(){return t.ActiveXObject?new ActiveXObject("Microsoft.XMLHTTP"):t.XMLHttpRequest?new XMLHttpRequest:void 0}function n(t,e,n){this.uri_="https://"+e+"."+t+"/logstores/"+n+"/track?APIVersion=0.6.0",this.params_=[],this.httpRequest_=a()}n.prototype={push:function(t,e){t&&e&&(this.params_.push(t),this.params_.push(e))},logger:function(){for(var e=this,a=this.uri_,n=0;this.params_.length>0;)a+=n%2==0?"&"+encodeURIComponent(e.params_.shift()):"="+encodeURIComponent(e.params_.shift()),++n;try{this.httpRequest_.open("GET",a,!0),this.httpRequest_.send(null)}catch(r){t&&t.console&&"function"==typeof t.console.log}}},t.Tracker=n}(window,document)}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){function a(t){var e=this;this.params={ch:p,platform:l,paramUrl:c(location.href).pure().toString(),paramReferer:document.referrer},this.params.type=t,this.set=function(t,a){return e.params[t]=a,e},this.withSearch=function(){var t=i(),a=t.fromSearchPage,n=t.keyword;return a&&n&&e.set("referer","search").set("keyWord",n),e},this.done=function(){$(function(){var t=e.params,a=new window.Tracker("cn-beijing.log.aliyuncs.com","tap-snow","logs");for(var n in t)t.hasOwnProperty(n)&&"undefined"!=typeof t[n]&&a.push(n,t[n]);a.logger()})}}function n(t){return new a(t)}function r(){n("appDownloadNew").withSearch().done()}function o(){var t=n("pageView");d.is("app.detail")?t.withSearch().done():(d.is("topic.detail")||d.is("app.sem"))&&t.done()}function i(){var t=!1,e=null,a=new RegExp("^/search"),n=/developers/,r=document.referrer&&c.parse(document.referrer).path;if(r&&(t=a.test(r)&&!n.test(r)),t){var o=r.split("/");o.splice(0,2),e=o.join("/")}return{fromSearchPage:t,keyword:e}}var s=e.browser,d=e.route,c=e.URI,l=s.is("emulator")?"emulator":"web",p=function(t){return t.is("Android")?"Android":t.is("iOS")?"iOS":"PC"}(s),u={};u.ga={},u.ga.sendEvent=function(t,e){ga("send","event",t,e)},$(document).on("click",'[data-taptap-log="click"]',function(t){if($(this).data("had-log"))return!0;var e=i(),a=e.fromSearchPage,r=e.keyword;if(a&&r){var o=n("appButtonClick");o.withSearch().done(),$(this).data("had-log",!0)}}),$(document).on("click",'[data-taptap-log="toGame"]',function(t){if($(this).data("had-log"))return!0;var e=n("appRedirect");e.withSearch().done(),$(this).data("had-log",!0)}),$(document).on("click",'[data-taptap-log="toDownloadSite"]',function(t){if($(this).data("had-log"))return!0;var e=n("appDownloadSite");e.withSearch().done(),$(this).data("had-log",!0)}),$(document).on("click",".android-simulator",function(t){if($(this).data("had-log"))return!0;var e=$(this).tap("event");"PC"==p&&e&&(e.indexOf("mobile")!==-1?u.ga.sendEvent(e,"mobilePage"):e.indexOf("home")!==-1&&u.ga.sendEvent(e,"homePage"))});var f=function(t){var e=$(t).data("video-id"),a=$(t).data("subject-id"),n=$(t).data("subject-type"),r=$(t).data("position");return"video-play-log:"+e+":"+n+":"+a+":"+r},h=function(t){return!!$(t).data("loged")||!!window.sessionStorage&&window.sessionStorage.getItem(f(t))};setInterval(function(){$("video").each(function(){var t=$(this).data("video-id"),e=$(this).data("subject-id"),a=$(this).data("subject-type"),n=$(this).data("position");if(t&&e&&a&&n){var r=this.duration>5?5:this.duration;if(this.currentTime>r&&!h(this)){var o=$('meta[name="user_id"]').attr("content"),i=new window.Tracker("cn-beijing.log.aliyuncs.com","tap-snow","videos");i.push("paramId",t),i.push("paramType","videoDetail"),i.push("subjectId",e),i.push("subjectType",a),i.push("position",n),i.push("OS",s.getPlatform()),i.push("XUA","PN=webTap&LOC=CN&UID="+Tap.cookie.get("tapadid")+(o?"&VID="+o:"")),i.logger(),window.sessionStorage.setItem(f(this),!0),$(this).data("loged",!0)}}})},1e3),o(),u.log=n,u.logAppDownloadNew=r,t.tracker=u})}(),!function(t){Tap(function(t,e){function a(t){var e=t.target,a=t.url,d=t.group,c=t.name,l=t.remember,p=(t.method||"get").toLowerCase(),u="loader.cache."+a,f=t.callback;if(l&&i.has(u))return n(e).html(i.get(u)),!0;if(c&&/\./.test(c))throw new Error("[Error] Loader tap-name property cannot contains [.]");var h;return d&&(h=Math.random().toString(32).substr(2),s[d]=h),c&&r.emit("loader.loading."+c,t),o[p](a,function(a){!a.success||h&&s[d]!=h||(n(e).html(a.data.html),f&&f(a.data),l&&i.set(u,a.data.html,l)),c&&r.emit("loader.end."+c,t)})}var n=e.$,r=e.IPC,o=e.ajax,i=e.cache,s={};n(document).on("click",".js-loader",function(){function t(t){t.next&&e.tap("url",t.next)}var e=n(this),r=e.tap("target"),o=e.tap("url"),i=e.tap("group"),s=e.tap("name");i&&(n(i).not(this).removeClass("active"),e.addClass("active")),e.addClass("loading");var d=a({target:r,url:o,group:i,name:s,callback:t}),c=function(){e.removeClass("loading").addClass("end")};"boolean"==typeof d?c():d.always(c)}),t.loader=a})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t,e){i(t).data("old-value",i(t).val()),d.push([t,e])}function n(t,e,a){s.emit(t,e,a)}function r(t){for(var e=t.split(","),a={},n=0;n<e.length;n++){var r=e[n].replace(/:.*$/,"");r==e[n]&&(r=null);var o=e[n].replace(/^.*:/,"");r||(r=0==n?"click":e[n-1].replace(/:?.*$/,"")),a[r]||(a[r]=[]),a[r].push(o)}return a}function o(t){t.each(function(){var t=this,e=i(this);if(e.data("js-emit-band"))return!0;e.data("js-emit-band",!0);var o=e.tap("once"),s=e.tap("event"),d=r(s);for(var c in d)d.hasOwnProperty(c)&&"click"!=c&&d[c].forEach(function(r){"change"==c?a(t,function(){n(r,t)}):e.on(c,function(e){n(r,t,e)})});o&&e.removeClass("js-emit")})}var i=e.$,s=e.IPC,d=[];setInterval(function(){d.forEach(function(t){var e=t[0],a=t[1],n=i(e).data("old-value"),r=i(e).val();n!=r&&(a.call(e),i(e).data("old-value",r))})},50),i(document).on("click",".js-emit",function(t){var e=this,a=i(this),o=a.tap("once"),s=a.tap("event"),d=r(s);d.click&&d.click.forEach(function(a){n(a,e,t)}),o&&a.removeClass("js-emit")}),s.on(["document.ready","document.insert"],function(){o(i(".js-emit"))}),t.emit={bind:o}})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t,e){this.container=t,this.target=e,this.status="normal",this.threshold=t.tap("threshold")||100,this.showNotice=!!t.tap("notice"),this.init()}function n(){r(".js-scroll-loader").each(function(){var t=r(this),e=t.attr("tap-target");e||(e=document),new a(t,r(e))})}var r=e.$,o=e.IPC,i=e.ajax;a.prototype.init=function(){this.setStatus("normal"),this.target.on("scroll",this.scroll.bind(this))},a.prototype.scroll=function(){if("normal"!=this.getStatus())return!1;var t=this.target,e=this.container,a=this.target[0]==document,n=t.scrollTop(),r=!1;a&&(r=e.offset().top+e.outerHeight(!0)-n-window.screen.availHeight<this.threshold),r&&this.load()},a.prototype.load=function(){var t=this.container;this.setStatus("loading"),i.get(t.tap("url"),function(t){t.success?this.loadCompleted(t):this.setStatus("fail")}.bind(this))},a.prototype.loadCompleted=function(t){this.notice(),this.container.append(t.data.html),t.data.next?(this.container.tap("url",t.data.next),this.setStatus("normal")):this.setStatus("end")},a.prototype.setStatus=function(t){var e=this.container;switch(t){case"loading":e.removeClass("normal");break;case"normal":e.removeClass("loading");break;case"fail":e.removeClass("loading normal");break;case"end":e.removeClass("loading")}e.addClass(t),this.showNotice&&this.notice(t),this.status=t},a.prototype.notice=function(t){var e=this.container,a=this.target,n=function(e){return r('<div class="scroll-loader-status '+t+'">'+e+"</div>")};e.find(".scroll-loader-status").remove();var o;switch(t){case"loading":o=n('<img src="https://img.tapimg.com/market/images/0e6e0f46d7504242302bc8055ad9c8c2.gif" alt="loading" />');break;case"normal":break;case"fail":o=n("加载失败");break;case"end":o=n("没有了")}o&&(e.append(o),a.scrollTop(a.scrollTop()+o.outerHeight(!0)))},a.prototype.getStatus=function(){return this.status},o.on("document.ready",n),t.ScrollLoader=a})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){var a=e.ajax,n=e.tip;$(document).on("submit",".js-modal-form",function(t){var e=$(this);e.parents(".modal"),t.preventDefault(),t.returnValue=!1,a[this.method](this.action,$(this).serialize(),function(t){t.success?(n("操作成功！"),e.tap("reload")&&setTimeout(function(){location.reload()},e.tap("reload"))):n.error(t.errMsg||"操作失败!")})})})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){var a=e.$,n=e.ajax,r=e.IPC,o={};o.loadStatus=function(){var t=[],e=[],r=a(".taptap-button-opinion.vote-btn");r.each(function(){if(a(this).data("finish-load-status"))return!0;var t=a(this).data("obj"),n=a(this).data("id");e.indexOf(t+","+n)===-1&&e.push(t+","+n),a(this).data("finish-load-status",!0)}),e=e.sort();var i=0,s={};e.forEach(function(e){e=e.split(","),s[e[0]]||(s[e[0]]=[]),s[e[0]].push(e[1]),i++,50==i&&(t.push(s),s={},i=0)}),i>0&&t.push(s),t.forEach(function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e]=t[e].join("_"));n.get("ajax.vote.index",t,function(t){t.success&&t.data&&t.data.votes&&o.setStatus(t.data.votes)})})},o.setStatus=function(t){var e=a(".taptap-button-opinion.vote-btn");t.forEach(function(t){var a=e.filter(".vote-"+t.value+"[data-obj='"+t.obj_type+"'][data-id='"+t.obj_id+"']");a.addClass("active")})},r.on("user.login",function(){o.loadStatus(),r.on("document.insert",function(){o.loadStatus()})}),t.vote=o})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(){var t="taptap.search.history",e=O.get(t);if(!e)return!1;e=JSON.parse(e);var a=[],r=1497607200;e.forEach(function(t){a.push({keyword:t,time:r--})}),O.forget(t),a.length&&n(a)}function n(t,e,a){t||(t=f());var n=[];if(Object.keys(t).forEach(function(e){t[e]>1e3&&n.push({keyword:e,time:t[e]})}),n.length>5&&(n.sort(function(t,e){return t.time<e.time}),n=n.slice(0,5)),e||(e=function(){}),a||(a=function(){}),n.length||(n=null),k)T.post("ajax.search.history",{keywords:n},function(t){if(!t.success)return a(),!1;var n=[{},1e3,[]],r=n[0],o=n[1],i=n[2];t.data.list.forEach(function(t){i.push(t.keyword),r[t.keyword]=--o}),e(i),O.set(_,JSON.stringify(r))});else{var r=[];Object.keys(t).forEach(function(e){r.push({keyword:e,time:t[e]})}),r.sort(function(t,e){return t.time<e.time});var o=[];r.forEach(function(t){o.push(t.keyword)}),e(o),O.set(_,JSON.stringify(t))}}function r(){var t=b(".taptap-search"),e=t.find(".input input"),a=t.find(".supports .results");a.hide().html('<li class="loading"><img src="https://img.tapimg.com/market/images/0e6e0f46d7504242302bc8055ad9c8c2.gif" alt="loading"/></li>'),t.find(".supports").show(),t.show(),e.focus(),t.find(".clear-value").hide()}function o(){b(document).on("click touch",function(t){var e=b(t.target);return!(!e.hasClass("taptap-search")&&!e.parents(".taptap-search").size())||!(!e.hasClass("js-emit")||e.tap("event").indexOf("search.show")==-1)||!(!e.parents(".js-emit")||"search.show"!=e.parents(".js-emit").tap("event"))||!e.is(":visible")||e[0]==document||void i()}),b(document).on("click touch",".dropdown-toggle.img-circle",function(){i()})}function i(){b(".taptap-search").hide()}function s(){var t=b(".taptap-search .supports .history");t.hide(),u(function(e){if(e.length){t.show();var a=t.find(".list ul"),n="";e.forEach(function(t){n+='<li><a href="'+$("search.keywords",{kw:t})+'">'+t+'</a><button class="clear js-emit" tap-event="search.clear-history-keyword" tap-value="'+t+'" type="button"></button></li>'});var r=b(n);C.bind(r.find(".js-emit")),a.html(r)}else t.hide();d()})}function d(){var t=b(".taptap-search .supports .hot-word");t.hide(),c(function(e){if(e.length){t.show();var a=t.find(".list ul"),n="";e.forEach(function(t){n+='<li><a href="'+$("search.keywords",{kw:t.keyword})+'">'+t.keyword+"</a></li>"});var o=b(n);a.html(o)}else t.hide();r()})}function c(t){if(O.available()){var e=[],a=O.get(S);a?(e=JSON.parse(a),t(e)):m(t)}else m(t)}function l(t){var e=f();e[t]=parseInt(Date.now()/1e3),n(e)}function p(t){if("undefined"==typeof t)O.forget(_),k&&T.post("ajax.search.history.clear",{clear_all:1}),g=[],s();else{var e=f();e[t]&&(delete e[t],O.set(_,JSON.stringify(e))),k&&T.post("ajax.search.history.clear",{clear_all:0,keyword:t});var a=g.indexOf(t);a!==-1&&g.splice(a,1),g.length||(g=null),s()}}function u(t){var e=function(){var e=f(),a=[];for(var n in e)a.push([n,e[n]]);a.sort(function(t,e){return t[1]<e[1]});var r=[];a.forEach(function(t){r.push(t[0])}),g=r.slice(0,5),t(g)};g?t(g):k?n(null,function(e){g=e,t(g)},e):e()}function f(){var t=O.get(_);if(!t)return[];var e=JSON.parse(t),a=1497607200;for(var n in e)!isNaN(e[n])&&e[n]||(e[n]=a--);return e}function h(t){var e=x($("ajax.search.suggest-by-keyword")).set({kw:t(),format:"search-component"});y({target:".taptap-search .supports .results",url:e,name:"search-apps",method:"post"}),b(".taptap-search .clear-value").show()}function v(){var t=b(".taptap-search .supports"),e=t.find("section"),a=t.find(".results");e.not(a).hide(),a.removeClass("hide").show()}function m(t){T.get("ajax.search.hot-keywords",function(e){if(e.success){try{O.set(S,JSON.stringify(e.data.keywords),5)}catch(a){}t(e.data.keywords)}})}var g,b=e.$,w=e.IPC,y=e.loader,$=e.route,x=e.URI,j=e.debounce,C=e.emit,k=e.userId,T=e.ajax,O=e.cache,_="taptap.search.history:v2",S="taptap.hotword:v2";b(document).on("submit","#search",function(t){t.preventDefault(),window.location.href=$("search.keywords",{kw:encodeURI(b(this).find(".search-input").val())})}),w.on("document.ready",function(){a()}),$.is("search.keywords")&&w.on("document.ready",function(){var t=b("#search-keywords").data("keywords");l(t)}),o(),w.on("search.show",function(t){s();var e=function(){return b(t).val().replace(/\s/,function(t){return 32!=t.charCodeAt(0)?"":t})};e()&&h(e)}),w.on("search.hide",function(){i()}),w.on("search.clear-history",function(){p()}),w.on("search.clear-history-keyword",function(t){p(b(t).tap("value"))}),w.on("search.clear",function(){b(".taptap-search .input input").focus().val("")}),w.on("search.apps",j(function(t){var e=function(){return b(t).val().replace(/\s/,function(t){return 32!=t.charCodeAt(0)?"":t})};e()?h(e):s()},100)),w.on("search.keydown",function(t,e){var a=b(".taptap-search").find("section:visible").find("li"),n=a.filter(":visible"),r=n.filter(".active");n.each(function(t){a.eq(t).data("index",t)});var o,i,s=r.data("index");switch(r.size()&&(o=n.eq(s+1),i=n.eq(s-1)),o||(o=n.eq(0)),i||(i=n.last()),e.keyCode){case 38:a.removeClass("active"),i.addClass("active"),e.preventDefault?e.preventDefault():e.returnValue=!1;break;case 40:a.removeClass("active"),o.addClass("active"),e.preventDefault?e.preventDefault():e.returnValue=!1;break;case 13:r.size()&&(location.assign(r.find("a").attr("href")),e.preventDefault?e.preventDefault():e.returnValue=!1)}}),w.on("loader.loading.search-apps",function(){v()}),w.on("loader.end.search-apps",function(t){var e=x(t.url).get("kw");e=e.replace(/<.*>/,""),b(".taptap-search .supports .results li a").each(function(){var t=b(this).text(),a=new RegExp("("+e+")","gi");t=t.replace(a,"<em>$1</em>"),b(this).html(t)})}),t.search={show:r,hide:i,getHotWord:c}})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t){var e=new Image;e.src=t}var n=e.route,r=e.$,o=e.browser,i=e.IPC;r(document).on("click",".taptap-button-download > .btn",function(){var t=r(this).parent(".taptap-button-download").data("tracker-url");t&&a(t)}),i.on("document.ready",function(){if(!n.is("app.detail")&&!n.is("app.review")&&!n.is("app.topic"))return!1;var t=o.is("android")?"android":o.is("iOS")?"ios":null,e=r(".taptap-button-download[data-type='"+t+"']").data("tracker-url");t&&e&&a(e)})})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){var a=e.ajax,n=e.$;n(function(){var t=n("#rec-apps-form").attr("action"),e=n('[data-taptap-ajax-addRecApp="container"]'),r='<div class="loading"><img src="https://img.tapimg.com/market/images/0e6e0f46d7504242302bc8055ad9c8c2.gif" alt="loading">';n(document).on("submit.taptap.ajax.searchDevRecApps","[data-taptap-ajax='searchDevRecApps']",function(o){o.preventDefault(),e.empty(),e.append(r),a.get(t,n(this).serialize(),function(t){t.success&&t.data.html?(e.find(".loading").remove(),e.html(t.data.html)):e.html("<p>未搜索到结果</p>")})}),n(document).on("click.taptap.ajax.recAppContainer","[data-taptap-ajax='recAppContainer']",function(){e.empty(),e.append(r),a.get(t,null,function(t){t.success?(e.find(".loading").remove(),e.html(t.data.html)):e.html("<p>未搜索到结果</p>")}),n(".dev-apps-tab").data("container",n(this).attr("id")),n("input[name=rec_app_index]").val(n(this).data("index"))}),n(document).on("click.taptap.ajax.addRecApp","[data-taptap-ajax-addRecApp='container'] tr",function(){var t=this;n("[data-taptap-ajax-addRecApp='container'] tr").each(function(e,a){t===a?n(a).find("input[name=rec_app_id]").prop("checked",!0):n(a).find("input[name=rec_app_id]").prop("checked",!1)})}),n(document).on("click.taptap.ajax.recAppConfirm","[data-taptap-ajax='recAppConfirm']",function(){var t=n(".dev-apps-tab").data("container");a.get(n(".dev-apps-tab").data("url"),{developer_id:n("input[name=dev]").val(),rec_app_id:n("input[name=rec_app_id]:checked").val(),rec_app_index:n("input[name=rec_app_index]").val()},function(e){e.success?(n("#"+t+" img").attr("src",e.data.banner),n(".rec-app-"+e.data.sort+" .rec-app-detail > span").text(e.data.app_title),n(".rec-app-"+e.data.sort+" .rec-app-detail > p > span").text(e.data.rating_score),n(".rec-app-"+e.data.sort+" input").val(e.data.app_id),parseInt(e.data.rating_score)?n(".rec-app-"+e.data.sort+" .rec-app-detail > p > i").removeClass("hide").show():n(".rec-app-"+e.data.sort+" .rec-app-detail > p > i").removeClass("show").hide(),n(".rec-app-"+e.data.sort+" .rec-upload-tips").addClass("plus-hide").removeClass("plus-show"),n(".rec-app-"+e.data.sort+" .rec-app-detail").addClass("plus-show").removeClass("plus-hide"),n(".rec-app-"+e.data.sort+" .rec-app-tips").addClass("plus-hide").removeClass("plus-show"),n(".rec-app-"+e.data.sort+" .js-delete-rec-app").removeClass("hide").show()):Tap.tip(e.errMsg),n(".add-app-modal").modal("hide")})}),n(document).on("submit.taptap.submit.devRecAppSubmit","[data-taptap-submit='devRecAppSubmit']",function(t){var e=[];n(".add-rec-app").children("div").each(function(a,r){var o=n(r).find("input").val();o&&(e.indexOf(o)!==-1&&(Tap.tip("请勿重复添加游戏"),t.preventDefault()),e.push(n(r).find("input").val()))})}),n(document).on("click.taptap.btn.deleteDevRecApp","[data-taptap-btn='deleteDevRecApp']",function(t){t.preventDefault(),t.stopPropagation();var e=n(this);e.parent().find("input").val(""),e.parent().find(".rec-img-circle").attr("src","https://placeholdit.imgix.net/~text?txtsize=500&w=512&h=250"),e.removeClass("show").hide(),e.parent().find(".rec-upload-tips").addClass("plus-show").removeClass("plus-hide"),e.parent().find(".rec-app-detail").addClass("plus-hide").removeClass("plus-show"),e.parent().find(".rec-app-tips").addClass("plus-show").removeClass("plus-hide")})})})}(),!function(t){Tap(function(t,e){function a(t,e){var a=this,i=window.app;this.app=t,this.btn=e,this.log=function(){var t=Array.prototype.slice.call(arguments);t.unshift("zhushou: ")},this.btnStatus=function(t){a.log("btn status:",t);var n="";switch(t){case"installed":n="已安装";break;case"installing":n="安装中";break;case"normal":return n="安装",e.children("span").text(n),e.attr("disabled",!1),!1}e.children("span").text(n),e.attr("disabled","disabled")},this.jumpToTab=function(e){return!(!window.quanminUI||!window.quanminUI.jumpToTab||(window.quanminUI.jumpToTab(e,t.identifier),0))},this.logDownload=function(){l.logAppDownloadNew("appDownloadNew"),a.log("log: download")},this.btnClick=function(t){return t.stopPropagation(),t.preventDefault(),!e.is("[disabled]")&&void o.post(s("ajax.app.qmzs-download",{id:n().id}),function(t){if(t.success){a.btnStatus("installing");var e={packageName:t.data.identifier,apkUrl:t.data.download,md5:t.data.md5,iconUrl:t.data.icon,appName:t.data.name,emulatorId:100};a.log("installing: ",e),i.downInstallApk(e),a.logDownload(),a.jumpToTab(1)}else d.error(t.errMsg)})},this.appStatus=function(){var t=a.getAppStatus();a.log("status change:",t);var e="normal";null!==t&&t>0&&(t<11||31==t?e="installing":32==t&&(e="installed")),a.btnStatus(e)},this.appIsInstalled=function(){var e=i.getGameInstallList(t.identifier);return!!(e&&e instanceof Array&&e.length)},this.getAppStatus=function(){if(a.appIsInstalled())return 32;var e=i.getInstallationTasks(t.identifier);return e&&e[0]?e[e.length-1].status:null},this.downloadTapTap=function(){i.downInstallApk({apkUrl:"http://d.taptap.com/latest",iconUrl:r("link[rel='apple-touch-icon'][sizes='152x152']]").attr("href"),appName:"TapTap",emulatorId:100})},this.init=function(){e.attr("onclick",""),r(document).on("click",".taptap-button-download[data-type='android'] > a",a.btnClick),i.setInstallListener({onInstallStatusChange:function(e){e==t.identifier&&a.appStatus()},onDownloading:function(e){e==t.identifier&&a.btnStatus("installing")}});var n=a.getAppStatus();null!==n&&a.appStatus()},this.init()}function n(){var t=r(".taptap-button-download[data-type='android']");return{id:t.data("app-id"),identifier:"-"+t.data("app-identifier")}}var r=e.$,o=e.ajax,i=e.IPC,s=e.route,d=e.tip,c=e.cookie,l=e.tracker,p=s.is("app.detail")||s.is("app.review")||s.is("app.topic");return!!(navigator.userAgent.match(/qmzs$/)&&p&&window.app)&&(c.set("bottom_banner_hidden",!0),void i.on("document.ready",function(){var t=r(".taptap-button-download[data-type='android'] > a");return!t.hasClass("bought")&&void new a(n(),t)}))})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t,e){e||(e=300),a.timers[t]&&clearTimeout(a.timers[t]),a.timers[t]=setTimeout(t,e)}function n(t){function e(t){return a.element.find(t)}var a=this;n.instances[t]=this,this.element=d(t),this.linkToTagsList=[],this.statusChange=function(t){if("undefined"==typeof t&&(t=!0),!a.statusChangeFilter(this))return!1;if(this.checked?(d(this).parent().addClass("active"),"radio"==d(this).attr("type")&&e(".btn").not(d(this).parent()).removeClass("active")):d(this).parent().removeClass("active"),t){var n=d(this).val(),r=this.checked;a.linkToTagsList.forEach(function(t){t.toggleStatus(n,r,!1)}),a.element.trigger("change")}},this.append=function(t){var e='<label class="btn btn-sm btn-default" type="button" ><input type="checkbox" name="tag" value="'+t+'"/>'+t+"</label>",a=d(e);return a.find("input").on("change",this.statusChange),this.element.find(".tags-container").append(a),a},this.appendAndSelect=function(t){var e=this.find(t);return e.size()>0||this.append(t),this.toggleStatus(t,!0),this.expand(),this},this.toggleStatus=function(t,e,n){var r=this.find(t);if(!r||0==r.size())return!1;var o=r.is(":checked");if("undefined"==typeof e)e=!r.is(":checked");else if(o==e)return!1;r[0].checked=e,"undefined"==typeof n&&(n=!0),n?r.trigger("change"):a.statusChange.call(r[0],!1)},this.refresh=function(){var t;a.element.hasClass("expand")?t=e(".expand-btn").data("title-fold"):(e(".tags").height()>=e(".tags .tags-container").height()?a.element.removeClass("expandable"):a.element.addClass("expandable"),t=e(".expand-btn").data("title-expand")),e(".expand-btn").text(t),a.element.find("input").each(function(){a.statusChange.call(this,!1)})},this.resort=function(){a.element.find(".tags-container input:checked").each(function(){d(this).parent().prependTo(a.element.find(".tags-container"))})},this.shouldExpand=function(t){var a=this.element;return"undefined"!=typeof t?t.offset().top-a.find(".btn:first").offset().top>t.outerHeight(!0)*n.rows:e(".tags").height()<e(".tags .tags-container").height()},this.expandIfShould=function(t){return!!this.shouldExpand(t)&&(this.expand()||!0)},this.expand=function(){a.element.addClass("expand");var t=e(".expand-btn");t.text(t.data("title-fold"))},this.fold=function(){a.element.removeClass("expand");var t=e(".expand-btn");t.text(t.data("title-expand"))},this.getCheckedValues=function(){var t=[];return e("input:checked").each(function(){var e=d.trim(d(this).val());t.indexOf(e)==-1&&t.push(d.trim(d(this).val()))}),t},this.getCheckedValue=function(){var t=e("input:checked").val();return t?d.trim(t):null},this.getCheckedId=function(){var t=e("input:checked").data("id");return"undefined"==typeof t?null:t},this.getCheckedNumber=function(){return this.getCheckedValues().length},this.exists=function(t){return!!this.find(t).size()},this.find=function(t){return e("input[value='"+t+"']")},this.linkTo=function(t){return this.linkToTagsList.push(t),this},this.statusChangeFilter=function(){return!0},e("input").on("change",this.statusChange).each(function(){a.statusChange.call(this)}),e(".expand-btn").click(function(){a.element.hasClass("expand")?a.fold():a.expand()}),this.refresh()}function r(t){var e=this;this.element=d(t),this.tagsListCollection=[],this.setTagsListStatusChangeFilter=function(t){this.tagsListCollection.forEach(function(e){e.statusChangeFilter=t})},this.pushTagsList=function(t){
for(var e=arguments,a=this,n=0;n<arguments.length;n++)a.tagsListCollection.push(e[n]);return this},this.statusChecker=function(){return!0},this.showError=function(t){var e=this.element.find(".error-message").html(t);return this.element.find(".error").not(e).hide(),e.show(),!1},this.hideError=function(){this.element.find(".error").hide()},this.element.on("hidden.bs.modal",function(){d(this).find(".error").hide()}),this.element.on("shown.bs.modal",function(){e.tagsListCollection.forEach(function(t){t.refresh()})}),this.element.on("show.bs.modal",function(){e.tagsListCollection.forEach(function(t){t.resort()})})}function o(t){function e(t){return i.element.find(t)}r.call(this,t);var o="/ajax/tag/save",i=this;this.element=d(t),this.maxLength=3,this.maxLengthErrorMessage="最多可添加3个标签",this.addTagInputPlaceholder=this.element.find(".add-tag #tag-name").attr("placeholder"),this.showError=function(t){var a=this.element.find(".error-message").html(t);return this.element.find(".error").not(a).hide(),a.show(),e(".add-tag #tag-name").attr("placeholder",""),e(".add-tag .btn")[0].disabled=!0,e(".add-tag input")[0].disabled=!0,!1},this.hideError=function(){e(".add-tag #tag-name").attr("placeholder",this.addTagInputPlaceholder),e(".add-tag .btn")[0].disabled=!1,e(".add-tag input")[0].disabled=!1,e(".error").hide()},this.addTagNameToTagsList=function(t,e){if(t=d.trim(t),!t)return!1;i.usedTags.element.show();var a=n.get(e);return a.appendAndSelect(t),a.expandIfShould(),this.submitBtnOnClick(),!0},this.eventsBinder=function(){!function(t){t.find("#tag-name").on("keydown",function(e){if(13==e.keyCode)return i.addTagNameToTagsList(d(this).val(),t.data("add-to-tags")),d(this).val(""),e.preventDefault(),e.returnValue=!1,!1}),t.find(".btn").click(function(){i.addTagNameToTagsList(t.find("#tag-name").val(),t.data("add-to-tags")),t.find("#tag-name").val("")})}(e(".add-tag")),this.tagsListCollection.forEach(function(t){t.element.on("change",i.submitBtnOnClick.bind(i))}),this.element.on("show.bs.modal",function(){i.getCheckedValues().length>=i.maxLength&&i.showError(i.maxLengthErrorMessage),0==i.usedTags.element.find(".tags-container .btn").size()&&i.usedTags.element.hide()})},this.statusChecker=function(){return this.getCheckedValues().length<=this.maxLength},this.submitBtnOnClick=function(){try{var t=i.getCheckedValues(),e=d("#app_id").val();i.submit.call(i,e,t,i.submitOnSuccess.bind(i))}catch(a){i.showError(a.message)}},this.submit=function(t,e,n){if(!this.statusChecker())throw new Error(this.maxLengthErrorMessage);if(!t)throw new Error("AppId Empty!");this.hideError(),this.getCheckedValues().length==this.maxLength?this.showError(this.maxLengthErrorMessage):this.hideError(),a(function(){d.post(o,{tag:e,app_id:t},function(t){"object"==typeof t?1==t.success?n&&"function"==typeof n&&n(t):i.showError(t.errMsg):i.showError("保存失败：未知原因！")})})},this.submitOnSuccess=function(){},this.getCheckedValues=function(){var t=this.hotTags.getCheckedValues(),e=this.usedTags.getCheckedValues();return t.forEach(function(t){e.indexOf(t)==-1&&e.push(t)}),e},this.hotTags=new n("#game_others_tag"),this.usedTags=new n("#my_used_tags").linkTo(this.hotTags),this.hotTags.linkTo(this.usedTags),this.pushTagsList(this.hotTags,this.usedTags),this.setTagsListStatusChangeFilter(function(t){return!(t.checked&&i.getCheckedValues().length>i.maxLength&&(t.checked=!1,1))}),this.eventsBinder()}function i(t){function e(t){return a.element.find(t)}r.call(this,t);var a=this;this.eventBinder=function(){e("button[type='submit']").click(this.submitOnClick.bind(this)),this.element.on("hidden.bs.modal",function(){d(this).find("form")[0].reset()})},this.getReason=function(){var t=this.element.find(".report-reason .radio input:checked").val();return"undefined"==typeof t?null:t},this.getAddtionalReason=function(){var t=this.element.find(".report-reason .report-reason-text textarea").val();return t?t:null},this.submitOnClick=function(){var t=this.reportTags.getCheckedId(),n=this.getReason(),r=this.getAddtionalReason();if(null==t||null==n)return this.showError("请选择要举报的标签和举报理由！"),!0;var o={id:t,reason:n,device:"web",obj:this.element.data("obj"),addtional_reason_common:r},i=e('button[type="submit"]');i.button("loading"),d.post(this.element.data("report-url"),o,function(t){i.button("reset"),"object"==typeof t&&t.success?a.element.modal("hide"):t.errMsg?a.showError(t.errMsg):a.showError("投诉失败：未知原因！")})},this.reportTags=new n("#report_tags"),this.pushTagsList(this.reportTags),this.eventBinder()}function s(t,e){var a=this;this.element=d(t),this.addedTags=e,this.element.on("show.bs.modal",function(){var t="function"==typeof a.addedTags?a.addedTags():a.addedTags;a.element.find(".added-tags .btn").remove(),a.element.find(".added-tags > span").remove(),t.length?(a.element.find(".modal-footer > .btn-primary").text("编辑"),a.element.find(".added-tags").append("<span>已添加</span>")):a.element.find(".modal-footer > .btn-primary").text("添加标签"),t.forEach(function(t){a.element.find(".added-tags").append('<label class="btn btn-sm btn-default active" type="button">'+t+"</label>")})})}var d=e.$;a.timers={},n.instances={},n.rows=2,n.get=function(t){return n.instances[t]};var c=new o("#tagAddModal");new i("#tagReportModal"),new s("#tagListModal",function(){return c.getCheckedValues()}),t.tag={tagListModal:s,tagAddModal:o,tagReportModal:i}})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){var a=e.$,n=e.ajax;a(document).on("click",".tap-up-down",function(){a(this).addClass("active").siblings(".tap-up-down").removeClass("active"),a('input[name="value"]').val(a(this).attr("data-value"))}),a(document).on("click",".tap-debate-icon",function(){var t=a(this).attr("data-tap-debate-icon");a(".tap-up-down[data-value="+t+"]").addClass("active").siblings(".tap-up-down").removeClass("active")}),a(document).on("click",'button[data-tap-debate="post"]',function(t){t.preventDefault();var e=a('form[data-tap-debate="post"]'),r=e.attr("action"),o=a('input[name="id"]').val(),i={value:a('input[name="value"]').val(),contents:a('textarea[name="contents"]').val()};if(!i.contents)return a('.modal-body-warning[data-taptap-debate="error"]').show().find("p").eq(0).html("添点内容吧");""!==o?i.id=o:i.app_id=a('input[name="app_id"]').val();var s=a(this).button("loading");n.post(r,i,function(t){s.button("reset"),t.success?location.reload():a('.modal-body-warning[data-taptap-debate="error"]').show().find("p").eq(0).html("*"+t.errMsg)})})})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){function a(t,e){void 0===e&&(e=""),"object"==typeof e&&(e=JSON.stringify(e)),window.TapTapAPI[t]?window.TapTapAPI[t](e):window.TapTapAPI(t,e)}a.has=function(t){return!!window.TapTapAPI[t]},t.clientApi=a})}(),!function(t){Tap(function(t,e){function a(){var t=$("#image-captcha");if(!t)return!1;var e=new Image;e.src=i(o.url).set("hash",Math.random().toString().replace(".","")),t.find(".captcha img").remove(),t.find(".captcha").append(e)}function n(t,e){o=t;var n=$("#image-captcha");return!!n&&(n.find(".code").val(""),n.modal("show"),r=e,void a())}var r,o,i=e.URI,s=e.IPC;$(document).on("click","#image-captcha .btn.enter",function(){var t=$("#image-captcha"),e=o.key,a=t.find(".code").val();ajax.post("ajax.captcha.verify",{captcha:a,captcha_key:e},function(n){n.success&&(r(e,a),t.modal("hide"))})}),$(document).on("click","#image-captcha .captcha.image",function(){a()}),s.on("document.ready",function(){var t=$("#image-captcha");return!!t&&(t.on("shown.bs.modal",function(){t.find(".code").focus()}),void t.find(".code").on("keydown",function(e){13===e.keyCode&&t.find(".btn.enter").click()}))}),t.captcha=n})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){var a,n=e.ajax,r=e.route,o=e.captcha,i=e.IPC;$(document).on("click",".get-phone-captcha",function(){function t(){function t(){var t=i.data("seconds");u.find(".code-tip").show(),t>0?(i.data("seconds",t-1),p.length?i.text(f):i.text("已发送("+t+")"),u.find(".code-tip").not('[data-taptap-has-send="true"]').hide(),p.find("#count").text(t)):(p.length?i.text(f):i.text("重新发送"),i.data("sent",!1),u.find(".code-tip").not('[data-taptap-has-send="false"]').hide())}return a?clearInterval(a):"",(!p.length||(l||p.modal("show"),!p.data("count")))&&(t(),void(a=setInterval(t,1e3)))}function e(t){$(".error-tip").html(t),$(".error").show()}function o(a,r){p.length&&r&&p.find(".send-loading:first").show(),n({url:h,method:"post",data:a,success:function(a){p.length&&r&&p.find(".send-loading:first").hide(),a.success?(i.data("phone",c),i.data("sent",!0),i.data("seconds",a.data.retry_after),t()):e(a.errMsg)}})}var i=$(this),s=i.parents(".phone-captcha-form"),d=s.find('[name="country_code"]').val()||"86",c=s.find('input[name="phone"]').val(),l=i.parents(".phone-captcha-modal").length,p=$("#phoneCaptcha"),u=p.find(".modal-footer:first"),f=i.text();if(c&&!/^\+/.test(c)&&d&&(c="+"+d+c),!c&&s.find('input[name="phone"]').size())return!1;var h=i.tap("url")||r("phone.send");return c!==i.data("phone")?o({phone:c,action:i.tap("action")}):($(document).on("click","#send-again",function(){return p.find("input").val(""),p.find("input:first").focus(),i.off("click"),o({phone:c,action:i.tap("action")},!0)}),$(this).data("sent")?!(!p.length||l)&&(p.find("#phone-number").text(c),p.modal("show")):void o({phone:c,action:i.tap("action")}))}),$(document).on("submit",".phone-captcha-form",function(t){var e=$(this).tap("ajax");if("undefined"==typeof e)return!0;t.preventDefault(),t.returnValue=!1;var a=$(this),r=a.find('[name="country_code"]').val()||"86",o=a.find('input[name="phone"]').val();if(o&&!/^\+/.test(o)&&r&&(o="+"+r+o),!o)return!1;var i=a.find('input[name="code"]').val();n.post($(this).attr("action"),{country_code:r,phone:o,code:i},function(t){t.success&&location.reload()})}),i.on("document.ready",function(){function t(){var t=[];if(a.each(function(){var e=$(this).val();return!!$.trim(e)&&void t.push(e)}),6!==t.join("").length)return a.removeClass("error"),e.find(".modal-content div.error").fadeOut(2e3),!1;if(t.length!==a.length)return a.removeClass("error"),e.find(".modal-content div.error").fadeOut(2e3),!1;var r=$(".phone-captcha-form"),i=r.find('input[name="phone"]').val(),s=r.find('[name="country_code"]').val()||"86";return o=t.join(""),!(!i||!s)&&(e.find(".loading:first").show(),void n.post(r.attr("action"),{country_code:s,phone:i,code:o},function(t){e.find(".loading:first").hide(),t.success?t.hasOwnProperty("data")?location.assign(t.data.to):location.reload():(a.addClass("error"),e.find(".modal-content div.error").text(t.errMsg).show())}))}var e=$("#phoneCaptcha"),a=e.find("input");return!!e&&(e.on("hidden.bs.modal",function(){e.find("input").val(""),a.removeClass("error"),e.find(".modal-content div.error").fadeOut(400)}),e.on("shown.bs.modal",function(){e.find("input:first").focus();var t=$(".phone-captcha-form").find('input[name="phone"]').val();if(/^\+/.test(t))e.find("#phone-number").text(t);else{var a=$(".phone-captcha-form").find('[name="country_code"]').val()||86;e.find("#phone-number").text("+"+a+t)}}),void e.on("keyup","input",function(n){var r=$(this);return 8===n.keyCode||""===r.val()?(a.removeClass("error"),e.find(".modal-content div.error").fadeOut(400),r.val("").prev().focus()):(39!==n.keyCode&&37!==n.keyCode&&t(),37===n.keyCode?r.prev().focus():39===n.keyCode?r.next().focus():46===n.keyCode?r.val("").prev().focus():void r.next().focus())}))})})}(),!function(t){Tap(function(t,e){Question=function(){$(function(){function t(){return $(r).modal("show"),$(o).unbind("click").on("click",function(){return ga("send","event","ExamChoose","Pass",""),$(r).modal("hide"),$(d).modal("show")})}function e(){return $(r).modal("show"),$(o).unbind("click").on("click",function(){return ga("send","event","ExamChoose","Pass",""),$(r).modal("hide"),$(p).modal("show")})}function a(t,e){var a;return a=$(t).attr("href"),e.preventDefault(),$(r).modal("show"),$(o).unbind("click").on("click",function(){return ga("send","event","ExamChoose","Pass",""),$(r).modal("hide"),location.href=a})}function n(t){return $(r).modal("show"),$(o).unbind("click").on("click",function(){return ga("send","event","ExamChoose","Pass",""),$(r).modal("hide"),$(t).removeClass("js-exam-box-text")})}if($(document.body).hasClass("should-exam")){var r,o;r="#questionSwitchModal",o="#question-return";var i=$(".js-exam-box"),s=i.clone(),d=s.data("target");s.removeAttr("data-target"),i.replaceWith(s);var c=$(".js-exam-box-stars"),l=c.clone(),p=l.find("i").data("target");l.find("i").removeAttr("data-target"),c.replaceWith(l),$(document).on("click",".js-exam-box",function(e){return ga("send","event","ExamChoose","Choose",""),t(this,e)}),$(document).on("click",".js-exam-box-stars",function(t){return ga("send","event","ExamChoose","Choose",""),e(this,t)}),$(document).on("click",".js-exam-box-a",function(t){return ga("send","event","ExamChoose","Choose",""),a(this,t)}),$(document).on("click",".js-exam-box-text",function(t){return ga("send","event","ExamChoose","Choose",""),n(this,t)})}})},t.Question=Question})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){function a(t,e){r.get("/ajax/app/"+t+"/buttons-status"+window.location.search,function(t){e(t)})}var n=e.$,r=e.ajax,o=e.route,i=e.IPC,s=e.tag,d=e.tip,c=e.URI,l=e.Question,p=e.browser,u=e.userId;n(document).on("click.review",'[data-taptap-review-admin-collapse="confirm"]',function(){var t=n(this).data("url");r.post(t,function(t){t.success&&d("操作成功，请刷新页面")})}),n(document).on("click.review",".collapsed-yes",function(){var t=n(this).data("url"),e=n(this).data("type"),a=n(this).data("collapse-url"),o=n("#foldModal");o.modal("show"),r.get(a,function(t){t.success&&t.data.collapsed&&(n("#foldModal .fold-note").text("注意：该评价曾经被折叠过！"),n("#foldModal .fold-note").show())}),n("#foldModal form").attr("action",t),n(".button-type").val(e)}),n(document).on("click","#foldModal .btn-primary",function(t){var e=this,a=n("#foldModal form").attr("action");t.preventDefault();var o=n("#foldModal form").serializeArray(),i={};if(n(o).each(function(){i[this.name]=this.value}),"undefined"==typeof i.reason)n(".note").text("请选择折叠原因！").show();else{var s=n(this).button("loading");s.attr("disabled","disabled"),r.post(a,o,function(t){if(t.success){n("#foldModal").modal("hide"),d("操作成功，请刷新页面");var a=n(e).button("reset");a.attr("disabled",""),n(".note").hide()}})}}),n(document).on("click.taptap.hidden.confirm","[data-taptap-down='confirm']",function(t){t.preventDefault(),n("#hiddenModal").modal("show"),n("[data-taptap-ajax='down']").data("url",n(this).data("url"))}),n(document).on("click.taptap.hidden.confirm","[data-taptap-un-down='confirm']",function(t){t.preventDefault(),n("#unHiddenModal").modal("show"),n("[data-taptap-ajax='down']").data("url",n(this).data("url"))}),n(document).on("click.review",'[data-taptap-review-down="confirm"],[data-taptap-review-undown="confirm"]',function(){var t=n(this),e=t.data("url"),a=n("#hiddenModal"),o=a.find(".modal-body p"),i=o.html(),s=n.trim(t.html());o.html("是否确定"+s+"?"),a.find(".btn-primary").attr("data-taptap-ajax",""),a.modal("show"),a.find(".btn-primary").on("click",function(t){var o=n(this).button("loading");r.post(e,function(t){o.button("reset"),t.success&&a.modal("hide")})}),a.on("hidden.bs.modal",function(){o.html(i),a.find(".btn-primary").attr("data-taptap-ajax","hidden"),a.find(".btn-primary").off("click")})}),n(document).on("click.review",'[data-taptap-review-close="confirm"],[data-taptap-review-open="confirm"]',function(){var t=n(this),e=t.data("url"),a=n("#hiddenModal"),o=a.find(".modal-body p"),i=o.html(),s=n.trim(t.html());o.html("是否确定"+s+"?"),a.find(".btn-primary").attr("data-taptap-ajax",""),a.modal("show"),a.find(".btn-primary").on("click",function(t){var o=n(this).button("loading");r.post(e,function(t){if(o.button("reset"),t.success){var r=t.data.id,i=n("#review-"+r),s=n("#review-detail-reply-button"),d=n("#review-"+r+"-reply-button"),c=i.find(".taptap-comment-item").length;if(e.indexOf("review/close")!==-1)i.find(".open").removeClass("open").addClass("closed"),s.length&&(s.attr({"data-taptap-comment":"","data-toggle":"tooltip","data-original-title":"回复已关闭"}),n('[data-toggle="tooltip"]').tooltip()),s.length||c||(d.attr({"data-taptap-comment":""}),d.find(".normal-text").attr({"data-toggle":"tooltip","data-original-title":"回复已关闭"}),n('[data-toggle="tooltip"]').tooltip());else{if(e.indexOf("review/open")===-1)return!1;i.find(".closed").removeClass("closed").addClass("open"),s.length&&s.attr({"data-taptap-comment":"button","data-toggle":"","data-original-title":""}),s.length||c||(d.attr({"data-taptap-comment":"button","data-object":"review","data-obj-id":r}),d.find(".normal-text").attr({"data-toggle":"","data-original-title":""}))}n("#review-"+r+"-comment-control").html(t.data.html),n("#reply-"+r+"-button").html(t.data.html_tip),a.modal("hide")}})}),a.on("hidden.bs.modal",function(){o.html(i),a.find(".btn-primary").attr("data-taptap-ajax","hidden"),a.find(".btn-primary").off("click")})}),i.on("user.login",function(){if(o.is("app.detail","app.review","app.topic")){if(n("body").hasClass("error-page"))return!1;var t=o.getParams();if(t){var e=function(t){for(var e in t.data)t.data.hasOwnProperty(e)&&("tagPageSide"==e?n("#"+e).html(t.data[e]):n("#"+e).replaceWith(t.data[e]));new s.tagReportModal("#tagReportModal");var a=new s.tagAddModal("#tagAddModal");new s.tagListModal("#tagListModal",function(){return a.getCheckedValues()})},a=function(t){var e=t.data.review_id,a=n("#review-"+t.data.review_id),r=n("body");r.append(t.data.review_modal),e?(n(".taptap-review-add").remove(),c.get("page")&&1!=c.get("page")||(a.length?a.index()&&(a.remove(),n("#reviewsList").prepend(t.data.html)):n("#reviewsList").prepend(t.data.html)),window.dynamicTime.updatePage(),n('[data-toggle="tooltip"]').tooltip()):n(".taptap-review-add").replaceWith(t.data.review_add),l()},i=function(t){var e=t.data.follow;e&&n(".btn.taptap-button-friendship").replaceWith(e)},d=function(e){return new Promise(function(a,n){r.get("/ajax/app/"+t+"/"+e,function(t){a(t)}).error(function(t){n(t)})})},p=["app-tags","user-review","user-follow"],u=[e,a,i];promises=p.map(function(t){return d(t)}),Promise.all(promises).then(function(t){t.map(function(t,e){t.success&&u[e](t)})})["catch"](function(t){return!1})}}}),i.on("user.login",function(){var t=n(".taptap-button-download[data-type]");if(t.length){t.find("button").attr("disabled",!0);var e=t.data("app-id")||t.find("button").attr("id"),r=function(t){$app_block=n("#app_block"),$app_block.length?$app_block.replaceWith(t.data.block):n(".header-text-download:first").append(t.data.block),delete t.data.block;var e=t.data.modal;for(var a in e)e.hasOwnProperty(a)&&e[a]&&(0===n("#"+a).size()?n("body").append(e[a]):n("#"+a).replaceWith(e[a]));delete t.data.modal;for(var r in t.data)t.data.hasOwnProperty(r)&&n('.taptap-button-download[data-type="'+r+'"]').replaceWith(t.data[r]);n(".taptap-button-download button").attr("disabled",!1)};a(e,r)}}),n(document).on("click",".password-toggle",function(){var t=n(this),e=t.siblings("input:first"),a=e.attr("type");"password"==a?e.attr("type","text"):e.attr("type","password"),t.toggleClass("active")}),n(function(){if(o.is("phone.login","phone.register","overseas.phone.login","overseas.phone.register")){var t=n(".auth-main-body form [name='country_code']");t.on("change",function(){n(".auth-main-body form input:visible").keyup()}),n(".auth-main-body form input:visible").on("keyup.form,paste.form,input propertychange",function(e){e.preventDefault();var a=n(this),r=a.parents("form:first"),o=r.find("input:not(:hidden)"),i=n(this).val();a.siblings(".password-toggle:first").toggle(!!i),n(".error").hide();var s=t.val();if("phone"==a.attr("name")){var d=/^1[^12]\d\d{8}$/;if(s&&86!=s&&(d=/^\d{6,12}$/),!d.test(a.val()))return r.find("button:first").attr("disabled",!0),!1}var c=[];return o.each(function(){n(this).val()&&c.push(n(this).val())}),c.length!==o.length?(r.find("button:first").attr("disabled",!0),!1):(13==e.keyCode&&n("#phoneCaptcha").length&&r.find("button:first").click(),void r.find("button:first").removeAttr("disabled"))}),n(".auth-main-body").length&&n(window).keydown(function(t){if(13==t.keyCode)return t.preventDefault(),!1})}}),n(document).on("click","[data-taptap-click]",function(t){t.stopPropagation();var e=n(this).data("url");return!!e&&void location.assign(e)}),n(document).on("click.taptap.app.uploadImage","[data-taptap-app-image='upload']",function(){var t,e,a,r;return t=n(this),a=t.parents("[data-taptap-app-image='container']"),r=t.data("target"),e=t.data("info")?1:0,t.fileupload({dataType:"json",formData:{get_info:e},done:function(t,e){if(n(".upload-image-text").hide(),n(".upload-image-text-re").show(),n("#upload-image-error").hide(),1===e.result.status){var r=e.result.image_link;n(this).data("video-url",r),a.css("background-image","url("+r+")"),a.data("has-upload",!0),n('input[name="video-thumb"]')?n(document).find('input[name="video-thumb"]').replaceWith('<input name="video-thumb" type="hidden" value="'+r+'">'):n(document).find("form").append('<input name="video-thumb" type="hidden" value="'+r+'">')}},error:function(){n("#upload-image-error").show(),n("#upload-image-error").html("上传失败,请重新上传")}})}),n(function(){setTimeout(function(){if(n(".first-topic-video-tip").length>0&&!p.is("mobile")){var t;if(t=window.cookie.get("first-topic-video"),!t)return n("#first-topic-video").show()}},1500)}),n(document).on("click","[data-preorder-qrcode]",function(){var t=n(this),e=n("#preOrderModal");if(e.length){var a=e.find("#qrcode-box");a.html("");var r={width:a.width(),height:a.height(),correctLevel:2,text:t.data("qrcode-url"),foreground:"#14B9C8"},o='<img src="'+t.data("qrcode-logo")+'" class="qrcode-img" />',i=t.data("qrcode-title");return a.qrcode(r),a.append(o),e.find("#app-name").text(i),e.modal("show"),!1}});var f=function(){};f.prototype.bindClick=function(){var t="[data-taptap-card-app]",e=n(t);n(document).off("click.seo",t);var a=this;return!!e.length&&void n(document).on("click.seo",t,function(){var t=n(this),e=t.data("taptap-card-app"),r=t.data("tap-url"),o=t.data("taptap-apk"),i=t.data("taptap-app-title"),s=t.data("taptap-app-id"),d=t.data("taptap-app-icon");return e.indexOf("#")!==-1&&(f.initModal(e,o,i,s,d),void(r&&p.is("android")&&a.openApp(r)))})},f.initModal=function(t,e,a,r,o){n(t).find(".modal-header p").hide(),$qr_code=n(t+" .download-div"),n(t).find("#download-a").attr({"data-id":r}),n(t).find(".modal-body-taptap h4").html(a),n(t).find(".body-images-app .app-title").html(a);var i=n(t).find(".modal-footer form");i.length?i.attr("action",e):n(t).find("#download-a").attr("href",e),n(t).find("#download-div").attr("data-url",e);var s=n(t).find(".body-images-app img");s.length&&s.attr("src",o),$qr_code.attr("data-url",e),$qr_code.length&&($qr_code.html(),$qr_code.find("canvas").remove(),$qr_code.qrcode({width:$qr_code.data("size"),height:$qr_code.data("size"),text:e,foreground:"#000",correctLevel:2})),n(t).modal("show")},f.prototype.openApp=function(t){try{ifr=n("<iframe/>"),ifr.attr("src",t).css("display","none"),n("body").append(ifr)}catch(e){}},n(document).on("click",".label-video-id",function(){var t=n(this).data("id"),e=n(this).data("poster"),a=c("https://www.taptap.com/video/"+t+"/embed");e&&a.set("thumb",e),window.prompt("请复制内嵌视频地址",a)});var h=function(){n(".topic-video video").each(function(){var t=n(this).parent();if(!(t.find("span.label-video-id").length>0)){var e=n(this).attr("poster");e&&(e=c(e).pure());var a=n(this).data("video-id"),r=n('<span class="label-video-id" data-poster="'+e+'" data-id="'+a+'" style="cursor: default;position: absolute;bottom:0;right:0;color: white;font-size: 12px;padding: 0 6px;opacity: .5;text-shadow: 0 0 1px black;">#'+a+"</span>");t.append(r)}})};i.on(["document.ready","document.insert"],function(){var t=new f;t.bindClick(),p.is("web")&&[633175,33].indexOf(u)!==-1&&h()}),o.is("topic.detail")&&n(document).on("click",".app-text-buttons .btn",function(){var t=n(this).data("type"),e="PC";if(p.is("android")&&(e="Android"),p.is("iOS")&&(e="iOS"),t&&"group"===t)try{ga("send","event","Topic","App",e)}catch(a){}else try{ga("send","event","Topic","Tap",e)}catch(a){}}),o.is("story.story")&&i.on("user.login",function(t){}),n(document).on("click.admin.developer","[data-taptap-select-all]",function(){var t=n(this).prop("checked");return n("input[name='"+n(this).attr("name")+"']").each(function(){return n(this).prop("checked",t)})}),n(document).on("click",".js-toggle-btn",function(){var t=n(this).closest(".js-toggle-wrap").find(".js-toggle-content");t.slideToggle(),n(this).find(".expand, .collapse").toggle()}),n(document).on("click.taptap.select","#select-country-code ul li:not(.letter-order)",function(){var t=n(this),e=t.closest("#select-country-code"),a=e.find("a"),r=e.find("input");r.val(t.data("value")),a.find(".text").text(t.data("en-name")+"+"+t.data("value")),e.find("li").removeClass("selected"),t.addClass("selected")}),n(document).on("click",".reserve-milestone-add a",function(){if(!(n(".reserve-milestone-item").size()>4)){var t=n(".reserve-milestone-list .reserve-milestone-item:first-child").clone(),e=t.find("img"),a=t.find('input[name="image"]'),r=t.find('input[type="hidden"]'),o=Date.now()+""+Math.floor(100*Math.random());t.find("input").val(""),e.attr("src",e.data("default-src")),e.attr("id","bonus-icon"+o),r.attr("id","bonus-icon-input"+o),a.attr("data-target","#bonus-icon"+o),a.attr("data-target-input","#bonus-icon-input"+o),n(".reserve-milestone-list").append(t),n(".reserve-milestone-item .remove-milestone").removeAttr("disabled"),n(".reserve-milestone-item").size()>4&&n(".reserve-milestone-add").hide()}}),n(document).on("click",".reserve-milestone-item .remove-milestone",function(){var t=n(this).parent(".reserve-milestone-item"),e=t.siblings(".reserve-milestone-item");0!==e.size()&&(t.remove(),1===e.size()&&n(".reserve-milestone-item .remove-milestone").attr("disabled","disabled"),n(".reserve-milestone-add").show())}),n(document).on("click",".third-account-btn",function(){n(".third-account-wrapper").toggleClass("account-show"),n(this).toggleClass("third-account-btn-show")}),n(document).on("click","#select-country-code .btn",function(){var t=n("#select-country-code .dropdown-menu"),e=t.find(".selected");t.scrollTop(e.offset().top-t.offset().top+t.scrollTop())}),n(document).on("click",".reserve-milestone-container .glyphicon-menu-up",function(){n(".reserve-milestone-container").removeClass("show")}),n(document).on("click",".reserve-milestone-container .glyphicon-menu-down",function(){n(".reserve-milestone-container").addClass("show")}),n(document).on("click","[data-history-manage]",function(){var t=n(n(this).data("history-manage")),e=n("[data-history-manage]");e.hasClass("hide")&&e.toggleClass("hide"),t.toggleClass("editing")}),n(document).on("click","[data-group-history] [data-group-delete]",function(t){t.preventDefault();var e=n(this).closest("[data-group-history]");e.hide();var a=e.data("group-history"),o="/ajax/group/clear-history";r.post(o,{group_id:a},function(t){e.remove()},function(t){d.error(t.msg),e.show()})})})}(),!function(t){Tap(function(t,e){var a=e.$;a(function(){var t=a("#presentCollapse");a(document).on("click.payment","#purchase-obj label",function(e){a(this).hasClass("for-self")?(t.collapse("hide"),a("#wishes").removeAttr("name")):a("#wishes").attr("name","wishes")});var e=a("#paymentAppLimitModal");e.length&&a("#errors").length&&e.modal("show")})})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){var a=e.$,n=e.browser,r=function(t){var e;return e=a("<iframe>"),e.css({opacity:0,height:"1px",width:"1px"}),e.attr("src",t),a(document.body).append(e),e};a(document).on("click",".js-app-open",function(){var t=a(this).data("uri");if("A"!==a(this).prop("tagName")){var e=a(this).attr("data-url");r("taptap://taptap.com"+e)}var o=n.is("ios")?"tapios2":"taptap";t=encodeURIComponent(t);var i="https://d.taptap.com/"+o+"/dispatch?uri="+t;setTimeout(function(){window.location.assign(i)},100)})})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){})}(this.TapBundle=this.TapBundle||{}),!function(t){Tap(function(t,e){function a(t,e){function a(t){t.stopPropagation(),offsetX=t.offsetX,offsetY=t.offsetY,o(document).on("mousemove",i,n),c.css({top:l.offset().top-p.offset().top+"px",left:l.offset().left+"px",position:"absolute"}),c.css("margin")&&c.css("margin",0)}function n(t){var e=t.clientX-offsetX,a=t.clientY-offsetY;c.css({top:a+"px",left:e+"px"}),o(document).on("mouseup",r)}function r(){o(document).off("mousemove",n),o(document).off("mouseup",r)}var i=t.area,s=t.ele,d=t.container,c=o(s),l=o(i),p=c;".js-drag"!==i&&(l=c.find(i),l.css("cursor","pointer")),"document"!==d&&(p=c.parents(d)),o(document).on("mousedown",i,a),e()}function n(){var t=".js-drag",e=o(t);e.length&&e.each(function(e,n){function r(t){var e=o(n).tap("move-"+t);e&&(i[t]=e)}if(o(n).data("init-drag"))return!1;var i={area:t,ele:t,container:"document"};for(var s in i)r(s);a(i,function(){o(n).data("init-drag",!0)})})}var r=e.IPC,o=e.$;r.on(["document.ready","document.insert"],function(){n()})})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){function a(t){var e=l("ajax.video.token");c.post(e,function(e){v=e.data.uptoken,t&&t(v)})}function n(t,e){Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:t,save_key:!0,domain:h,uptoken_func:function(){return setTimeout(a,1),v},max_file_size:"5120mb",max_retries:3,chunk_size:"4mb",auto_start:!0,filters:{mime_types:[{title:"Video files",extensions:"wmv,asf,asx,rm,rmvb,mpg,mpeg,mpe,3gp,mov,mp4,m4v,avi,dat,mkv,flv,vob"}]},init:e})}function r(t,e){function a(){c.get(l("ajax.video.md5"),{md5:e},function(e){e.success?"success"===e.data.status?(t.find(".loading").remove(),t.text("ID: "+e.data.video_id),d(t.tap("target")).val(e.data.video_id)):setTimeout(a,2e3):(t.find(".loading").remove(),t.text(e.errMsg))})}a()}function o(t,e){var a='<div class="editable-content"><br/></div>\n                        <div contenteditable="false" class="dom-group uploaded-video-wrap">\n                            <span contenteditable="false" class="icon-font icon-close"></span>\n                            <div class="bbcode-insert-video" data-video-id="'+t+'" '+(e?'style="background-image: url('+e+")":"")+'" ></div>\n                            <div contenteditable="false" class="change-image">\n                                <span data-thumb-text contenteditable="false">'+(e?"更改":"上传")+'视频封面</span>\n                                <input disabled type="file" accept=".jpg, .png, .jpeg, .gif, .bmp, .tif, .tiff|images/*" name="img" data-change-image data-target="imageList" data-url="" data-info="1"/>\n                            </div>\n                            <p class="upload-status" contenteditable="false" data-upload-status>'+(t?"上传成功":"视频上传中")+'</p>\n                            <div contenteditable="false" class="progress">\n                                <div contenteditable="false" class="video-progress-bar progress-bar-animated" role="progressbar" style="width: '+(t?"100%":"0")+';height: 4px;"  aria-valuemin="0" aria-valuemax="100"></div>\n                                <div contenteditable="false" class="thumb-progress-bar progress-bar-animated" role="progressbar" style="width: '+(e?"100%":"0")+';height: 4px;"  aria-valuemin="0" aria-valuemax="100"></div>\n                            </div>\n                        </div>\n                        <div class="editable-content"><br/></div>';return a=a.replace(/\>(\s+)\</g,"><")}function i(t){var e="/ajax/video/thumb/"+t;c.get(e,function(e){var a=e.data&&e.data.url;if(!a)return!1;var n=o(t,a),r=d("[data-video-id="+t+"]").closest(".uploaded-video-wrap");r.siblings(".editable-content").remove(),r.last().replaceWith(n);var i=d("#video_thumbs").val(),c=i&&JSON.parse(i)||{};c[t]=a,d("#video_thumbs").val(JSON.stringify(c)),s()})}function s(){var t=d(".uploaded-video-wrap");t.length&&(d(".bbcode-insert-video"),t.each(function(){var t=d(this),e=t.find(".thumb-progress-bar");$closeBtn=t.find(".icon-close"),
$closeBtn.on("click",function(){t.siblings(".editable-content").remove(),t.remove()});var a=t.find("[data-change-image]");a.removeAttr("disabled").on("click",function(){var n,r;n=d(this);var o="/ajax/bbcode-image";n.attr("data-url",o),r=n.data("info")?1:0,e.css("width","0");var i=t.find(".bbcode-insert-video");n.fileupload({dataType:"json",formData:{get_info:r},add:function(t,e){a.attr("disabled","disabled");var n=e.files[0],r=window.URL.createObjectURL(n);i.css("background-image","url("+r+")"),e.submit()},progressall:function(t,a){var n=parseInt(a.loaded/a.total*100,10);e.css("width",n+"%")},done:function(){a.removeAttr("disabled")},success:function(e){if(1===e.status){var a=e.image_link,n=i.attr("data-video-id");i.attr("data-src",a),t.find("[data-thumb-text]").text("更改视频封面");var r=d("#video_thumbs").val(),o=r&&JSON.parse(r)||{};o[n]=a,d("#video_thumbs").val(JSON.stringify(o))}}})})}))}var d=e.$,c=e.ajax,l=e.route,p=e.IPC,u=e.tip,f=e.browser,h="video.taptapdada.com",v=null;p.on("document.ready",function(){var t=!1;d("#uploadVideoTabModal").on("shown.bs.modal",function(){a(function(){if(!t){var e=d(".js-video-bbcode-uploader");r(e),t=!0}})});var e=1,r=function(t){var a=d(t).attr("id"),r=d(".topic-editor-form").find("button[type=submit]");n(a,{FilesAdded:function(t,e){},BeforeUpload:function(t,a){if(r.attr("disabled","disabled"),!d('[data-seq="'+e+'"]').length){var n=d("#bbcode_contents"),i=d(o());d(i[1]).attr("data-seq",e),n.data("wbb").insertAtCursor(i),d(".modal").modal("hide")}},UploadProgress:function(t,a){var n=d('[data-seq="'+e+'"]'),r=a.percent+"%";n.find(".video-progress-bar").css("width",r)},FileUploaded:function(t,a,n){var o;o="string"==typeof n?JSON.parse(n):JSON.parse(n.response),c.post("/ajax/video/create",{object:o.key,name:o.name},function(t){if(t.success){var a=parseInt(t.data.video_id),n=d('[data-seq="'+e+'"]');d(n).find(".bbcode-insert-video").attr({id:"video-"+a,"data-video-id":a}),d("[data-upload-status]").text("上传成功"),s(),i(a)}else imgError("视频过大，请重新上传！");e+=1,r.removeAttr("disabled")}).fail(function(){r.removeAttr("disabled")}).always(function(){})},Error:function(t,e,a){r.removeAttr("disabled")},UploadComplete:function(){}})};if(f.is("mobile")){$modal=d("#uploadVideoTabModal"),$modal.find(".js-video-bbcode-uploader").hide();var l=$modal.find("label.btn");l.on("click",function(){d(this).siblings(".moxie-shim").children("input").click()})}d(document).on("click.uploadVideo.id",".upload-video-id",function(t){var e=d(this).siblings(".video-id").val(),a=d(this).parents(".modal:first");return e?void c.post("/ajax/video",{id:e},function(t){if(!t.success)return u.error(t.tip);a.modal("hide");var n=d("#bbcode_contents"),r=o(e);n.data("wbb").insertAtCursor(r),s(),i(e)}):u.error("视频id不能为空")})});var m={transferring:r,videoUploaderEvent:s,createBBcodeVideoDom:o,updateVideoThumb:i};t.videoUploader=m})}(),!function(t){Tap(function(t,e){var a=e.$,n=e.browser;a(window).load(function(){a("body").scrollspy({target:".bs-docs-sidebar",offset:140}),n.is("mobile")?(""!==window.location.hash&&a("html,body").animate({scrollTop:a(window.location.hash).offset().top-96},10),a(".bs-docs-sidenav a").click(function(){var t=a(this).attr("href");a("html,body").animate({scrollTop:a(t).offset().top-96},10)})):(""!==window.location.hash&&(window.location.hash,a("html,body").animate({scrollTop:a(window.location.hash).offset().top-135},10)),a(".bs-docs-sidenav a").click(function(){var t=a(this).attr("href");a("html,body").animate({scrollTop:a(t).offset().top-135},10)}))})})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){function a(t){t.modal("hide"),setTimeout(function(){t.remove()},500)}var n=e.$,r=e.ajax,o=e.IPC;o.on("document.ready",function(){function t(){var t=n(this).parent("button"),e=t.data("user-id")/1,o=n('\n        <div class="modal fade friend-request-modal" tabindex="-1" role="dialog">\n            <div class="modal-dialog" role="document">\n                <div class="friend-request-wrapper">\n                    <h4 class="header">发送好友请求</h4>\n                    <input type="text" placeholder="请输入留言">\n                    <div class="actions">\n                      <button class="btn btn-default js-submit-friend-request" type="button">发送</button>\n                      <button class="btn btn-default js-cancel-friend-request" type="button">取消</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n      '),i=o.find(".js-submit-friend-request"),s=o.find(".js-cancel-friend-request"),d=o.find("input");i.click(function(){var n=d.val();n.trim()&&r.post("ajax.friend.request",{user_id:e,note:n},function(e){e.data&&"requested"===e.data.status?t.addClass("is-requesting"):e.data&&"friend"===e.data.status&&t.addClass("is-friend"),a(o)})}),s.click(function(){a(o)}),n("body").append(o),o.modal("show")}function e(){var t=n(this).parent("button"),e=t.data("user-id")/1,o=n('\n        <div class="modal fade friend-request-modal" tabindex="-1" role="dialog">\n            <div class="modal-dialog" role="document">\n                <div class="friend-request-wrapper">\n                    <h4 class="header">确认删除好友</h4>\n                    <p>将删除与该好友的所有通信记录</p>\n                    <div class="actions">\n                      <button class="btn btn-danger js-submit-friend-delete" type="button">删除</button>\n                      <button class="btn btn-default js-cancel-friend-delete" type="button">取消</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n      '),i=o.find(".js-submit-friend-delete"),s=o.find(".js-cancel-friend-delete");i.click(function(){r.post("ajax.friend.delete",{user_id:e},function(){t.removeClass("is-friend"),a(o)})}),s.click(function(){a(o)}),n("body").append(o),o.modal("show")}n(".js-befriend .js-add").click(t),n(".js-befriend .js-delete").click(e),["accept","reject"].forEach(function(t){n(".js-friend-request-"+t).click(function(){n(this).attr("disabled",!0);var e=n(this).parent(".js-friend-request-actions"),a=e.data("user-id");r.post("ajax.friend."+t,{user_id:a},function(){e.find("button").addClass("hide"),e.find(".js-"+t+"ed").removeClass("hide")}).done(function(){n(_this).removeAttr("disabled")})})})})})}(),!function(t){$(function(){$(document).ready(function(){var t=$("#user-question").data("status");if(2==t){var e=($(window).height()-$(".result-pass").height())/2,a=($(window).width()-$(".result-pass").width())/2,n=$(document).scrollTop(),r=$(document).scrollLeft();$("#bg-black").show(),$("#result-pass").addClass("v1").css({position:"absolute",top:e+n,left:a+r,"z-index":"3000"}).show()}else if(4==t){var e=($(window).height()-$(".result-pass").height())/2,a=($(window).width()-$(".result-pass").width())/2,n=$(document).scrollTop(),r=$(document).scrollLeft();$("#bg-black").show(),$("#result-pass2").css({position:"absolute",top:e+n,left:a+r,"z-index":"3000"}).show()}}),$("#test-start").click(function(t){t.preventDefault(),ga("send","event","EventExam","Start",""),$(this).hide(),$("#test-after").show(),$("#step-1").hide(),$("#formid").show()}),$(document).on("click",".answer",function(){ga("send","event","EventExam","AnswerQuestion_"+$(this).data("question-id"),$(this).val());var t=$(this).data("question"),e=$(this).data("step"),a=$("#wrapper-question-step"+e+"-"+t),n=$("#next-question-step"+e+"-"+t);$(this).parents("li").siblings().removeClass("activeli"),$(this).parents("li").addClass("activeli"),a.addClass("questionafter");var r=$("#subjective-option-"+$(this).data("question"));$(this).hasClass("has-question-input")?r.show():(r.hide(),setTimeout(function(){n.click()},100))}),$(document).on("blur",".private-question-input textarea",function(){$("."+$(this).parent().attr("id")).val($(this).val())}),$(document).on("click","#pass-a",function(t){t.preventDefault(),ga("send","event","EventExam","ResearchLink",""),$("#formid").hide(),$("#step-1").hide(),$("#questionnaire").show(),$(this).parents("div").parents("div").eq(0).hide(),$("#bg-black").hide()}),$(document).on("click","#answer-join",function(t){t.preventDefault(),ga("send","event","EventExam","StartResearch",""),$(this).parents("div").parents("div").eq(0).hide(),$("#step-1").hide(),$("#wrapper-question-step3-1").show()});var t=function(t){var e=($(window).height()-$(t).height())/2,a=($(window).width()-$(t).width())/2,n=$(document).scrollTop(),r=$(document).scrollLeft();$("#bg-black").show(),$(t).css({position:"absolute",top:e+n,left:a+r,"z-index":"3000"}).show()};$(document).on("click",".next-question",function(e){e.preventDefault();var a=$(this).data("question"),n=$(this).data("step");ga("send","event","EventExam","NextQuestion",n+"-"+a);var r=a+1,o=$("#wrapper-question-step"+n+"-"+r),i=$("#wrapper-question-step"+n+"-"+a),s=i.data("counts"),d="#formid",c=a==s;if(2==n){if(i.hasClass("questionafter")&&r<=s)return i.hide(),void o.show();if(!i.hasClass("questionafter"))return $("#bg-black").show(),void $("#questionTipModal").addClass("in").show()}if(3==n){var l=$("[name=subjective_option_"+$(this).data("question")+"]");if(l.is(":visible")&&l.length>0&&!l.val())return void alert("请填写你的答案");if(d="#formid2",i.hasClass("questionafter")&&r<=s)return i.hide(),void o.show();if(!i.hasClass("questionafter"))return $("#bg-black").show(),void $("#questionTipModal").addClass("in").show()}c&&(i.hasClass("disabled")||(i.addClass("disabled"),$("#bg-black,#loading-question").show(),$.ajax({type:"post",dataType:"json",data:$(d).serialize(),url:$(d).data("url"),success:function(e){if(i.removeClass("disabled"),$("#bg-black,#loading-question").hide(),1==e.success){if(2==n)return void(0==e.error_num?($("#result-pass-user-rank").text(e.passed_counter),$("#result-pass").removeClass("v1"),t("#result-pass")):($("#error_num").html(e.error_num),t("#result-unpass")));3==n&&t("#result-pass2")}}})))}),$(document).on("click","#questionTipModal button",function(t){$("#questionTipModal").hide(),$("#bg-black").hide()}),$(document).on("click",".prev-question",function(t){t.preventDefault();var e=$(this).data("question"),a=$(this).data("step");ga("send","event","EventExam","PrevQuestion",a+"-"+e);var n=e-1,r=$("#wrapper-question-step"+a+"-"+n),o=$("#wrapper-question-step"+a+"-"+e);n>0&&(o.hide(),r.show())}),$(document).on("click",".question-close",function(t){t.preventDefault();var e=$(this).data("url");ga("send","event","EventExam",$(this).data("action"),e),e?location.href=e:history.go(-1)})})}(this.TapBundle=this.TapBundle||{}),!function(){Tap(function(t,e){var a=e.$,n=e.ajax;a(document).on("click.taptap.topic.contribute.confirm","[data-topic-contribute]",function(){a(this).attr("disabled")}),a(document).on("click.taptap.topic.contribute.submit",'[data-taptap-ajax-topic="contribute"]',function(){var t=a(this);if(!t.attr("disabled")){var e=a("#"+t.data("alert-modal")),r=a("#contributeModal");t.attr("disabled","disabled"),n.post(t.data("url"),{id:t.data("id")},function(t){var n=r.prop("id"),o=a('[data-target="#'+n+'"]');r.modal("hide"),e.find(".alert-logo").removeClass("fail").addClass("success"),e.find(".alert-message-title").text("感谢你的投稿！"),e.find(".alert-message").text(t.data.message),e.modal("show"),o.addClass("disabled"),o.attr("data-toggle","")},function(a,n){n.showTip=!1,r.modal("hide"),e.find(".alert-logo").removeClass("success").addClass("fail"),e.find(".alert-message-title").text("投稿失败"),e.find(".alert-message").text(a.responseJSON.errMsg),e.modal("show"),t.removeAttr("disabled")})}})})}(),!function(){Tap(function(t,e){function a(t){u.date=o(t[0].date)+"-"+o(t[t.length-1].date);for(var e in t){var a=t[e];u.pos+=a.positive_count,u.neg+=a.negative_count,u.del+=a.positive_deleted_count+a.negative_deleted_count,u.inv+=a.positive_invalid_count+a.negative_invalid_count}n()}function n(t){void 0===t&&(t=u);var e=d(".legend-container");e.find(".js-date").text(t.date),e.find(".js-pos").text(t.pos),e.find(".js-neg").text(t.neg),e.find(".js-del").text(t.del),e.find(".js-inv").text(t.inv)}function r(t,e,a){return'<span class="tip-color" style="background-color: '+t+'"></span>'+e+": "+a+"<br>"}function o(t){return t.split("-").slice(1).join("/")}function i(t){var e=t;return p&&(e=function(e){return e&&null!==s&&s>-1&&e.dataIndex!==s?"#C3C3C3":t}),{normal:{color:e,borderWidth:0}}}var s,d=e.$,c=e.browser,l=e.IPC,p=c.is("mobile");l.on("document.ready",function(){function t(){s!==-1&&(s=-1,n(),d("#main-chart-wrapper").html('<div id="main-chart"></div>'),u=echarts.init(document.getElementById("main-chart")),u.setOption(C))}function e(){var t=0,e=0;for(var a in l){var n=l[a];f.push(o(n.date)),h.push(n.date.split("-").join("."));var r=n.positive_count+n.positive_deleted_count+n.positive_invalid_count,i=n.negative_count+n.negative_deleted_count+n.negative_invalid_count;t=t?t<r?r:t:r,e=e?e<i?i:e:i,v.push({value:n.positive_count?n.positive_count:0}),m.push({value:n.positive_deleted_count?n.positive_deleted_count:0}),g.push({value:n.positive_invalid_count?n.positive_invalid_count:0}),w.push({value:n.negative_count?-n.negative_count:-0}),y.push({value:n.negative_deleted_count?-n.negative_deleted_count:-0}),$.push({value:n.negative_invalid_count?-n.negative_invalid_count:-0})}t=t?t:1,e=e?e:1;for(var s in l){var d=l[s],c=t-d.positive_count-d.positive_deleted_count-d.positive_invalid_count,p=e-d.negative_count-d.negative_deleted_count-d.negative_invalid_count;b.push({value:c>0?c:null}),x.push({value:p>0?-p:null})}}function c(){var t={show:!0,trigger:"item",formatter:function(t){var e=u.getOption().series,a=e[0],n=e[1],o=e[2],i=e[4],s=e[5],d=e[6],c='<span class="review-chart-tip"><strong>'+h[t.dataIndex]+"</strong><br>";return parseInt(t.seriesIndex)<4?(c+=r(o.itemStyle.color,o.name,o.data[t.dataIndex].value),c+=r(n.itemStyle.color,n.name,n.data[t.dataIndex].value),c+=r(a.itemStyle.color,a.name,a.data[t.dataIndex].value)):(c+=r(d.itemStyle.color,d.name,-d.data[t.dataIndex].value),c+=r(s.itemStyle.color,s.name,-s.data[t.dataIndex].value),c+=r(i.itemStyle.color,i.name,-i.data[t.dataIndex].value)),c},backgroundColor:"white",borderColor:"#ccc",borderWidth:1,textStyle:{color:"#1b1b1b",fontSize:12,lineHeight:16,fontFamily:"inherit"},confine:!0,extraCssText:"min-width: 120px;"},e={show:!0,trigger:"axis",formatter:function(t){var e=t[0],r=t[1],o=t[2],i=t[4],d=t[5],c=t[6];o.dataIndex!==s&&(s=o.dataIndex,u.setOption(a),n({date:o.axisValue,pos:o.data.value,neg:-c.data.value,del:r.data.value-d.data.value,inv:e.data.value-i.data.value}))}},a={xAxis:{data:f,axisLine:{lineStyle:{color:"#00b9c8",width:1,type:"solid"}},axisTick:{show:!1},axisLabel:{color:"#666"},splitLine:{lineStyle:{color:["#fafafa"]}},z:3,axisPointer:{show:!0,lineStyle:{color:"#e7e7e7"},triggerTooltip:!1}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:["#fafafa"]}},axisLabel:{color:"#666",margin:14,formatter:function(t){return Math.abs(t)}}},grid:{left:50,top:30,right:0,bottom:30,borderColor:"#fafafa"},tooltip:p?e:t,series:[{name:"无效评价",type:"bar",stack:"one",data:g,itemStyle:i("#9B9B9B"),barGap:"0",cursor:"default",barMaxWidth:j},{name:"已删评价",type:"bar",stack:"one",data:m,itemStyle:i("#f06292"),barGap:"0",cursor:"default",barMaxWidth:j},{name:"正面评价",type:"bar",stack:"one",data:v,itemStyle:i("#00b9c8"),barGap:"0",cursor:"default",barMaxWidth:j},{name:"正面评价",type:"bar",stack:"one",data:b,itemStyle:{normal:{color:"transparent"}},barGap:"0",cursor:"default",barMaxWidth:j},{name:"无效评价",type:"bar",stack:"one",data:$,itemStyle:i("#9B9B9B"),barGap:"0",cursor:"default",barMaxWidth:j},{name:"已删评价",type:"bar",stack:"one",data:y,itemStyle:i("#f06292"),barGap:"0",cursor:"default",barMaxWidth:j},{name:"负面评价",type:"bar",stack:"one",data:w,itemStyle:i("#b4ebfa"),barGap:"0",cursor:"default",barMaxWidth:j},{name:"负面评价",type:"bar",stack:"one",data:x,itemStyle:{normal:{color:"transparent"}},barGap:"0",cursor:"default",barMaxWidth:j}]};return a}var l=d("#main-chart").data("chart");if("undefined"!=typeof echarts&&l){p&&a(l);var u=echarts.init(document.getElementById("main-chart")),f=[],h=[],v=[],m=[],g=[],b=[],w=[],y=[],$=[],x=[],j=p?16:12;e();var C=c();d(".js-btn-show").click(function(e){return e.stopPropagation(),d(".review-charts").addClass("show-review-charts"),d(".taptap-review-charts").addClass("show-charts"),d(this).hide(),d(".js-btn-hidden").show(),p?t():u.setOption(C)}),d(".js-btn-hidden").click(function(){d(".review-charts").removeClass("show-review-charts"),d(".taptap-review-charts").removeClass("show-charts"),d(this).hide(),d(".js-btn-show").show(),u.clear(),s=null,p&&d("#main-chart-wrapper").html("")}),p&&d(".js-review-charts").on("click.taptap.remove.reviewChart.highlight",function(e){d(".show-review-charts canvas").length&&"CANVAS"!==e.target.tagName&&t()})}});var u={date:"",pos:0,neg:0,del:0,inv:0}})}(),!function(){Tap(function(t,e){var a=e.$,n=e.browser;a(document).on("click.taptap.score-quote","[data-score-quote]",function(t){if(n.is("Chrome")){var e=a("#score-quote-modal"),r=e.find(".modal-dialog"),o=a("<iframe>");o.css({display:"block",height:296,width:798,border:"none"}),o.attr("src","/app/"+a(this).data("score-quote")+"/score-quote-card");var i=a("<button>");i.append("下载图片"),i.addClass("btn btn-primary icon-font icon-download-new"),i.on("click.score-quote.download",function(){i.text("正在下载..."),ga("send","event","AppDetail","Head","ScoreQuoteDownload"),o.get(0).contentWindow.downloadScoreQuoteImage()}),a(this).text("正在生成..."),r.append(o,i),e.unbind("hidden.bs.modal").on("hidden.bs.modal",function(t){r.children().remove()})}})})}(),!function(){$(function(){$(".js-open-bbcode-image .bbcode-img").each(function(){var t=$(this),e=t.parent();e.is("a")&&e.click(function(t){t.preventDefault()}),t.css("cursor","pointer"),t.click(function(){window.open($(this).data("origin-url"))})})})}(),!function(){var t,e,a,n,r;t=function(){function t(){}return t.prototype.get=function(t,e,a){return null==a&&(a=!1),Tap.ajax.get(t,function(t){return a?e(t):t.success?e(t):void 0})},t.prototype.post=function(t,e,a,n){return null==n&&(n=!1),Tap.ajax.post(t,e,function(t){return n?a(t):t.success?a(t):void 0})},t}(),window.ajax=new t,a=function(){function t(){}return t.prototype.set=function(t,e,a,n,r){var o,i;return a&&(o=new Date,o.setTime(o.getTime()+24*a*60*60*1e3),i=";expires="+o.toGMTString()),null===n&&(n="/"),n=n?";path="+n:"",r=null===r?"":";domain="+r,document.cookie=t+"="+encodeURIComponent(e)+i+n+r},t.prototype.get=function(t){var e,a,n,r,o;for(o=t+"=",a=document.cookie.split(";"),n=0,r=a.length;n<r;n++){for(e=a[n];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(o))return decodeURIComponent(e.substring(o.length,e.length))}return null},t}(),window.cookie=new a,r=function(){function t(){}return t.prototype.player=function(t){var e,a,n,r,o,i;return n=window.cookie.get("video_muted"),o=null==n||!parseInt(n),i=videojs(t,{controls:!0,width:$(t).width(),height:$(t).height()},function(){}),i.muted(o),r=null,e=300,a=function(){if(!$(t).is(":visible"))return i.pause()},i.on("play",function(){return r=setInterval(a,e)}),i.on("pause",function(){return clearInterval(r)}),i.on("volumechange",function(){return o=i.muted()?1:0,window.cookie.set("video_muted",o,365,"/",$("meta[name='cookie-domain']").attr("content"))}),i},t.prototype.init=function(t,e,a,n,r){var o;return o={id:t},window.ajax.post(e,o,function(t){var e;return e=n?t.data.avthumb:t.data.url,a.src({src:e,type:window.video.getType(e)}),a.play(),r()})},t.prototype.getMany=function(t,e,a){var n;return n={ids:t},window.ajax.post(e,n,function(t){return a(t.data)})},t.prototype.uploadInit=function(t,e,a,n){var r,o,i,s;return o=$("[data-taptap-video-upload='progress'][for='"+e+"']"),o.size()||(o=$("[data-taptap-video-upload='progress']")),r=$("[data-taptap-video-upload='error']"),i=$("[data-taptap-video-upload='success']"),s=Qiniu.uploader({runtimes:"html5,flash,html4",browse_button:t,uptoken:a,get_new_uptoken:!1,save_key:!0,domain:$("#"+t).data("domain"),container:e,max_file_size:"5120mb",max_retries:3,chunk_size:"4mb",auto_start:!0,init:{FilesAdded:function(t,e){return r.text("")},BeforeUpload:function(t,e){return o.css("width",0).text("0%").attr("aria-valuenow",0),o.parent().show(),r.hide(),i.hide()},UploadProgress:function(t,e){if(e.percent>o.attr("aria-valuenow"))return o.css("width",e.percent+"%").text(e.percent+"%").attr("aria-valuenow",e.percent)},FileUploaded:function(t,e,a){var r;if(r="string"==typeof a?JSON.parse(a):JSON.parse(a.response),n)return n(r),!0},Error:function(t,e,a){var n;switch(n="",e.status){case 400:n="上传失败，请检查文件格式(400)";break;case 401:n="认证授权失败，请刷新页面后尝试重新上传(401)";break;case 403:n="请检查上传文件是否符合要求(403)";break;case 404:n="资源不存在 (404)";break;case 405:n="请求方式错误，请刷新页面后尝试重新上传(405)";break;case 406:n="数据校验错误，请尝试重新上传(406)";break;case 413:n="Request-URL错误，请刷新页面后尝试重新上传(413)";break;case 579:n="上传失败，请尝试重新上传或联系管理员(579)";break;case 614:n="目标资源已存在(614)";break;case 630:n="已创建的空间数量达到上限，请联系管理员(630)";break;case 701:n="断点续传过程出错，请尝试重新上传(701)";break;default:n=a}return r.html(r.html()+"<br/>"+n).show()},UploadComplete:function(){}}})},t.prototype.getType=function(t){return/\.m3u8/.test(t)?"application/x-mpegURL":"video/mp4"},t}(),window.video=new r,e=function(){function t(t){this.target=$(t).data("target"),this.offsetChild=function(){var t,e,a=this;for(t=0;t<$(this.target).children().length-1;)0===t&&(e=$(a.target).children().eq(t)),Math.abs($(a.target).children().eq(t).offset().left-$(a.target).offset().left)<Math.abs($(a.target).children().eq(t-1).offset().left-$(a.target).offset().left)&&(e=$(a.target).children().eq(t)),t++;return e}}return t.prototype.init=function(t){return this.constructor(t),$(t).data("clicked","disable"),setTimeout(function(){return $(t).data("clicked","able")},300)},t.prototype.prev=function(t){return this.constructor(t),Math.abs(this.offsetChild().offset().left-$(this.target).offset().left)<1?$(this.target).animate({scrollLeft:"-="+this.offsetChild().prev().innerWidth()},300):this.offsetChild().offset().left>$(this.target).offset().left?$(this.target).animate({scrollLeft:"-="+($(this.target).offset().left-this.offsetChild().prev().offset().left)},300):$(this.target).animate({scrollLeft:"-="+($(this.target).offset().left-this.offsetChild().offset().left)},300)},t.prototype.next=function(t){return this.constructor(t),Math.abs(this.offsetChild().offset().left-$(this.target).offset().left)<1?$(this.target).animate({scrollLeft:"+="+this.offsetChild().innerWidth()},300):this.offsetChild().offset().left>$(this.target).offset().left?$(this.target).animate({scrollLeft:"+="+(this.offsetChild().offset().left-$(this.target).offset().left)},300):$(this.target).animate({scrollLeft:"+="+(this.offsetChild().next().offset().left-$(this.target).offset().left)},300)},t.prototype.listener=function(t){var e,a,n,r,o,i,s;return this.constructor(t),s=this.target,n=$(s).children().eq($(s).children().length-1),e=0,$(s).children().each(function(){return e+=$(this).outerWidth(!0)}),!(e<$(s).width())&&(i=function(t){return t.css({opacity:1})},a=function(t){return t.css({opacity:0})},o=$(t+".prev"),r=$(t+".next"),$(s).parent().on("mousemove",function(t){var e,n;return o.hasClass("hide")?(i(r),!0):(a(r),r.hasClass("hide")?(i(o),!0):(a(o),e=t.pageX-$(this).offset().left,n=$(this).width(),e>n/2?(i(r),a(o)):(i(o),a(r))))}).on("mouseout",function(){return a(o),a(r)}),setInterval(function(){var t;return $(s).scrollLeft()<=10?(o.addClass("hide"),r.removeClass("hide")):(t=n.offset().left+n.innerWidth(),o.removeClass("hide"),Math.abs(t-($(s).width()+$(s).offset().left))>1?r.removeClass("hide"):r.addClass("hide")),$(s).children().each(function(){return $(this).find("video").each(function(){if($("[data-taptap-video='click']").is(":hidden")&&Math.abs($(s).offset().left-$(this).offset().left)>280&&!$(this).parent().hasClass("vjs-fullscreen"))return this.pause()})})},300))},t}(),window.carousel=new e,n=function(){function t(){}return t.prototype.searchHighLight=function(){var t;if(t=$("[data-taptap-search-highlight-keyword]").data("taptap-search-highlight-keyword"))return t=t.toString(),$("[data-taptap-search-highlight='target']").not(".heightlighted").each(function(){var e,a,n;return a=$(this).html(),n=t.replace(/(\s+)/,"(<[^>]+>)*$1(<[^>]+>)*"),e=new RegExp("("+n+")","gi"),a=a.replace(e,"<mark>$1</mark>"),a=a.replace(/(<mark>[^<>]*)((<[^>]+>)+)([^<>]*<\/mark>)/,"$1</mark>$2<mark>$4"),$(this).html(a).addClass("heightlighted")})},t.prototype.imageLazyLoad=function(){return $("[data-taptap-image='lazyLoading']").not(".show").each(function(){var t;return t=$(this),t.lazyload({data_attribute:"src",load:function(){return t.addClass("show")}})})},t.prototype.screenshotsSlide=function(t){var e,a,n,r,o,i,s,d,c,l,p,u,f,h,v;return d=$("[data-taptap-app='screenshots']"),v=d.parent().width(),h=$("[data-taptap-app-screenshots='thumbnail']"),l=h.eq(t),e=$(".active[data-taptap-app-screenshots='thumbnail']"),e.removeClass("active"),l.addClass("active"),d.css("left",-(t*v)),s=h.parent(),c=s.scrollLeft(),o=$(window).width()>768?l.position().left-30:l.position().left-15,i=l.outerWidth(),e.index()<t&&o+i+c>v?$(s).animate({scrollLeft:o+2*i+c-v}):e.index()>t&&o<0&&$(s).animate({scrollLeft:c+o-i}),e.data("is-video")&&(n=e.attr("href"),a=videojs(n,{controls:!0,width:$(n).width(),height:$(n).height()},function(){}),a.paused()||a.pause()),l.data("is-video")&&(f=l.attr("href"),p=$("[data-taptap-video='click'][data-target='"+f+"']"),u=videojs(f,{controls:!0,width:$(f).width(),height:$(f).height()},function(){}),0===u.currentTime()?window.video.init(p.data("id"),p.data("url"),u,p.data("compress"),function(){return p.hide()}):u.play()),r=$("[data-taptap-video='autoplay']").parents(".checkbox"),l.data("is-video")&&!r.hasClass("active")?r.addClass("active"):!l.data("is-video")&&r.hasClass("active")?r.removeClass("active"):void 0},t.prototype.openApp=function(t,e){var a,n,r,o,i,s,d;return r=1e3,a=!0,o=Date.now(),n=$("<iframe/>"),n.attr("src",t).css("display","none"),$("body").append(n),d=function(){var t;if(t=Date.now(),!o||t-o<r+100)return a=!1},i=function(){if(!a&&!e)return $("#installModal").modal("show")},setTimeout(i,2e3),s=setTimeout(d,r)},t.prototype.drawChartNew=function(t,e,a){var n,r;if(n=new G23.Chart({container:a,forceFit:!0,height:520,padding:["auto",30,"auto","auto"]}),r={day:{alias:"Date",type:"timeCat"},kind:{alias:" "}},e.hasClass("hot-rank")){var o=-1;t.forEach(function(t){o=t.data<o?t.data:o,t.data||(t.data=null)}),r.data={max:-1,min:o,formatter:function(t){return t?-t:"N/A"}}}n.source(t,r),n.legend("kind",{useHtml:!0,width:660,offsetX:80,autoWrap:!0}),n.tooltip({inPlot:!1,"g2-tooltip":{transform:"translateY(50%)",background:"rgba(0, 0, 0, 0.7)",color:"#fff","border-radius":"6px"}}),n.axis("day",{title:!1}),n.axis("data",{title:!1}),n.line().position("day*data").color("kind").size(2),n.render()},t.prototype.timeRegionChartData=function(t,e){return $("#developerChart").html('<img class="loading show" src="https://img.tapimg.com/market/images/0e6e0f46d7504242302bc8055ad9c8c2.gif" alt=""/>'),$("#developerTimeregionTotal").empty(),Tap.ajax.get(t,function(t){var a,n,r,o,i;$('[data-taptap-ajax-timeregion="start_date"]').val(t.data.start_date),$('[data-taptap-ajax-timeregion="end_date"]').val(t.data.end_date),$("#developerChart").empty(),$("#developerTimeregionTotal").empty(),n="<tr>",i=t.data.total,r=0;for(o in i)a=i[o],n+="<td>"+o+":</td><td>"+a+"</td>",r++,r%4===0&&(n+="</tr><tr>");return $("#developerTimeregionTotal").html(n+"</tr>"),window.mixins.drawChartNew(t.data.chart,e,"developerChart")},function(){$("#developerChart").html("")})},t.prototype.urlCheck=function(t,e){var a,n,r,o;return o=t.search(e),r=t.slice(0,o),o===-1?0:"https://"!==r&&"http://"!==r&&""!==r?0:(a=t.slice(o+e.length),n=parseInt(a.replace(/\//g,"")),isNaN(n)||0===n?0:n)},t.prototype.copySuccess=function(t,e){var a,n;if(0===$("[data-taptap-copy='success']").length)return a=t.data("success"),n=$("<div>"),$(e).hasClass("col-sm-12")?n.css("position","fixed"):n.css("position","absolute"),n.addClass("copy success").attr("data-taptap-copy","success").html(a).appendTo(e),$("[data-taptap-copy='success']").animate({opacity:1},500,function(){return setTimeout(function(){return $("[data-taptap-copy='success']").animate({opacity:0},500,function(){return $("[data-taptap-copy='success']").remove()})},1e3)})},t.prototype.copyFail=function(t,e){var a,n;if(0===$("[data-taptap-copy='fail']").length)return a=t.data("fail"),n=$("<div>"),$(e).hasClass("col-sm-12")?n.css("position","fixed"):n.css("position","absolute"),n.addClass("copy fail").attr("data-taptap-copy","fail").html(a).appendTo(e),$("[data-taptap-copy='fail']").animate({opacity:1},500,function(){return setTimeout(function(){return $("[data-taptap-copy='fail']").animate({opacity:0},500,function(){return $("[data-taptap-copy='fail']").remove()})},1e3)})},t.prototype.titleMessageNew=function(t){var e,a;return!$("body").hasClass("taptap-app")&&(e=t,null==e.data("title")&&e.data("title",document.title),a=parseInt($("span",e).text()),0===a||null===a?document.title=e.data("title"):/micromessenger/i.test(navigator.userAgent)?void 0:document.title="（"+a+e.data("message-total")+"）"+e.data("title"))},t.prototype.pasteContent=function(t){var e;return null!=t.originalEvent.clipboardData||null!=t.clipboardData?null!=t.originalEvent.clipboardData?e=t.originalEvent.clipboardData.getData("text/plain"):null!=t.clipboardData&&(e=t.clipboardData.getData("text/plain")):null!=window.clipboardData&&(e=window.clipboardData.getData("Text")),e},t}(),window.mixins=new n,"undefined"==typeof window.debounce&&(window.debounce=function(t,e){return e||(e=300),window.debounce.timers[t]&&clearTimeout(window.debounce.timers[t]),window.debounce.timers[t]=setTimeout(t,e)},window.debounce.timers={}),window.openTaptapUrl=function(t){var e;return e=$("<iframe>"),e.css({opacity:0,height:"1px",width:"1px"}),e.attr("src",t),$(document.body).append(e)}}(),!function(){var t,e,a,n,r;$(document).on("click",".taptap-app .taptap-link",function(t){var e;return e=$(this).data("taptap-url"),openTaptapUrl(e),t.preventDefault()}),$(document).on("click.taptap.notification.read","[data-taptap-notification='item']",function(){var t;if(t=$(this).parent(),t.hasClass("unread"))return t.removeClass("unread")}),$(document).on("click.taptap.app.screenshots.control","[data-taptap-app-screenshots='control']",function(t){if(t.preventDefault(),("able"===$(this).data("clicked")||null==$(this).data("clicked"))&&(window.carousel.init(this),$(this).hasClass("prev")&&window.carousel.prev(this),$(this).hasClass("next")))return window.carousel.next(this)}),$(document).on("click.taptap.collapse.show","[data-taptap-collapse]",function(){var t;return t=$(this).data("taptap-collapse"),$(t).hasClass("collapse")?($(t).css("height",$(this).data("height")).removeClass("collapse").addClass("expand"),$(this).removeClass("collapse").addClass("expand")):($(t).css("height",$(this).data("limit")).removeClass("expand").addClass("collapse"),$(this).removeClass("expand").addClass("collapse"))}),$(document).on("click.taptap.avatar.recommended","[data-taptap-avatar='recommended']",function(){return $("[data-taptap-avatar='recommended']").parent().removeClass("active"),$(this).parent().addClass("active"),$("#avatarUpload").attr("src",$(this).attr("src"))}),$(document).on("change.taptap.select.action",'[data-taptap-select="action"]',function(t){t.preventDefault();var e={},a=$(this);e[a.attr("name")]=a.val(),Tap.ajax.post($(this).data("url"),e,function(t){return location.reload()},function(t,e){})}),$(document).on("click.taptap.delete.confirm","[data-taptap-delete='confirm']",function(t){return t.preventDefault(),$("#deleteModal").modal("show"),$("[data-taptap-ajax='delete']").data("url",$(this).data("url"))}),$(document).on("click.taptap.delete.confirm","[data-taptap-un-delete='confirm']",function(t){return t.preventDefault(),$("#unDeleteModal").modal("show"),$("[data-taptap-ajax='un_delete']").data("url",$(this).data("url"))}),$(document).on("click.taptap.hidden.confirm","[data-taptap-hidden='confirm']",function(t){return t.preventDefault(),$("#hiddenModal").modal("show"),$("[data-taptap-ajax='hidden']").data("url",$(this).data("url"));
}),$(document).on("click.taptap.hidden.confirm","[data-taptap-un-hidden='confirm']",function(t){return t.preventDefault(),$("#unHiddenModal").modal("show"),$("[data-taptap-ajax='un_hidden']").data("url",$(this).data("url"))}),$(document).on("click.taptap.hidden.confirm","[data-taptap-confirm]",function(t){t.preventDefault();var e=$(this),a=e.data("confirm-content"),n=e.data("confirm-ajax"),r=e.data("comment-id");return $("#confirmModal #confirm-content").text(a),$("#confirmModal [data-taptap-ajax]").attr("data-taptap-ajax",n),$("#confirmModal [data-taptap-ajax]").attr("data-comment-id",r),$("#confirmModal").modal("show"),$("#confirmModal [data-taptap-ajax]").data("url",$(this).data("url"))}),$(document).on("click.taptap.delete.all","[data-taptap-delete='all']",function(){var t,e,a;return t=$("[data-taptap-delete-all='item']:checked"),!!t.length&&(e=t.map(function(){return $(this).val()}).get().join(","),a=$(this).data("url")+"?"+$(this).data("param")+"="+e,$("[data-taptap-ajax='delete']").data("url",a),$("#deleteModal").modal("show"))}),$(document).on("click.taptap.modal.switch","[data-taptap-modal='switch']",function(){return $("[data-taptap-modal-content='app']").removeClass("active"),$("[data-taptap-modal-content='taptap']").addClass("active"),ga("send","event","PopWin","NoDevice")}),$(document).on("click.taptap.modal.qrcode","[data-taptap-modal='qrcode']",function(){return $(this).closest(".modal").find("[data-taptap-modal-content='qrcode']").addClass("in")}),$(document).on("click.taptap.scroll.go","[data-taptap-go]",function(){var t;if(t=$(this).data("taptap-go"),"top"===t)return $("html,body").animate({scrollTop:0})}),$(document).on("click.taptap.show.object","[data-taptap-show]",function(){var t;if(t=$(this).data("taptap-show"),$(t).hasClass("show")?($(t).removeClass("show"),$(this).removeClass("active")):($(t).addClass("show"),$(this).addClass("active")),"#mobileCover"===t)return $("body").removeClass("overflow-hidden")}),$(document).on("click.taptap.banner.hide","[data-taptap-cookie-set]",function(){var t,e,a;return e=$(this).data("taptap-cookie-set"),a=$(this).data("value"),t=$(this).data("days"),"#first-topic-video"===$(this).data("target")&&$("#first-topic-video").hide(),window.cookie.set(e,a,t,"/",$('meta[name="cookie-domain"]').attr("content"))}),$(document).on("click.taptap.slide.nav","[data-taptap-slide='nav']",function(){var t;return t=$(this).data("target"),$(t).hasClass("slide-in")?($(t).removeClass("slide-in"),$("body").removeClass("overflow-hidden")):($(t).addClass("slide-in"),$("body").addClass("overflow-hidden"))}),$(document).on("click.taptap.app.download","[data-taptap-app='open']",function(t){var e;return t.preventDefault(),e=$(this).attr("href")||$(this).data("target"),e&&$(e).modal("show"),$("#weChat").length?e?void 0:$("#weChat").addClass("show-tips"):window.mixins.openApp($(this).data("url"),e)}),$(document).on("click.taptap.ad.hide","[data-taptap-ad='hide']",function(t){var e,a,n;if(t.preventDefault(),a=$(this).parents("[data-taptap-ad='item']"),e=a.data("is-filled"),n=a.data("sales"),e&&n){var r=$("meta[name=user_id]").attr("content");return r=r?r+"":null,tapad("close",n,r),a.collapse("hide"),window.cookie.set("tap_ad_hide",1,1,"/",$("meta[name='cookie-domain']").attr("content"))}}),$(document).on("click.taptap.ad.click","[data-taptap-ad='item'] a",function(){var t,e,a;if(e=$(this).parent("[data-taptap-ad='item']"),t=e.data("is-filled"),a=e.data("sales"),t&&a){var n=$("meta[name=user_id]").attr("content");return n=n?n+"":null,tapad("click",a,n)}}),$(document).on("click.taptap.ad.website",'[data-taptap-log="toDownloadSite"]',function(){var t=$("meta[name=user_id]").attr("content"),e=parseInt($(this).data("id"));return t=t?t+"":null,tapad("website",e,t)}),$(document).on("click.taptap.slide.scroll","[data-taptap-slide='scroll']",function(t){var e,a,n,r,o,i,s;if(t.preventDefault(),s=$(this).data("target"),r=$(s).offset().left,e=0,$(this).hasClass("next")){for(a=0,o=[];a<$(s).children().length;)n=$(s).children().eq(a),n.offset().left>0&&r<n.offset().left&&n.offset().left-r>10&&0===e&&($(s).animate({scrollLeft:$(s).scrollLeft()+n.offset().left-r},300),e=1),o.push(a++);return o}if($(this).hasClass("prev")){for(a=$(s).children().length-1,i=[];a>=0;)n=$(s).children().eq(a),r>n.offset().left&&0===e&&($(s).animate({scrollLeft:$(s).scrollLeft()+n.offset().left-r},300),e=1),i.push(a--);return i}}),$(document).on("click.taptap.reserve.modal","[data-taptap-reserve='button']",function(t){var e,a;return t.preventDefault(),!$(this).hasClass("btn-hollow")&&(a=$("#reserveModal"),e=$("#loginTipsModal"),!a.size()&&e.size()?void e.modal("show"):($("#reserveModal").modal("show"),$("input[name='type']",$("[data-taptap-ajax='reserve']")).val($(this).data("type"))))}),$(document).on("click.taptap.test","[data-taptap-test='switch']",function(){return $("[data-taptap-test-step='1']").addClass("hidden"),$("[data-taptap-test-step='2']").removeClass("hidden")}),$(document).on("click.taptap.post.input","[data-taptap-post='input']",function(t){var e;return t.preventDefault(),e=$(this).data("target"),$("html,body").animate({scrollTop:$(e).offset().top})}),$(document).on("click.taptap.feed.unfollow","[data-taptap-feed='unfollow']",function(t){return t.preventDefault(),$("#unfollowModal").modal("show"),$("[data-taptap-ajax-feed='unfollow']").data("id",$(this).data("id")).data("obj",$(this).data("obj"))}),$(document).on("click.taptap.download.client","[data-taptap-download='client']",function(){return ga("send","event","Client","AppDownload"),$("#installModal").modal("hide")}),$(document).on("change.taptap.developer.apply","[data-taptap-developer='apply'] [name='developer_id']",function(){return 0!==parseInt($(this).val())?$("[data-taptap-developer-apply='name']").addClass("hidden"):$("[data-taptap-developer-apply='name']").removeClass("hidden")}),$(document).on("click.taptap.developer.auth","[data-taptap-developer='auth']",function(t){var e;return t.preventDefault(),e=$(this).data("apps"),$("[data-taptap-ajax-addAuth='item']").each(function(){return $.inArray(parseInt($(this).val()),e)>-1?$(this).prop("checked",!0):$(this).prop("checked",!1)}),$("[data-taptap-developer-auth='user']").find("span").text($(this).data("name")),$("[data-taptap-ajax='addAuth']").data("id",$(this).data("user-id")),$("#adminAuthModal").modal("show")});var o=function(t,e){var a=[];return t=t.substr(1),3===t.length&&(t=t.replace(/(.)/g,"$1$1")),t.replace(/../g,function(t){a.push(parseInt(t,16))}),"rgba("+a.join(",")+","+e+")"};$(function(){$(".input-color input").each(function(t,e){$(e).spectrum({color:$(e).val()?$(e).val():"#ffffff",preferredFormat:"hex",showInput:!0,showPalette:!0,replacerClassName:"input-group-addon bg-color-none",palette:[["#000000","#ffffff"]]}),$(e).show()}),$(".banner-preview").length&&$(".banner-preview").each(function(t,e){$(e).css({"background-image":"url("+$(e).find("img").attr("src")+")",width:$(e).parent().width()+"px",height:$(e).parent().width()+"px"}).show();var a=$(e).data("input"),n="#"+$("#"+a+"_font_color").val(),r="#"+$("#"+a+"_mask_color").val();n&&"#"!=n&&$(e).find(".preview-font-color").show().css("color",n),r&&$(e).find(".preview-img").css("background-image","linear-gradient(-180deg, transparent 40%, "+o(r,1)+" 100%)"),$(e).find(".preview-img").data("img")&&$(e).find(".preview-font-color").show()}),$("input.js-fill-color").length&&$("input.js-fill-color").trigger("input")}),$(document).on("change","input.js-fill-color",function(){var t,e,a,n;e=$(this).data("color-class"),a=$(this).data("color-attr"),t="#"+$(this).val(),n="background-image"==a?"linear-gradient(-180deg, transparent 40%, "+o(t,1)+" 100%)":t,7===t.length?($(".color-block",$(this).parent().parent()).css("background-color",t),e&&a&&$("."+e).css(a,n)):($(".color-block",$(this).parent().parent()).css("background-color","#fff"),e&&($("."+e).css("background-image",""),a&&$("."+e).css(a,"#fff")))}),$(document).on("input","input.js-fill-color",function(){var t,e,a,n;t="#"+$(this).val(),e=$(this).data("color-class"),a=$(this).data("color-attr"),n="background-image"==a?"linear-gradient(-180deg, transparent 40%, "+o(t,1)+" 100%)":t,7===t.length?($(".color-block",$(this).parent().parent()).css("background-color",t),e&&a&&$("."+e).css(a,n),$(this).spectrum("set",$(this).val())):($(".color-block",$(this).parent().parent()).css("background-color","#fff"),e&&($("."+e).css("background-image",""),a&&$("."+e).css(a,"#fff")))}),$(document).on("click.taptap.vote.change","[data-taptap-vote='change']",function(){var t;return t=$("[data-taptap-ajax='voteChange']"),$("input[name='id']",t).val($(this).data("id")),$("input[name='obj']",t).val($(this).data("obj")),$("#voteChangeModal").modal("show")}),$(document).on("click.taptap.remove","[data-taptap-remove='button']",function(){var t;return t=$(this).data("target"),"parent"!==t?$(t).remove():$(this).parent().siblings().length>0?$(this).parent().remove():($(this).parent().addClass("hidden"),$(this).parent().find("input")?$(this).parent().find("input").val(""):void 0)}),$(document).on("click.taptap.developer.app.verifying","[data-taptap-developer-app-verifying]",function(){if($("input[name='status']").length>0)return $("input[name='status']").val($(this).data("taptap-developer-app-verifying"))}),$(document).on("click.taptap.iframe.generating","[data-taptap-iframe='generatedBtn']",function(t){var e,a,n,r,o;t.preventDefault(),o=$(this).data("taptap-type"),n="";var i=$(this).parents(".resources-widget"),s=i.find(".widget-input input").val(),d=i.find("[data-taptap-iframe='linkError']"),c=/(?:https?:\/\/)?[^\/]+\/app\/(\d+)/.exec(s);if(!c||!(e=c[1]))return $(this).hasClass("warning")||$(this).addClass("warning"),d.hasClass("show")||d.addClass("show"),void i.find("textarea").val("");if($(this).removeClass("warning"),d.removeClass("show"),"web"===o)a="https://"+location.host+"/widget/"+e,n='<iframe src="'+a+'" frameborder="0" width="470px" height="90px"></iframe>',r=$("<iframe>"),r.attr({frameborder:"0",src:a,width:"100%",height:"100%"}),$("[data-taptap-iframe='generatedExample']").html(r);else if("client"===o)n="taptap://taptap.com/app?app_id="+e+"&source=outer";else{if("download"!==o)return;n='Intent intent = new Intent(Intent.ACTION_VIEW);intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);intent.setData(Uri.parse("http://d.taptap.com/latest?app_id='+e+'"));mcontext.startActivity(intent);'}return $("[data-taptap-iframe='"+o+"']").val(n)}),$(function(){return $("[data-taptap-copy]").each(function(t){if("undefined"!=typeof ClipboardJS){var e,a,n,r;return e=$(this),e.attr("data-clipboard-text")&&(a="COPY_UCLS_"+t+Math.random().toString().replace(".",""),r=$("<div>").css({height:1,width:1,overflow:"hidden",opacity:0}).attr("id",a).html(e.attr("data-clipboard-text")),e.after(r),e.removeAttr("data-clipboard-text"),e.attr("data-clipboard-target","#"+a)),n=new ClipboardJS(this),n.on("success",function(){switch(e.data("taptap-copy")){case"link-share":return window.mixins.copySuccess(e,"[data-taptap-copy-target='link-share']");case"qq-group":return window.mixins.copySuccess(e,"[data-taptap-copy-target='qq-group']");case"redeem-code":return window.mixins.copySuccess(e,"[data-taptap-copy-target='redeem-code']")}}),n.on("error",function(){switch(e.data("taptap-copy")){case"link-share":return window.mixins.copyFail(e,"[data-taptap-copy-target='link-share']");case"qq-group":return window.mixins.copyFail(e,"[data-taptap-copy-target='qq-group']");case"redeem-code":return window.mixins.copyFail(e,"[data-taptap-copy-target='redeem-code']")}})}})}),$(document).on("paste.taptap.app","[data-paste-listen='true']",function(t){var e,a,n;if(e=$(this),a=window.mixins.pasteContent(t),a.length>60&&!e.siblings("input[name='is_copied']").length)return n=$("<input/>").attr({name:"is_copied",type:"hidden"}).val(1).insertAfter(e)}),$(document).on("click.taptap.spread.topBanner","[data-taptap-spread-topBanner='collapse']",function(){return $("#navbar").animate({top:0},300),$("#topBanner").animate({top:"-80px"},300),$("body").removeClass("top-banner"),window.cookie.set("bottom_banner_hidden",1,365,"/",$('meta[name="cookie-domain"]').attr("content"))}),$(document).on("scroll.taptap.page.scroll",window,function(){var t,e;if(t=$(this).scrollTop(),e=$("[data-taptap-widgets='container']"),e.length)return t>=630&&$(window).width()>=768?e.fadeIn(300):e.fadeOut(300)}),$("head").ready(function(){"use strict";var t;if(navigator.userAgent.match(/IEMobile\/10\.0/))return t=document.createElement("style"),t.appendChild(document.createTextNode("@-ms-viewport{width:auto!important}")),document.querySelector("head").appendChild(t)}),$(function(){var t;if($('[data-toggle="tooltip"]').tooltip(),$("#ajaxNotifications").parent().on("show.bs.dropdown",function(){return $("[data-taptap-ajax-notification='triangle']").show()}),$("#ajaxNotifications").parent().on("hide.bs.dropdown",function(t){return $(this).hasClass("dontClose")?t.preventDefault():$("[data-taptap-ajax-notification='triangle']").hide(),$(this).removeClass("dontClose")}),($("#facebookLike").length>0||$("#facebookShare").length>0)&&!function(){return window.fbAsyncInit=function(){return FB.init({appId:"170292620032143",xfbml:!0,version:"v2.6"})},function(t,e,a){var n,r;r=void 0,n=t.getElementsByTagName(e)[0],t.getElementById(a)||(r=t.createElement(e),r.id=a,r.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(r,n))}(document,"script","facebook-jssdk"),window.onload=function(){return FB.Event.subscribe("xfbml.render",function(t){if($("#facebookLike").length>0&&$("#facebookLike").addClass("show"),$("[data-taptap-share='container']").length)return $("[data-taptap-share='container']").addClass("show")})}}(),$("[data-taptap-search-highlight='target']").length>0&&window.mixins.searchHighLight(),$("#profileFlashModal").length&&$("#profileFlashModal").modal("show"),$("[data-taptap-qrcode='generate']").length>0&&$("[data-taptap-qrcode='generate']").each(function(){var t,e,a,n;return t=$(this).data("url"),e=$(this).data("size")?$(this).data("size"):100,a=$(this).data("color")?$(this).data("color"):"#000",n=$(this).data("level")?$(this).data("level"):2,$(this).qrcode({width:e,height:e,text:t,foreground:a,correctLevel:n})}),$("[data-taptap-collapse]").length&&$("[data-taptap-collapse]").each(function(){var t,e;return e=$(this).data("taptap-collapse"),t=$(e).height(),t>$(this).data("limit")+5?($(this).data("height",t),$(this).addClass("collapse"),$(e).addClass("collapse"),$(this).parent().show()):$(this).parent().remove()}),location.hash&&$("[data-taptap-tab]").length>0&&!function(){var t,e;if(t=location.hash.substr(1),e=$("[data-taptap-tab-target='"+t+"']"),e.length>0&&1!==e.index())return $("[data-taptap-tab]").parent().removeClass("active"),$("[data-taptap-tab='"+t+"']").parent().addClass("active"),$("[data-taptap-tab-target]").removeClass("first"),e.addClass("first"),e.siblings("[data-taptap-tab-target]").collapse("hide")}(),$("#bbcode_contents").length>0&&!function(){var t,e;t="bold,italic,underline,link,|,img,app{upload-video},doc,|,removeformat",/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)&&(t="bold,italic,underline,img,{upload-video},app,removeformat"),t=$("#bbcode_contents").data("upload-video")?t.replace("{upload-video}",",tapvideo"):t.replace("{upload-video}",""),location.href.indexOf("in-game")>-1&&(t="img,italic,underline,bold");var a=!0,n=!1;if(Tap.env("user.role.web_debug")&&(a=!1),window.wbbdebug=!1,e={buttons:t,onlyHtmlMode:a,lang:"cn",imgupload:!0,img_uploadurl:"/ajax/bbcode-image",autoresize:!1,imgFigcaptionMode:n,videoUploaderEvent:Tap.videoUploader.videoUploaderEvent,createBBcodeVideoDom:Tap.videoUploader.createBBcodeVideoDom,updateVideoThumb:Tap.videoUploader.updateVideoThumb},$("#bbcode_contents").wysibb(e),$("#post-topic-panel").length&&Tap.browser.is("web")){var r,o=$("#post-topic-panel .wysibb-toolbar").offset().top-50;$(window).scroll(function(){r=$("#post-topic-panel .forum-groups").offset().top-138,$(window).scrollTop()>o&&$(window).scrollTop()<r?$("#post-topic-panel .wysibb-toolbar").addClass("wysibb-toolbar-fixed"):$("#post-topic-panel .wysibb-toolbar").removeClass("wysibb-toolbar-fixed")})}}(),t=function(){var t,e;return t=function(t){var e;return e=$("<option/>").text(t).val(t),$("#select_day").append(e)},e=function(){var e,a,n,r,o,i,s;if(s=parseInt($("#select_year").val()),r=parseInt($("#select_month").val()),s>0&&r>0){switch($("option",$("#select_day")).not("[value='0']").remove(),r){case 2:e=s%4===0&&s%100!==0||s%400===0?29:28;break;case 4:case 6:case 9:case 11:e=30;break;default:e=31}for(i=[],a=n=1,o=e;1<=o?n<=o:n>=o;a=1<=o?++n:--n)i.push(t(a));return i}},$("#select_month, #select_year").change(function(){return e()})},$("#select_year").length>0&&t(),$("#bottomBanner").length>0&&!function(){var t;if(t=window.cookie.get("bottom_banner_hidden"),!t)return $("#bottomBanner").collapse("toggle")}(),$("[data-taptap-waterfall='container']").length&&!function(){var t;return t=$("[data-taptap-waterfall='container']"),t.masonry({itemSelector:"[data-taptap-waterfall='item']",columnWidth:"[data-taptap-waterfall='item']",percentPosition:!0}),$(window).scroll(function(){var e,a,n;if(e=$("[data-taptap-waterfall='loading']"),e.length&&!e.data("handling")&&(a=e.offset().top,n=$(window).scrollTop()+$(window).height(),a-n<=100))return e.data("handling",1),window.ajax.get(e.data("url"),function(a){var n;return n=$(a.data.html),n.each(function(a,r){var o;if(o=$(r).children().attr("id"),$(o).length&&n.splice(a,0),a===n.length-1)return t.append(n).masonry("appended",n),e.data("handling",0)}),a.data.next?e.data("url",a.data.next):e.remove()})})}(),$("[data-taptap-carousel='swipe']").length&&!function(){return $("[data-taptap-carousel='swipe']").swiperight(function(){return $(this).carousel("prev")}),$("[data-taptap-carousel='swipe']").swipeleft(function(){return $(this).carousel("next")})}(),$("[data-taptap-app-screenshots='control']").length){var e=$("[data-taptap-app='screenshots'] img").size();$("[data-taptap-app='screenshots'] img").on("load error",function(){e--,0===e&&window.carousel.listener("[data-taptap-app-screenshots='control']")}).each(function(){this.complete&&$(this).load()})}if($("[data-taptap-ajax-install='device']").length&&!function(){var t,e,a;return e=$("[data-taptap-ajax-install='device']"),t=window.cookie.get("device_first_choice"),a=null!=t&&$("option[value='"+t+"']",e).length?t:$("option:first",e).attr("value"),e.val(a)}(),$("[data-taptap-ad='item']").length&&$(function(){var t=$("meta[name=user_id]").attr("content");return t=t?t+"":null,tapad("init",null,null,"cn01"),tapad("getSales",t,$("meta[name=tapad-lang]").attr("content"),$("meta[name=tapad-store]").attr("content"),function(t,e,a,n){var r,o,i;if(r=$("[data-taptap-ad='item']"),o=$("[data-taptap-ad='item']").data("is-filled"),r.length&&0===t&&!o)return r.data("is-filled",1),$("[data-taptap-ad='url'], [data-taptap-ad='image']").attr("href",n.uri),$("[data-taptap-ad='image']").css("background","#"+n.image.color.substr(2)),$("[data-taptap-ad='icon']").attr("src",n.icon),$("[data-taptap-ad='title']").text(n.title),$("[data-taptap-ad='contents']").text(n.contents),$("[data-taptap-ad='hide']").addClass("show"),r.collapse("toggle"),$("[data-taptap-ad='image'] img").attr("data-src",n.image.url).lazyload({data_attribute:"src",placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGP6zwAAAgcBApocMXEAAAAASUVORK5CYII=",load:function(){return $("[data-taptap-ad='image'] img").addClass("show")}}),r.data("sales",e).data("id",a),$("#app-"+a).length&&$("#app-"+a).collapse("hide"),i=$("[data-taptap-ad='item']").data("url")+"?app_id="+a,window.ajax.get(i,function(t){return t.data.reserve&&$("[data-taptap-ad='reserve']").removeClass("hide"),0!==parseInt(t.data.score)?$("[data-taptap-ad='score']").text(t.data.score):($("[data-taptap-ad='score']").siblings(".star").remove(),$("[data-taptap-ad='score']").remove()),$("[data-taptap-ad='review']").text(t.data.review_count),$("[data-taptap-ad='review']").parent().addClass("show")})}),setTimeout(function(){var e,a=$("[data-taptap-ad='item']"),n=a.data("sales");return(e=a.data("is-filled"))?void tapad("view",n,t):$("[data-taptap-ad='item']").remove()},1e3)}),$("#developerChart").length&&!function(){var t,e;return t=$("[data-taptap-ajax='chart']").not(".disabled").eq(0),e=t.attr("href"),window.mixins.timeRegionChartData(e,t),t.parent().addClass("active")}(),$("#developerSide").length&&$(window).width()<768&&!function(){return $("#developerSide").collapse("hide")}(),$("#topBanner").length)return function(){var t,e;if(t=window.cookie.get("bottom_banner_hidden"),e=function(){return $("#navbar").animate({top:"80px"},300),$("#topBanner").animate({top:0},300),$("body").addClass("top-banner"),$(document).scroll(function(){var t;return t=$(document).scrollTop(),t<=80&&$("body").hasClass("top-banner")?($("#topBanner").css("top",-t),$("#navbar").css("top",80-t)):($("#topBanner").css("top","-80px"),$("#navbar").css("top",0))})},!t)return setTimeout(function(){return e()},1e3)}()}),$(function(){if($(".icon-verified-jump").add(".icon-verified-lg").css("cursor","pointer").on("click",function(){return location.assign("//"+location.host+"/topic/85618")}),t=[],$(".bbcode-app").each(function(){var e,a;if(a=$(this).text(),e=$(this).data("id"),$(this).addClass("bbcode-app-"+e),t.indexOf(e)===-1)return t.push(e)}),t.length>0)for(e=function(e){var a;return a=t.slice(e,e+50),$.get("/ajax/apps",{ids:a.join(",")},function(t){return"object"==typeof t&&t.success?t.data.forEach(function(t){var e,a;e=$(".bbcode-app-"+t.id).addClass("load-completed"),a=new Image,a.onload=function(){return e.find(".icon img").addClass("loaded")},a.src=t.icon;var n=$('<div class="icon"></div><div class="name"></div><div class="author"></div><div class="rank"><span class="score"></span><span class="glyphicon glyphicon-star"></span></div>');return e.append(n),e.find(".icon").append(a),e.find(".name").text(t.title),e.find(".author").text(t.developer_name),t.rating_score&&"0"!==t.rating_score?e.find(".rank .score").text(t.rating_score):e.find(".rank").fadeOut(300)}):void 0})},a=n=0,r=t.length;n<=r;a=n+=50)e(a);$(function(){var t,e,a,n,r,o;a=$("#insertAppModal"),a.on("shown.bs.modal",function(){return $(this).find("#appName").focus()}),e={page:0,kw:"",next:null,salt:null},r=a.find(".panel-body .loading"),r.loading=function(){return r.show().html($("<img/>").attr("src",r.data("loading-image")))},r.noResult=function(){return r.show().html(r.data("no-result-text"))},r.noNext=function(){return r.show().html(r.data("no-next-text"))},r.hide=function(){return r.html(" ")},o=function(t,o,i){var s;return(e.page!==o||e.kw!==t)&&(1===o&&(a.find(".modal-body ul").html(""),a.find(".modal-footer .btn-primary")[0].disabled=!0),r.loading(),e.salt=i,e.page=o,e.kw=t,s="/ajax/search/apps",$.get(s,{kw:t,page:o,format:"json"},function(t){return i===e.salt&&("object"==typeof t&&t.success?(e.next=t.data.next,e.next?r.loading():r.noNext(),t.data.apps instanceof Array&&0===t.data.apps.length&&r.noResult(),n(t.data.apps)):void 0)}))},n=function(t){if(t instanceof Array)return t.forEach(function(t){var e,n,r,o;return n="<img src="+t.icon+">",r="<p>"+t.title+"</p>",o="<span class='icon-font icon-success'></span>",e=$("<li>").append(n+r+o).data(t),e.on("click",function(){return e.parent().find(".active").not(e).removeClass("active"),e.addClass("active"),a.find(".btn-primary")[0].disabled=!1}),0===a.find(".modal-body ul li.active").size()&&(e.addClass("active"),a.find(".btn-primary")[0].disabled=!1),a.find(".modal-body ul").append(e)})},a.find("#appName").on("keyup",function(){var t,n;return t=$.trim($(this).val()),""===t?(r.hide(),a.find(".panel-body").animate({opacity:0},300),e.kw="",a.find(".modal-body ul").html(""),a.find(".btn-primary")[0].disabled=!0,!1):(a.find(".panel-body").animate({opacity:1},300),n=1,debounce(function(){return o(t,n,Math.random())}))}),a.find(".panel-body").on("scroll",function(){var t,a;if(t=$(this).children("ul").height()+$(this).children(".loading").height(),a=$(this).scrollTop()+$(this).height(),Math.abs(t-a)<100)return e.next?debounce(function(){return o(e.kw,e.page+1,Math.random())}):r.noNext()}),$("#bbcode_contents").size()>0&&(t=$("#bbcode_contents").data("wbb"),a.find(".btn-primary").click(function(){var e,n;if(e=a.find(".panel-body ul li.active"),n="[app="+e.data("id")+"]"+e.text()+"[/app]",e.size()>0)return t.selectLastRange(),t.insertAtCursor(n),t.modeSwitch(),t.modeSwitch()}))})}),function(){var t,e;for(t=2*$("#appTag li").outerHeight(!0),e=[];$("#appTag").height()>t;)e.push($("#appTag li:last-child").prev().remove());return e}(),$(document).on("click.taptap.unbindAccount",'[data-taptap-unbind-account="button"]',function(){var t=$("#unbind-account"),e=t.find("form");return e.attr("action",$(this).data("form-action")),e.data("provider",$(this).data("provider")),t.modal("show")}),$("#orderRefundSuccessModal").on("hide.bs.modal",function(){return location.assign($(this).data("url"))}),$(document).on("click.taptap.review.modal.switch",'[data-taptap-action="review-modal-switch"]',function(){return $("#reviewModal .modal-dialog").toggleClass("modal-lg"),$("#reviewModal textarea.form-control").focus()}),$(document).on("click.taptap.debate.modal.switch",'[data-taptap-action="debate-modal-switch"]',function(){return $("#debateModal .modal-dialog").toggleClass("modal-lg"),$("#debateModal textarea.form-control").focus()})}(),!function(){$(document).on("click.taptap.review.rating","[data-taptap-review-rating='star']",function(){var t,e,a,n,r;return t=$(this).index(),"modal"===$(this).data("taptap-review-toggle")?(a=$(this).data("target"),n=$("[data-taptap-review-rating='star']",$(a)).eq(t),$("input[name='score']").val(t+1),$(a).modal(),n.addClass("hit"),n.prevAll().addClass("hit"),$("[data-taptap-review-rating='tips']",$(a)).text($(this).data("text"))):(r=$(this).parent().siblings("[data-taptap-review-rating='tips']"),e=$("input[name='score']"),$(this).hasClass("hit")?t+1===parseInt(e.val())?($(this).removeClass("hit"),$(this).prevAll().removeClass("hit"),e.val(""),r.text("").removeClass("warning")):($(this).nextAll().removeClass("hit"),e.val(t+1),r.text($(this).data("text")).removeClass("warning")):($(this).addClass("hit"),$(this).prevAll().not(".hit").addClass("hit"),e.val(t+1),r.text($(this).data("text")).removeClass("warning")))}),$(document).on({mouseenter:function(){return $(this).hasClass("hit")||($(this).addClass("hit"),$(this).prevAll().addClass("hit")),$(this).nextAll().removeClass("hit"),$(this).parent().siblings("[data-taptap-review-rating='tips']").text($(this).data("text")).removeClass("warning")},mouseleave:function(){var t,e,a,n;return e=$("input[name='score']"),t=parseInt(e.val())-1,a=$("[data-taptap-review-rating='star']",$(this).parent()).eq(t),n=$(this).parent().siblings("[data-taptap-review-rating='tips']"),e.val()?$(this).index()<t?(a.addClass("hit"),a.prevAll().not(".hit").addClass("hit"),n.text(a.data("text")).removeClass("warning")):$(this).index()>t?(a.nextAll().removeClass("hit"),n.text(a.data("text")).removeClass("warning")):void 0:($(this).removeClass("hit"),$(this).prevAll().removeClass("hit"),n.text("").removeClass("warning"))}},"[data-taptap-review-rating='star']"),$(document).on("submit.taptap.review.post","[data-taptap-review='post']",function(t){var e;return t.preventDefault(),$("input[name='score']").val()?(e=$("button[type='submit']").button("loading"),$.ajax({type:"POST",url:$(this).attr("action"),data:$(this).serialize(),success:function(t){var a,n;return e.button("reset"),$("input[name='is_copied']").length&&$("input[name='is_copied']").remove(),t.success?$("#reviewsList").length?(n=t.data.html,a=$(n).attr("id"),$("#"+a).length>0&&$("#"+a).remove(),$("#reviewsList").prepend(n),$("#reviewModal").modal("hide"),window.dynamicTime.updatePage()):location.reload():($("[data-taptap-review='error']",$("#reviewModal")).find("p").text(t.errMsg),$("[data-taptap-review='error']",$("#reviewModal")).show())}})):$("[data-taptap-review-rating='tips']").text($("input[name='score']").data("warning")).addClass("warning")}),$(document).on("click.taptap.comment.collapse","[data-taptap-comment='collapse']",function(t){var e,a,n;return t.preventDefault(),n=$(this).data("obj"),a=$("[data-taptap-comment='container']",$(n)),$(this).hasClass("active")?(a.collapse("toggle"),$(this).removeClass("active")):(a.children().length?a.collapse("toggle"):(e=$(this).button("loading"),window.ajax.get($(this).data("url"),function(t){return a.html(t.data.html),window.dynamicTime.updatePage(),e.button("reset")})),$(this).addClass("active"))}),$(document).on("submit.taptap.comment.post","[data-taptap-comment='post']",function(t){var e,a;return t.preventDefault(),a=$(this),e=$("button[type='submit']",a).button("loading"),Tap.ajax.post($(this).attr("action"),$(this).serialize(),function(t){var n,r;return e.button("reset"),!!t.success&&(r=t.data.parent,n=$("[data-taptap-comment='container']",$(r)),n.length?window.ajax.get(t.data.url,function(e){if(n.html(e.data.html),n.hasClass("in")||n.collapse("toggle"),$("#commentModal").modal("hide"),$("#commentUpdateModal").modal("hide"),$("[name='contents']",a).val(""),window.dynamicTime.updatePage(),$("#comment-"+t.data.comment).length)return $("body").animate({scrollTop:$("#comment-"+t.data.comment).offset().top-30},300)}):location.reload())})}),$(document).on("click.taptap.comment.modal","[data-taptap-comment='button']",function(t){var e,a;return t.preventDefault(),a=$(this),$("#loginTipsModal").length?($("#loginTipsModal").modal("show"),!1):(e=function(){var t,e,n,r,o,i,s,d;return r=a.data("obj"),o=a.data("obj-id"),s=a.data("reply-id")?a.data("reply-id"):"",n=s?s:o,i=$("#"+r+"-"+n),d=$(i).data("user"),t=$("[data-"+r+"-"+n+"='avatar']").attr("src")||i.data("user-avatar"),e=$("[data-"+r+"-"+n+"='contents']").text(),$("[data-taptap-comment-modal='user']",$("#commentModal")).text(d),$("[data-taptap-comment-modal='avatar']",$("#commentModal")).attr("src",t),$("[data-taptap-comment-modal='contents']",$("#commentModal")).text(e),$("[data-taptap-comment-modal='obj_id']",$("#commentModal")).val(o),$("[data-taptap-comment-modal='reply_id']",$("#commentModal")).val(s),$("#commentModal").modal("show")},$(document.body).hasClass("should-exam")?(ga("send","event","ExamChoose","Choose",""),$("#questionSwitchModal").modal("show"),$("#question-return").unbind("click").on("click",function(){return ga("send","event","ExamChoose","Pass",""),$("#questionSwitchModal").modal("hide"),e()})):e())}),$(document).on("click.taptap.comment.update","[data-taptap-comment='update']",function(t){var e,a,n,r,o,i;return t.preventDefault(),n=$(this).data("id"),r=$("#comment-"+n),i=$(r).data("user"),e=$("[data-comment-"+n+"='avatar']").attr("src"),a=$("[data-comment-"+n+"='contents']").html(),o="",$(a).each(function(){return $(this).index()>0&&(o+="\r\n"),o+=$(this).text()}),$("[data-taptap-comment-modal='user']",$("#commentUpdateModal")).text(i),$("[data-taptap-comment-modal='avatar']",$("#commentUpdateModal")).attr("src",e),$("[data-taptap-comment-modal='obj_id']",$("#commentUpdateModal")).val(n),$("[data-taptap-comment-modal='contents']",$("#commentUpdateModal")).val(o),$("#commentUpdateModal").modal("show")}),$(document).on("click.taptap.review.order","[data-taptap-review='order']",function(t){var e;return t.preventDefault(),e=$(this).button("loading"),$("[data-taptap-review='order']").parent().removeClass("active"),$(this).parent().addClass("active"),$.ajax({type:"GET",url:$(this).attr("href"),success:function(t){return function(t){if(t.success)return $("#reviewsList").html(t.data.html),window.dynamicTime.updatePage(),$("[data-taptap-ajax='more'][data-target='#reviewsList']").data("url",t.data.next),e.button("reset"),$('[data-toggle="tooltip"]').tooltip()}}(this)})}),$(document).on("click.taptap.dispute","[data-taptap-dispute]",function(){var t;return t=$(this).data("taptap-dispute"),$(this).parent().siblings(t).collapse("show"),$(this).parent().remove()}),$(function(){return $("#reviewModal, #commentModal").on("shown.bs.modal",function(){
if($(this).find("textarea[name='contents']").length)return $(this).find("textarea[name='contents']").focus()})}),$(function(){})}(),!function(){$(function(){if($videoBtn=$('[data-taptap-video="topic"]'),/^\/topic\/\d+$/.test(location.pathname)&&$videoBtn.length){var t=[],e=Tap.route.getParams();if($videoBtn.each(function(){t.push($(this).data("id"))}),!t)return!1;$.post($videoBtn.data("topic-url"),{ids:t,topic_id:e},function(e){if(e.success){var a=e.data.list;if($.isEmptyObject(a))return t.forEach(function(t){var e=$("#video-"+t);return e.siblings("button:first").attr("data-url",""),e.siblings("button:first").removeAttr("data-taptap-video"),e.siblings("button:first").addClass("btn-noplay"),e.parents(".topic-video:first").append('<div class="mask-layer"></div><p class="video-tip">视频已删除，请重新上传<p>')});for(var n in a){if(!a.hasOwnProperty(n))return!1;var r=a[n].err_msg,o=$("#video-"+a[n].video_id);return"undefined"!=typeof r?(o.siblings("button:first").attr("data-url",""),o.siblings("button:first").removeAttr("data-taptap-video"),o.siblings("button:first").addClass("btn-noplay"),o.parents(".topic-video:first").append('<div class="mask-layer"></div><p class="video-tip">'+r+"<p>")):o.attr("poster",a[n].poster)}}}).fail(function(){Tap.tip("请求失败")})}}),$(document).on("click.taptap.video.click","[data-taptap-video='click'],[data-taptap-video='topic']",function(){var t,e;return t=$(this),e=window.video.player(t.data("target")),$("[data-taptap-video='click']").length>1&&$("[data-taptap-video='click']").not(t).each(function(){var t;if(t=window.video.player($(this).data("target")),!t.paused())return t.pause()}),window.video.init(t.data("id"),t.data("url"),e,t.data("compress"),function(){return t.hide()})}),$(document).on("click.taptap.video.play",".vjs-play-control.vjs-paused",function(){var t;return t=$(this).parent().parent().attr("id"),$("[data-taptap-video]").each(function(){var e,a;if(a=$(this).data("target"),a!=="#"+t&&(e=window.video.player(a),!e.paused()))return e.pause()})}),$(document).on("change.taptap.video.autoplay","[data-taptap-video='autoplay']",function(){var t;return t=$(this).is(":checked")?1:0,window.cookie.set("video_autoplay",t,365,"/",$("meta[name='cookie-domain']").attr("content"))}),window.video.taptap_scroll=function(){var t,e;return t=0,e=$(window).scrollTop(),$("[data-taptap-video='scroll']").each(function(){var a,n,r;if(a=$(this),n=a.offset().top-e,a.isInViewport()&&n>0&&n+a.height()<=$(window).height()&&0===t)return r=window.video.player(a.data("target")),window.video.init(a.data("id"),a.data("url"),r,a.data("compress"),function(){return a.hide()}),t=1}),$(window).scroll(function(){return clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){return t=0,e=$(window).scrollTop(),$("[data-taptap-video='scroll']").each(function(){var a,n,r,o;return a=$(this),o=a.data("target"),n=$(o).offset().top-e,r=window.video.player(o),$(o).isInViewport()&&n>0&&n+$(o).height()<=$(window).height()&&0===t?(0===r.currentTime()?window.video.init(a.data("id"),a.data("url"),r,a.data("compress"),function(){return a.hide()}):r.play(),t=1):r.paused()?void 0:r.pause()})},250))})},window.video.taptap_mobile=function(){var t=function(){return clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){var t,e,a;return t=0,e=[],a=(new Date).getTime(),$("[data-taptap-video='mobile']").each(function(){var n,r;if(!$(this).hasClass("video-had-init"))return $(this).isInViewport()&&(r=$(this).data("time"),n=(a-parseInt(r))/1e3,(!r||n>1800)&&e.push($(this).data("id"))),t++,t===$("[data-taptap-video='mobile']").not(".video-had-init").length&&e.length?($(this).addClass("video-had-init"),window.video.getMany(e,$(this).data("url"),function(a){var n,r,o;o=a.list,e=Object.keys(o),t=0,n=[];var i="video-"+o[t].video_id,s=$("video[id^='"+i+"']");if($.isEmptyObject(o))return s.parents(".topic-video:first").append('<div class="mask-layer"></div><button class="btn btn-topic-video btn-noplay" type="button"><i class="icon-font icon-font-topic-video ic_Play"></i></button><p class="video-tip">视频已删除，请重新上传<p>');if("undefined"!=typeof o[e[t]].err_msg){var d=o[e[t]].err_msg;return s.attr("controls",!1),s.parents(".topic-video:first").append('<div class="mask-layer"></div><button class="btn btn-topic-video btn-noplay" type="button"><i class="icon-font icon-font-topic-video ic_Play"></i></button><p class="video-tip">'+d+"<p>")}for(window.tapTestVideoPlayers=[];t<e.length;){var c="video-"+o[t].video_id;r=$("video[id^='"+c+"']").data("compress")?o[e[t]].avthumb:o[e[t]].url,"video/mp4"===window.video.getType(r)?($("#video-"+o[t].video_id).attr("src",r),$("#video-"+o[t].video_id).data("time",(new Date).getTime())):($("video[id^='"+c+"']").append("<source src='"+r+"' type='"+window.video.getType(r)+"'></source>"),$("video[id^='"+c+"']").each(function(t,e){window.tapTestVideoPlayers.push(videojs(e))})),n.push(t++)}return window.Tap.IPC.emit("test.player.init"),n})):void 0})},250))};$(window).scroll(t),t.call(window)},window.video.taptap_autoplay=function(){var t,e,a,n,r;return a=window.cookie.get("video_autoplay"),e=!(null==a||!parseInt(a)),$("[data-taptap-video='autoplay']").prop("checked",e),!!e&&(t=$("[data-taptap-video='click'][data-autoplay='1']"),r=t.data("target"),n=window.video.player(r),$("[data-taptap-video='click']").length>1&&$("[data-taptap-video='click']").not(t).each(function(){var t;if(t=window.video.player($(this).data("target")),!t.paused())return t.pause()}),window.video.init(t.data("id"),t.data("url"),n,t.data("compress"),function(){return t.hide()}))},$(function(){if($("[data-taptap-video='scroll']").length&&window.video.taptap_scroll(),$("[data-taptap-video='mobile']").length&&window.video.taptap_mobile(),$("[data-taptap-video='autoplay']").length&&$("[data-taptap-video='click'][data-autoplay='1']").length&&window.video.taptap_autoplay(),$("[data-taptap-video-upload='token']").length&&!function(){var t;return t=$("[data-taptap-video-upload='token']").data("url"),window.ajax.post(t,null,function(t){var e;return e=[],$("[data-taptap-video='upload']").each(function(a,n){var r,o,i;i=$(n).attr("id"),o=$(n).parents("[data-taptap-video-upload='container']").attr("id"),r=$(o),e[a]=window.video.uploadInit(i,o,t.data.uptoken,function(t){})})})}(),$("[data-taptap-video-upload='dev']").length)return function(){var t;return t=$("[data-taptap-video-upload='dev']").data("url"),window.ajax.post(t,null,function(e){var a;return a=[],$("[data-taptap-video='dev']").each(function(n,r){var o,i,s,d;return o=$(r),d=$(r).attr("id"),s=$(r).parents("[data-taptap-video-upload='container']").attr("id"),i=function(e){o.text("转码中...").append('<img class="loading" src="https://img.tapimg.com/market/images/0e6e0f46d7504242302bc8055ad9c8c2.gif" />'),t=o.data("post-url"),window.ajax.post(t,{name:e.name,object:e.key,thumb:""},function(t){t.success?t.data.status==o.data("failed-status")||t.data.status==o.data("reject-status")?(o.find(".loading").remove(),o.text(t.data.label)):(o.find(".loading").remove(),o.text("ID: "+t.data.video_id),$(o.data("target-input")).val(t.data.video_id)):t.errMsg&&(o.find(".loading").remove(),o.text(t.errMsg))},!0)},window.cb=i,a[n]=window.video.uploadInit(d,s,e.data.uptoken,i)})})}()})}(),!function(t){var e,a;a=function(t,e,a,n,r){var o;switch(a){case 2:o=$("#paymentWeixinModal");break;case 4:o=$("#paymentQpayModal")}if(o.modal("show"),$("[data-taptap-payment='loading']").hide(),$("[data-taptap-payment='qrcode']").empty(),$("[data-taptap-payment='qrcode']",o).length>0)return $("[data-taptap-payment='qrcode']",o).qrcode({width:200,height:200,text:t})},e=function(t){var e=parseInt($("[name='payment_type']:checked",t).val());switch($("[name='obj_type']:checked",t).val(),$("[name='wishes']",t).val(),$("[name='app_id']",t).val(),e){case 0:return $("#paymentAlipayModal").modal("show"),$(document).off("submit.taptap.payment.order"),t.submit();case 2:return $(document).off("submit.taptap.payment.order"),t.submit();case 4:return $(document).off("submit.taptap.payment.order"),t.submit()}},$(document).on("submit.taptap.payment.order","[data-taptap-payment='order']",function(t){return t.preventDefault(),e($(this))}),$(document).on("click.taptap.payment.reset","[data-taptap-payment='reset']",function(){return location.reload()}),$(document).on("click.taptap.payment.pay","[data-taptap-payment='pay']",function(){switch($(this).data("type")){case"alipay":return $("#paymentAlipayModal").modal("show");case"weixin":return a($(this).data("url"),$(this).data("app-id"),$(this).data("payment-type"));case"qpay":return a($(this).data("url"),$(this).data("app-id"),$(this).data("payment-type"))}}),$(function(){return $("#paymentAlipayModal").on("hide.bs.modal",function(){return $(document).on("submit.taptap.payment.order","[data-taptap-payment='order']",function(t){return t.preventDefault(),e($(this))})})})}(this.TapBundle=this.TapBundle||{}),!function(){function t(t,e){$(document).on("click.taptap.ajax.topic",t,function(t){var a;return t.preventDefault(),a=$(this),!a.hasClass("disabled")&&(a.addClass("disabled"),$("#confirmModal").modal("hide"),void Tap.ajax.post(a.data("url"),null,function(t){a.removeClass("disabled"),t.success&&(Tap.tip("操作成功！"),e.call(a))}))})}$.ajaxSetup({beforeSend:function(t){var e,a,n;a="X-XSRF-TOKEN",n=cookie.get("XSRF-TOKEN"),e=$("meta[name='csrf-token']").attr("content"),n&&"null"!==n||(a="X-CSRF-TOKEN",n=e),t.setRequestHeader(a,n)}}),$(document).on("click.taptap.ajax.notificationAll","[data-taptap-ajax='notification']",function(){var t=$(this),e=$("#ajaxNotifications");if(e.is(":visible"))return window.ajax.get(t.data("url"),function(e){var a,n;if($("#ajaxNotifications").html(e.data.html),n=0,a=0,$("[data-taptap-ajax-notification='tab']").each(function(){var e;if($(this).data("total")&&$(this).data("add-on")&&(n+=parseInt($(this).data("total"))),a++,a===$("[data-taptap-ajax-notification='tab']").length&&(e=t.find("span"),e.length))return n?(n>99&&(n="99+"),e.text(n)):e.remove()}),null!=t.data("title"))return $("span",t).length?window.mixins.titleMessageNew(t):document.title=t.data("title")})}),$(document).on("click.taptap.ajax.notificationType","[data-taptap-ajax-notification='tab']",function(t){var e,a,n;if(t.preventDefault(),e=$(this),n=e.attr("href"),a=$("[data-taptap-ajax-notification='contents']",$(n)),e.tab("show"),$("#ajaxNotifications").parent().addClass("dontClose"),e.data("url"))return window.ajax.get(e.data("url"),function(t){a.replaceWith(t.data.html),n=$("[data-taptap-ajax='notification']").find("span");var r=$("#taptap-notification"),o=r.data("get-unread-total-url");if(window.ajax.get(o,function(t){r.find("span").remove();var e=t.data.total;e>0&&(e>99&&(e="99+"),r.attr("data-unread",e).append("<span>"+e+"</span>"))}),e.find("span").length)return e.find("span").remove()})}),$(document).on("click.taptap.ajax.notificationSetting","[data-taptap-ajax-notification='setting']",function(){var t,e;return t=$(this),e={type:t.data("type")},t.prop("disabled",!0),$("#ajaxNotifications").parent().addClass("dontClose"),window.ajax.post(t.data("url"),e,function(e){return t.replaceWith(e.data.html)})}),$(function(){if($("meta[name=user_id]").size()){var t=$("#taptap-notification"),e=t.data("get-unread-total-url");if(!e)return!1;var a=function(){Tap.ajax.get(e,function(e){function a(){if("granted"==Notification.permission){var t="您有"+e.data.total+"条新消息";1==e.data.total&&(t=e.data.notification.title+" "+e.data.notification.summary);var a=new Notification("TapTap",{icon:"https://img.tapimg.com/market/images/dcaacad6231ac7003cf1b62b6643c450.png",body:t});a.onclick=function(){window.focus()}}else clearInterval(tapUnreadTotalTimer)}$("#taptap-notification span").remove();var n=e.data.total;n>0&&(n>99&&(n="99+"),t.attr("data-unread",n).append("<span>"+n+"</span>"),window.Notification&&localStorage.notificationCount!=n?Tap.browser.is("Safari")?Notification.requestPermission(a()):Notification.requestPermission().then(function(){a()}):window.Notification||clearInterval(tapUnreadTotalTimer),localStorage.notificationCount=n)},function(t,e){e.showTip=!1,401===t.status&&clearInterval(tapUnreadTotalTimer)})};a(),window.tapUnreadTotalTimer=setInterval(a,1e4)}}),$(document).on("click.taptap.ajax.more","[data-taptap-ajax='more']",function(){var t,e,a;return t=$(this),a=t.data("target"),e=t.siblings("[data-taptap-ajax-more='loading']"),t.hide(),e.show(),"post"===t.data("method")?window.ajax.post(t.data("url"),null,function(n){var r,o;if(n.success){if($("#recList").length){var i=$(n.data.html).filter(".feed-rec"),s=$(a).find(".feed-rec"),d=[],c=[],l=[];if(i.each(function(t,e){l.push($(e).attr("id"))}),l.length&&s.each(function(t,e){var a=$(e).attr("id");a&&l.indexOf(a)!==-1&&(d.push(a),i=i.not("#"+a))}),d.length){if(i.length)$(a).attr("data-repeat",d.join(",")),i.each(function(t,e){c.unshift(e.outerHTML)}),$(a).append(c.join(""));else if(n.data.next)return t.data("url",n.data.next),t.click()}else $(a).append(n.data.html)}else $(a).append(n.data.html);n.data.next&&(t.data("url",n.data.next),t.show()),$("[data-taptap-search-highlight='target']").length&&window.mixins.searchHighLight(),$("[data-dynamic-time]").length>0&&window.dynamicTime.updatePage(),$('[data-toggle="tooltip"]').tooltip(),$("[data-taptap-ad='item']").length&&(r=$("[data-taptap-ad='item']").data("id"),$("#app-"+r).length&&$("#app-"+r).collapse("hide")),$("[data-taptap-review='myReview']").length&&(o=$("[data-taptap-review='myReview']").attr("id"),$("li#"+o).remove())}else t.text("加载失败"),t.show();return e.hide()},!0):window.ajax.get(t.data("url"),function(n){var r,o;return n.success?($(a).append(n.data.html),n.data.next&&(t.data("url",n.data.next),t.show()),$("[data-taptap-search-highlight='target']").length&&window.mixins.searchHighLight(),$("[data-dynamic-time]").length>0&&window.dynamicTime.updatePage(),$('[data-toggle="tooltip"]').tooltip(),$("[data-taptap-ad='item']").length&&(r=$("[data-taptap-ad='item']").data("id"),$("#app-"+r).length&&$("#app-"+r).collapse("hide")),$("[data-taptap-review='myReview']").length&&(o=$("[data-taptap-review='myReview']").attr("id"),$("li#"+o).remove()),$("[data-taptap-video='scroll']").length&&window.video.taptap_scroll(),$("[data-taptap-video='mobile']").length&&window.video.taptap_mobile(),$("[data-taptap-video='autoplay']").length&&$("[data-taptap-video='click'][data-autoplay='1']").length&&window.video.taptap_autoplay()):(t.text("加载失败"),t.show()),e.hide()},!0)}),$(document).on("click.taptap.ajax.upload","[data-taptap-ajax='upload']",function(){var t,e,a,n,r;return t=$(this).data("target"),e=$(this).data("target-input"),a=$(this).parent(".banner-preview"),n=$(this).data("valid-width")?$(this).data("valid-width"):"",r=$(this).data("valid-height")?$(this).data("valid-height"):"",$(this).fileupload({dataType:"json",formData:{valid_width:n,valid_height:r},done:function(n,r){var o,i,s,d;return r.result.success?(d=JSON.stringify(r.result.data),"#screenshots"===t?(i=$("[data-taptap-ajax-upload='screenshotsContainer']"),s=$("[data-taptap-ajax-upload='screenshotsItem']",i),1===s.length&&s.hasClass("hidden")?(s.find("img").attr("src",r.result.data.url),s.find("input").val(d),s.removeClass("hidden")):(o=s.eq(0).clone(),o.find("img").attr("src",r.result.data.url),o.find("input").val(d),i.append(o))):($(t).attr("src",r.result.data.url),$("[data-taptap-ajax-upload='uploaded']").length&&$("[data-taptap-ajax-upload='uploaded']").addClass("active"),"#banner_3_android"!==t&&"#banner_3_ios"!==t||(a.css({"background-image":"url("+r.result.data.url+")"}).show(),a.find(".preview-font-color").show()),$(e).length?$(e).val(d):void 0)):alert(r.result.errMsg)},fail:function(t,e){return alert(e.jqXHR.responseJSON.errMsg)}})}),$(document).on("click.taptap.ajax.upload_private","[data-taptap-ajax='upload_private']",function(){var t,e,a;return t=$(this).data("target"),e=$(this).data("target-input"),a=$(this).data("target-href"),$(this).fileupload({dataType:"json",formData:{img_type:t},done:function(n,r){return r.result.success?($(t).attr("src",r.result.data.url),$(a).attr("href",r.result.data.url).show(),$(t).text("上传成功"),$(e).length?$(e).val(r.result.data.url):void 0):alert(r.result.errMsg)}})}),$(document).on("click.taptap.ajax.avatar","[data-taptap-ajax='avatar']",function(){var t,e;return e={avatar:$("#avatarUpload").attr("src")},t=$(this).button("loading"),window.ajax.post($(this).data("url"),e,function(e){var a;return a=e.data.avatar,$("[data-taptap-ajax-upload='uploaded']").hasClass("active")&&$("[data-taptap-ajax-upload='uploaded']").removeClass("active"),$("[data-taptap-avatar='display']").attr("src",a),$("#avatarModal").modal("hide"),t.button("reset")})}),$(document).on("submit.taptap.ajax.profile","[data-taptap-profile='edit']",function(t){var e,a;return t.preventDefault(),a=$(this),e=$("button[type='submit']",a).button("loading"),window.ajax.post(a.data("url"),a.serialize(),function(t){var a;if(t.success){var n=$("#cookie_region").val(),r=$("[name='country']").val();return""!==r&&""!==n&&r.toLowerCase()!==n.toLowerCase()?window.location.reload():(a="#profileSaveSuccessModal",$(a).modal("show"),setTimeout(function(){location.reload()},500)),e.button("reset")}return a="#profileSaveFailModal",$("p[data-taptap-profile-fail='save']",a).html(t.errMsg),$(a).modal("show"),e.button("reset")},!0)}),$(document).on("click.taptap.ajax.delete","[data-taptap-ajax='delete']",function(){var t;return t=$(this).button("loading"),window.ajax.post($(this).data("url"),null,function(e){var a,n,r;if("refresh"===e.data.type)return location.reload();if("url"===e.data.type)return window.location.href=e.data.to;if(e.data.id)r=$("#"+e.data.type+"-"+e.data.id),r.length>0&&r.remove();else if(e.data.ids)for(n=e.data.ids,a=0;a<n.length;)r=$("#"+e.data.type+"-"+n[a]),r.length>0&&r.remove(),a++;return $("#deleteModal").modal("hide"),t.button("reset")})}),$(document).on("click.taptap.ajax.un_delete","[data-taptap-ajax='un_delete']",function(){var t;return t=$(this).button("loading"),window.ajax.post($(this).data("url"),null,function(e){var a,n,r;if("refresh"===e.data.type)return location.reload();if("url"===e.data.type)return window.location.href=e.data.to;if(e.data.id)r=$("#"+e.data.type+"-"+e.data.id),r.length>0&&r.remove();else if(e.data.ids)for(n=e.data.ids,a=0;a<n.length;)r=$("#"+e.data.type+"-"+n[a]),r.length>0&&r.remove(),a++;return $("#unDeleteModal").modal("hide"),t.button("reset")})}),$(document).on("click.taptap.ajax.hidden","[data-taptap-ajax='hidden']",function(){var t;return t=$(this).button("loading"),window.ajax.post($(this).data("url"),null,function(e){var a,n,r;if("refresh"===e.data.type)return location.reload();if("url"===e.data.type)return window.location.href=e.data.to;if(e.data.id)r=$("#"+e.data.type+"-"+e.data.id),r.length>0&&r.remove();else if(e.data.ids)for(n=e.data.ids,a=0;a<n.length;)r=$("#"+e.data.type+"-"+n[a]),r.length>0&&r.remove(),a++;return $("#hiddenModal").modal("hide"),t.button("reset")})}),$(document).on("click.taptap.ajax.un_hidden","[data-taptap-ajax='un_hidden']",function(){var t;return t=$(this).button("loading"),window.ajax.post($(this).data("url"),null,function(e){var a,n,r;if("refresh"===e.data.type)return location.reload();if("url"===e.data.type)return window.location.href=e.data.to;if(e.data.id)r=$("#"+e.data.type+"-"+e.data.id),r.length>0&&r.remove();else if(e.data.ids)for(n=e.data.ids,a=0;a<n.length;)r=$("#"+e.data.type+"-"+n[a]),r.length>0&&r.remove(),a++;return $("#unHiddenModal").modal("hide"),t.button("reset")})}),$(document).on("click.taptap.ajax.topic","[data-taptap-ajax='topic']",function(t){var e;return t.preventDefault(),e=$(this),!e.hasClass("disabled")&&(e.addClass("disabled"),Tap.ajax.post(e.data("url"),null,function(t){if(e.removeClass("disabled"),t.success)return Tap.tip("操作成功！"),e.text(t.data.text).data("url",t.data.url)}))}),t("[data-taptap-ajax='closeComment']",function(){$(".topic-show-main,.comment-box").addClass("topic-closed"),$(".close-comment").addClass("hide"),$(".open-comment").removeClass("hide")}),t("[data-taptap-ajax='openComment']",function(){$(".topic-show-main,.comment-box").removeClass("topic-closed"),$(".close-comment").removeClass("hide"),$(".open-comment").addClass("hide")}),t("[data-taptap-ajax='close_reply']",function(){var t=$(this),e=t.attr("data-comment-id"),a=$("#post-"+e);$(a).addClass("closed"),$(a).find(".open-reply").removeClass("hide"),$(a).find(".close-reply").addClass("hide")}),t("[data-taptap-ajax='open_reply']",function(){var t=$(this),e=t.attr("data-comment-id"),a=$("#post-"+e);$(a).removeClass("closed"),$(a).find(".open-reply").addClass("hide"),$(a).find(".close-reply").removeClass("hide")}),$(document).on("click.taptap.ajax.install","[data-taptap-ajax='install']",function(){var t,e,a,n;return e=$("[data-taptap-ajax-install='device']").val(),t={device_id:e},a=parseInt($(this).data("id")),n=$("meta[name=user_id]").attr("content"),n=n?n+"":null,window.cookie.set("device_first_choice",e,365,"/",$('meta[name="cookie-domain"]').attr("content")),window.ajax.post($(this).data("url"),t,function(t){return t.success?($("#installModal").modal("hide"),tapad("download",a,n)):$("[data-taptap-ajax-install='tips']").text(t.errMsg)},!0)}),$(document).on("click.taptap.ajax.complaintModal","[data-taptap-ajax-complaint='button']",function(){var t,e,a,n,r;return $("#loginTipsModal").length?($("#loginTipsModal").modal("show"),!1):(r=$(this).data("obj"),a=$(this).data("id"),n=$("#complaintModal"),t=$("[data-contents-app='1']",n),e=$("[data-contents-app='0']",n),"app"===r&&t.hasClass("hidden")?(t.removeClass("hidden").addClass("show"),e.removeClass("show").addClass("hidden")):"app"!==r&&e.hasClass("hidden")&&(e.removeClass("hidden").addClass("show"),t.removeClass("show").addClass("hidden")),$("input[name='obj']",n).val(r),$("input[name='id']",n).val(a),n.modal("show"))}),$(document).on("submit.taptap.ajax.complaint","[data-taptap-ajax='complaint']",function(t){var e,a,n;return t.preventDefault(),a=$(this),n=$("[data-taptap-ajax-complaint='success']",".show[data-contents-app]"),a.serializeArray().filter(function(t){return"reason"===t.name}).length?(e=$("button[type='submit']",a).button("loading"),window.ajax.post(a.attr("action"),a.serialize(),function(t){return e.button("reset"),t.success?(setTimeout(function(){return e.attr("disabled","disabled")},100),a.parents("#complaintModal").modal("hide")):n.text(t.errMsg),n.show()},!0)):(n.text(n.data("empty-reason-text")).show(),!1)}),$(function(){var t;return t=$("#complaintModal"),t.on("hidden.bs.modal",function(){return t.find("form")[0].reset(),setTimeout(function(){return t.find("button[type='submit']").prop("disabled",!1),t.find('[data-taptap-ajax-complaint="success"]').hide()},100)})}),$(document).on("click.taptap.ajax.paginator","[data-taptap-ajax='paginator'] a",function(t){var e,a;return t.preventDefault(),e=$(this).parents("[data-taptap-ajax-paginator='container']"),a=e.offset().top,window.ajax.get($(this).attr("href"),function(t){if(e.html(t.data.html),$("body").animate({scrollTop:a-35},300),$("[data-dynamic-time]").length)return window.dynamicTime.updatePage()})}),$(document).on("click.taptap.ajax.follow","[data-taptap-ajax='follow']",function(){var t,e,a;return $("#loginTipsModal").length?($("#loginTipsModal").modal("show"),!1):(e=$(this),a={obj:e.data("obj"),id:e.data("id")},t=e.button("loading"),window.ajax.post(e.data("url"),a,function(a){return t.button("reset"),e.replaceWith(a.data.html)}))}),$(document).on("click.taptap.ajax.unfollow","[data-taptap-ajax='unfollow']",function(){var t,e,a;return $("#loginTipsModal").length?($("#loginTipsModal").modal("show"),!1):(e=$(this),a={obj:e.data("obj"),id:e.data("id")},t=e.button("loading"),window.ajax.post(e.data("url"),a,function(a){return t.button("reset"),e.replaceWith(a.data.html)}))}),$(document).on("click.taptap.ajax.unfollow","[data-taptap-ajax-feed='unfollow']",function(){var t,e,a;return e=$(this),a={obj:e.data("obj"),id:e.data("id")},t=e.button("loading"),window.ajax.post(e.data("url"),a,function(){var e;if($("#unfollowModal").modal("hide"),t.button("reset"),e=null,"user"===a.obj?e=$("[data-taptap-ajax-feed='container'][data-type='review'][data-user-id='"+a.id+"']"):"developer"===a.obj&&(e=$("[data-taptap-ajax-feed='container'][data-type='developer'][data-developer-id='"+a.id+"']")),e&&e.length)return e.each(function(){return $(this).collapse("hide")})})}),$(document).on("submit.taptap.ajax.reserve","[data-taptap-ajax='reserve']",function(t){var e,a,n;return t.preventDefault(),a=$("input[name='type']",$(this)).val(),e=$("button[type='submit']",$(this)).button("loading"),n=parseInt($("input[name='app_id']",$(this)).val()),window.ajax.post($(this).attr("action"),$(this).serialize(),function(t){var r;if(e.button("reset"),"object"==typeof t&&t.success){r=$("[data-taptap-reserve='button'][data-type='"+a+"']").parent();var o=$("meta[name=user_id]").attr("content");return o=o?o+"":null,tapad("reserve",n,o),t.data&&t.data.html?r.replaceWith(t.data.html):(r=r.add($('[data-taptap-ajax="reserveClick"][data-type="'+a+'"]')),r.prop("disabled","disabled").find("span").text("预约成功")),$("#reserveModal").modal("hide")}},!0)}),$(document).on("click.taptap.ajax.reserve","[data-taptap-ajax='reserveClick']",function(){var t,e,a,n;if(e=$(this),n=$("#reserveModal"),$("#loginTipsModal").length)return n.data("can-reserve")?(n.find("input[name=type]").val(e.data("type")),n.modal("show"),!1):($("#loginTipsModal").modal("show"),!1);a={type:e.data("type")},t=e.button("loading");var r=parseInt($(this).data("id"));return window.ajax.post(e.data("url"),a,function(a){t.button("reset");var n=$("meta[name=user_id]").attr("content");return n=n?n+"":null,tapad("reserve",r,n),e.parent().replaceWith(a.data.html)})}),$(document).on("click.taptap.ajax.reserveCancel","[data-taptap-ajax='reserveCancel']",function(){var t,e,a;return e=$(this),t=e.button("loading"),a={type:e.data("type")},window.ajax.post(e.data("url"),a,function(a){return t.button("reset"),e.parent().replaceWith(a.data.html)})}),$(document).on("click.taptap.ajax.collect","[data-taptap-ajax='collect']",function(){var t,e;return $("#loginTipsModal").length?($("#loginTipsModal").modal("show"),!1):(t=$(this),t.prop("disabled",!0),t.tooltip("hide"),e={obj:t.data("obj"),id:t.data("id")},window.ajax.post(t.data("url"),e,function(e){return t.prop("disabled",!1),t.replaceWith(e.data.html),$('[data-toggle="tooltip"]').tooltip()}))}),$(document).on("click.taptap.ajax.vote","[data-taptap-ajax='vote']",function(){var t,e,a,n;return $("#loginTipsModal").length?($("#loginTipsModal").modal("show"),!1):(t=$(this),e=t.data("value"),a={obj:t.data("obj"),id:t.data("id"),value:t.hasClass("active")?"neutral":e},n=$("[data-taptap-ajax='vote'][data-id='"+a.id+"'][data-obj='"+a.obj+"']"),t.prop("disabled",!0),window.ajax.post(t.data("url"),a,function(a){if(t.prop("disabled",!1),a.success)return n.each(function(t,n){var r,o;return o=$(n).data("value"),o===e?$(n).hasClass("active")?$(n).removeClass("active"):$(n).addClass("active"):$(n).hasClass("active")&&$(n).removeClass("active"),r=0===parseInt(a.data[o])?"":a.data[o],$(n).find("[data-taptap-ajax-vote='count']").text(r)})},!0))}),$(document).on("click.taptap.ajax.voteFunny","[data-taptap-ajax='voteMove']",function(){var t,e,a,n;return e=$("[data-taptap-ajax='voteChange']"),a=$("input[name='id']",e).val(),t=$(this).button("loading"),n={id:a},window.ajax.post($(this).data("url"),n,function(e){if(e.success)return t.button("reset"),$("#voteChangeModal").modal("hide")})}),$(document).on("click.taptap.ajax.feed","[data-taptap-ajax='feed']",function(t){var e,a;return t.preventDefault(),e=$(this).parents("[data-taptap-ajax-feed='container']"),a={id:$(this).data("id")},$(this).prop("disabled",!0),window.ajax.post($(this).data("url"),a,function(){return e.collapse("hide")})}),$(document).on("click.taptap.ajax.chart","[data-taptap-ajax='chart']",function(t){var e,a,n,r,o;return t.preventDefault(),!$(this).hasClass("disabled")&&!$("#developerChart > .loading").length&&(r=$(this),e=r.attr("href"),n=$('[data-taptap-ajax-timeregion="start_date"]').val(),a=$('[data-taptap-ajax-timeregion="end_date"]').val(),n>a?(alert("End Date Must Before Start Date!"),!1):(o=e+"&start_date="+encodeURIComponent(n)+"&end_date="+encodeURIComponent(a),window.mixins.timeRegionChartData(o,r),$(".developer-main-nav > li").removeClass("active"),r.parent().addClass("active")))}),$(document).on("click.taptap.ajax.timeregion","[data-taptap-ajax-timeregion='chart']",function(t){var e,a,n,r,o;return!$("#developerChart > .loading").length&&(t.preventDefault(),r=$(".developer-main-nav > li.active > a"),e=r.attr("href"),n=$('[data-taptap-ajax-timeregion="start_date"]').val(),a=$('[data-taptap-ajax-timeregion="end_date"]').val(),n>a?(alert("End Date Must Before Start Date!"),!1):(o=e+"&start_date="+encodeURIComponent(n)+"&end_date="+encodeURIComponent(a),window.mixins.timeRegionChartData(o,r)))}),$(document).on("click.taptap.ajax.addAdmin","[data-taptap-ajax='addAdmin']",function(){var t,e,a;return e=$("[data-taptap-ajax-addAdmin='item']:checked"),!!e.length&&(t=e.map(function(){return $(this).val()}).get().join(","),a=$(this).data("url")+"?ids="+t,window.ajax.post(a,null,function(t){return t.success?($("[data-taptap-ajax-addAdmin='container']").append(t.data.html),$("#addAdminModal").modal("hide")):alert(t.errMsg)},!0))}),$(document).on("submit.taptap.ajax.userSearch","[data-taptap-ajax='userSearch']",function(t){var e;return t.preventDefault(),e=$(this).attr("action")+"?"+$(this).serialize(),window.ajax.get(e,function(t){return $("[data-taptap-ajax-userSearch]").html(t.data.html)})}),$(document).on("click.taptap.ajax.userSearch","[data-taptap-ajax-userSearch='container'] tr",function(t){if("checkbox"!==t.target.type)return $(":checkbox",this).trigger("click")}),$(document).on("click.taptap.ajax.gameCollections","[data-taptap-ajax='gameCollections']",function(){var t,e;return t=$(this),e=t.data("target"),!$(e).hasClass("in")&&($(e).collapse("show"),window.ajax.get(t.data("url"),function(a){return $(e).html(a.data.html),t.find("i").hide(),t.siblings("[data-taptap-ajax-gameCollections='more']").show()}))}),$(function(){return $("[data-taptap-ajax='error']").length&&!function(){return window.ajax.get($("[data-taptap-ajax='error']").data("url"),function(t){return $("[data-taptap-ajax-error='keywords']").html(t.data.keywords),$("[data-taptap-ajax-error='apps'] [data-taptap-ajax-error='html']").html(t.data.apps),$("[data-taptap-ajax-error='apps']").addClass("show")})}(),$("span","[data-taptap-ajax='notification']").length&&!function(){var t;return t=$("[data-taptap-ajax='notification']"),window.mixins.titleMessageNew(t)}(),$(document).on("submit.taptap.ajax.unbindAccount",'[data-taptap-ajax="unbindAccount"]',function(t){var e;return t.preventDefault(),e=$(this),$("#unbind-account").modal("hide"),Tap.ajax.post(e.attr("action"),e.serialize(),function(t){return $(".account-"+e.data("provider")).html(t.data.html),$("#alertSuccess").modal("show")},function(){})}),$(document).on("submit.taptap.ajax.refund",'[data-taptap-ajax="refund"]',function(t){var e,a,n;return t.preventDefault(),e=$(this),n=e.find("[name='reason']"),n.val()?(a=e.find(".btn"),a.button("loading"),window.ajax.post(e.attr("action"),e.serialize(),function(t){var e;return a.button("reset"),t.success?$("#orderRefundSuccessModal").modal("show"):(e=$("#orderRefundFailModal"),e.find(".profile-save").text(t.errMsg),e.modal("show"))},!0)):n.focus()})})}();